sap.ui.define(["../util/githubService","../util/markdownService","./Base.controller","sap/m/ActionListItem","sap/ui/model/json/JSONModel","sap/ui/Device"],function(t,e,i,n,o,s){function a(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const d=t["getSelectedContent"];const c=t["getWikiIndex"];const r=t["getContentEditLink"];const l=e["markdownService"];const h=a(i);const u=h.extend("sapmarco.projectpages.controller.WikiController",{onInit:function t(){this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());this._wikiContentModel=new o({markdown:"",title:"",edit:""});this.getView().setModel(this._wikiContentModel,"convertedmarkdown");this.getRouter().getRoute("RouteWiki").attachMatched(this._onRouteMatched.bind(this),this)},onThemeSwap:function t(){this.toggleTheme()},_onRouteMatched:async function t(){await this._initializeSidebar()},_initializeSidebar:async function t(){const e=await c();const i=l.parse(e);const o=[...i.matchAll(/\wiki\/(.*?)\"/g)];o.forEach(t=>{this.byId("sidebar").addItem(new n({text:`${t[1]}`,press:this.onSidebarSelection.bind(this,t[1],this._wikiContentModel,s.system.phone)}))})},onSidebarSelection:function t(e,i,n){void(async()=>{const t=await d(e);const o=r(e);i.setData({markdown:`<div class="container">${l.parse(t)}</div>`,title:e,edit:o});if(n)setTimeout(()=>{this.byId("responsiveSplitter")._activatePage(1)},0);if(this.byId("markdownSection"))this.byId("markdownSection").scrollTo(0,0)})()}});return u});