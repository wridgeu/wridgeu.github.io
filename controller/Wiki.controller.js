"use strict";sap.ui.define(["../util/githubService","../util/markdownService","./Base.controller","sap/m/ActionListItem","sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,t,n,i,o,r){function s(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const c=e["getSelectedContent"];const a=e["getWikiIndex"];const d=e["getContentEditLink"];const l=t["markdownService"];const u=s(n);const h=u.extend("sapmarco.projectpages.controller.WikiController",{onInit:function e(){this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());this._wikiContentModel=new o({markdown:"",title:"",edit:""});this.getView().setModel(this._wikiContentModel,"convertedmarkdown");this.getRouter().getRoute("RouteWiki").attachMatched(this._onRouteMatched.bind(this),this)},onThemeSwap:function e(){this.toggleTheme()},_onRouteMatched:function e(){try{const e=this;return Promise.resolve(e._initializeSidebar()).then(function(){})}catch(e){return Promise.reject(e)}},_initializeSidebar:function e(){try{const e=this;return Promise.resolve(a()).then(function(t){const n=l.parse(t);const o=[...n.matchAll(/\wiki\/(.*?)\"/g)];o.forEach(t=>{e.byId("sidebar").addItem(new i({text:`${t[1]}`,press:e.onSidebarSelection.bind(e,t[1],e._wikiContentModel,r.system.phone)}))})})}catch(e){return Promise.reject(e)}},onSidebarSelection:function e(t,n,i){const o=this;void function(){try{return Promise.resolve(c(t)).then(function(e){const r=d(t);n.setData({markdown:`<div class="container">${l.parse(e)}</div>`,title:t,edit:r});if(i)setTimeout(()=>{o.byId("responsiveSplitter")._activatePage(1)},0);if(o.byId("markdownSection"))o.byId("markdownSection").scrollTo(0,0)})}catch(e){return Promise.reject(e)}}()}});return h});
//# sourceMappingURL=Wiki.controller.js.map