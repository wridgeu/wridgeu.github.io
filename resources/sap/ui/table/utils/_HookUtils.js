/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/DataType","sap/base/Log"],function(e,t){"use strict";var n=new window.WeakMap;var r={};var a={};var u={};var i=["function"];var s={};var l={Table:{BindRows:{arguments:[{type:"object"}]},RowsBound:{arguments:[{type:"class:sap.ui.model.Binding"}]},UnbindRows:{arguments:[{type:"object"}]},RowsUnbound:{arguments:[]},RefreshRows:{arguments:[{type:h}]},UpdateRows:{arguments:[{type:h}]},UpdateSizes:{arguments:[{type:h}]},OpenMenu:{arguments:[{type:m},{type:"class:sap.ui.unified.Menu"}]},TotalRowCountChanged:{arguments:[]}},Row:{UpdateState:{arguments:[{type:v}]},Expand:{arguments:[{type:"class:sap.ui.table.Row"}]},Collapse:{arguments:[{type:"class:sap.ui.table.Row"}]}},Column:{MenuItemNotification:{arguments:[{type:"class:sap.ui.table.Column"}],returnValue:"boolean"}},Signal:{arguments:[{type:"string"}]}};s.TableUtils=null;s.Keys=a;s.call=function(e,t){var a=n.get(e);if(!p(e)||!f(t)){return undefined}var u=d(t);if(a==null){if(u.returnValue){return[]}return undefined}var i=y(Array.prototype.slice.call(arguments,2));var l=c(u,i);if(!l){throw new Error("Hook with key "+t+" was not called. Invalid arguments passed\n"+e)}var o=a.map(function(e){if(e.key===r){var n={};var a=e.handlerContext==null?e.target:e.handlerContext;n[t]=i;return s.TableUtils.dynamicCall(e.target,n,a)}else if(e.key===t){return e.handler.apply(e.handlerContext,i)}});o=g(u,o);return o};s.install=function(e,t,a){if(!t||!p(e)){return}var u=n.get(e);if(u==null){u=[]}var i=u.some(function(e){return e.key===r&&e.target===t&&e.handlerContext===a});if(i){return}u.push({key:r,target:t,handlerContext:a});n.set(e,u)};s.uninstall=function(e,t,a){var u=n.get(e);if(u==null||!t){return}for(var i=0;i<u.length;i++){var s=u[i];if(s.key===r&&s.target===t&&s.handlerContext===a){u.splice(i,1);break}}if(u.length===0){n.delete(e)}else{n.set(e,u)}};s.register=function(e,t,r,a){if(typeof r!=="function"||!p(e)||!f(t)){return}var u=n.get(e);if(u==null){u=[]}u.push({key:t,handler:r,handlerContext:a});n.set(e,u)};s.deregister=function(e,t,r,a){var u=n.get(e);if(u==null){return}for(var i=0;i<u.length;i++){var s=u[i];if(s.key===t&&s.handler===r&&s.handlerContext===a){u.splice(i,1);break}}if(u.length===0){n.delete(e)}else{n.set(e,u)}};function o(e,t,n){Object.keys(t).forEach(function(r){var a=n?n+"."+r:r;if("arguments"in t[r]){i.forEach(function(e){if(t[r].arguments.indexOf(e)>-1||t[r].returnValue===e){throw new Error("Forbidden type found in metadata of hook "+n+": "+e)}});e[r]=a;u[a]=t[r]}else{e[r]={};o(e[r],t[r],a)}});return e}o(a,l);function f(e){return e in u}function p(e){return s.TableUtils.isA(e,"sap.ui.table.Table")&&!e.bIsDestroyed&&!e._bIsBeingDestroyed}function d(e){return u[e]}function y(e){while(e.length>0){var t=e.pop();if(t!=null){e.push(t);break}}e.map(function(e){if(e===null){return undefined}else{return e}});return e}function c(t,n){return t.arguments.length>=n.length&&n.every(function(n,r){var a=t.arguments[r];if(typeof a.type==="function"){return a.type(n)}if(a.type.startsWith("class:")){return s.TableUtils.isA(n,a.type.substring(6))}return a.optional===true&&n==null||e.getType(a.type).isValid(n)})}function g(t,n){if(!t.returnValue){return undefined}var r=t.returnValue;return n.filter(function(t){if(t==null){return false}else if(typeof r==="function"){return r(t)}else if(r==="Promise"){return t instanceof Promise}else if(r.startsWith("class:")){return s.TableUtils.isA(t,r.substring(6))}else{return e.getType(r).isValid(t)}})}function h(t){return t in s.TableUtils.RowsUpdateReason||e.getType("sap.ui.model.ChangeReason").isValid(t)}function m(e){return e?typeof e.isOfType==="function":false}function v(e){return e!=null&&e.hasOwnProperty("context")&&e.hasOwnProperty("Type")&&e.hasOwnProperty("type")&&e.type in e.Type}return s},true);