/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global"],function(e){"use strict";var t=false;function s(t){if(t){if(Array.isArray(t)){return e.sap.escapeHTML(t.join(", "))}else{return e.sap.escapeHTML(t)}}else{return""}}function r(e,t,r,a){var i="";var n="";var p=1;var o=0;for(var l in t){var u=t[l];o+=u.length;var d=u[0];n+='<tr id="'+r+"_rule_"+p+'" >';n+="<td>";n+='<div class="expandable-control collapsed-content" data-expandableElement="'+r+"_rule_"+p+'_content">';n+='<div class="expandable-title">'+p+". "+s(d.name)+' <span class="rule-issue-number">('+u.length+" issues)</span></div></div>";n+='<div class="sapUiIssueGroupContent" id="'+r+"_rule_"+p+'_content">';n+='<div><span class="sapUiSupportLabel">Description: </span>'+s(d.description)+"</div>";n+='<div><span class="sapUiSupportLabel">Min version: </span>'+s(d.minVersion)+"</div>";n+='<div><span class="sapUiSupportLabel">Async: </span>'+s(d.async.toString())+"</div>";n+='<div><span class="sapUiSupportLabel">Resolution: </span>'+s(d.resolution)+"</div>";n+="<div>";if(d.resolutionUrls){for(var c=0;c<d.resolutionUrls.length;c++){n+='<div><a href="'+s(d.resolutionUrls[c].href)+'" target="_blank">'+s(d.resolutionUrls[c].text)+"</a></div>"}}n+="</div>";n+='<table class="sapUiTable"><tr><th></th><th>Element Id</th><th>Class</th><th>Status</th><th>Details</th></tr>';for(var v=0;v<u.length;v++){n+='<tr class="filterable" data-severity="'+s(u[v].severity)+'"><td>'+(v+1)+"</td><td>"+s(u[v].context.id)+"</td>";n+="<td>"+s(u[v].context.className)+"</td>";n+='<td class="'+s(u[v].severity)+'">'+s(u[v].severity)+"</td>";n+="<td>"+s(u[v].details)+"</td></tr>"}n+="</table>";n+="</div></td>";n+="<td>"+s(d.categories)+"</td>";n+="<td>"+s(d.audiences)+"</td>";n+="</tr>";p++}var f="collapsed-content";if(a===1){f="expanded-content"}i+="<tr>";i+='<td colspan="100" class="expandable-control '+f+'" data-expandableElement="'+r+'" data-groupName="'+e+'" data-groupNumber="'+a+'">';i+='<span class="sapUiSupportLabel expandable-title">'+a+". "+e+" ("+(p-1)+" rules, "+o+" issues)</span>";i+='</td></tr><tbody id="'+r+'">';i+=n;i+="</tbody>";return i}function a(t){var s="";var a=1;if(!t){return s}try{s+='<table class="sapUiTable"><tr><th>Name</th><th>Categories</th><th>Audiences</th></tr>';for(var i in t){s+=r(i,t[i],"group"+a,a);a++}s+="</table>"}catch(t){e.sap.log.warning("There was a problem extracting issues info.");s=""}return s}function i(e,t,s){if(!t){return""}var r=s?"filter-active":"";return'<div data-severity="'+e+'" class="filter '+r+" "+e+'">'+e+"("+t+")</div>"+" | "}function n(t){var s="",r={},a,n,p=0,o=[],l={},u={},d={};if(!t){return s}try{for(d in t){l=t[d];for(u in l){o=l[u];for(n=0;n<o.length;n++){a=o[n].severity;if(r[a]){r[a]++}else{r[a]=1}p++}}}s+=i("Total",p,true);s+=i("High",r["High"],false);s+=i("Medium",r["Medium"],false);s+=i("Low",r["Low"],false)}catch(t){e.sap.log.warning("There was a problem creating severity filters.");s=""}return s}function p(e,t){var s="";if(t){s+='<div class="filters">'+n(e)+"<div>\n"}s+="<div>"+a(e)+"</div>";return"<div>"+s+"</div>"}function o(s){if(!e("#qunit")||!s){return}var r=e(this.render(s));e("#qunit").append(r);if(!t){var a=[e.sap.getResourcePath("sap/ui/support/supportRules/report/resources/styles.css"),e.sap.getResourcePath("sap/ui/support/supportRules/report/resources/collapseExpand.css"),e.sap.getResourcePath("sap/ui/support/supportRules/report/resources/filter.css")];var i=e.sap.getResourcePath("sap/ui/support/supportRules/report/resources/collapseExpand.js");var n=e.sap.getResourcePath("sap/ui/support/supportRules/report/resources/filter.js");e.each(a,function(t,s){e("<link>").appendTo("head").attr({type:"text/css",rel:"stylesheet",href:s})});e.getScript(i,function(){window.sapUiSupportReport.collapseExpand.init()});e.getScript(n,function(){window.sapUiSupportReport.filter.init()});t=true}else{window.sapUiSupportReport.collapseExpand.init();window.sapUiSupportReport.filter.init()}}return{render:p,renderIssuesForOPA:o}},true);