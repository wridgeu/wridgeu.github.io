/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/core/Component","sap/ui/core/Element"],function(e,t,n){"use strict";var r=null,a=[];var o={setScope:function(){a=n.registry.filter(function(){return true})}};var i={setScope:function(){var e=n.registry.get(r.parentId);a=e.findAggregatedObjects(true)}};var u={setScope:function(){var e={};r.components.forEach(function(n){var r=t.registry.get(n),a=r.findAggregatedObjects(true);a.forEach(function(t){e[t.getId()]=t})});for(var n in e){if(e.hasOwnProperty(n)){a.push(e[n])}}}};var f={global:o,subtree:i,components:u};function c(e){var t=e.getParent().getMetadata().getAggregation(e.sParentAggregationName);return!!t}function s(e){var t;if(e.getRootControl){t=e.getRootControl();if(t){return[t].concat(t.findAggregatedObjects(true,c))}}return[]}function g(e){var t=e.sParentAggregationName,n=e.getParent();if(n&&t){var r=n.getBindingInfo(t);if(r&&e instanceof r.template.getMetadata().getClass()){return true}else{return g(n)}}return false}function p(e){var t=e.sParentAggregationName,n=e.getParent();if(n&&t){var r=n.getBindingInfo(t);if(r&&e instanceof r.template.getMetadata().getClass()){return n.getId()}else{return p(n)}}return null}function l(e,t){var n=[];for(var r=0,a=e.length;r<a;r++){for(var o=0,i=t.length;o<i;o++){if(e[r]===t[o]){n.push(e[r])}}}return n}function v(n,o){a=[];r=o;f[r.type].setScope();return{getElements:function(e){var t=this;var n={type:null,public:false,cloned:true};if(e&&Object.keys(e).length){var r=a;var o={};Object.keys(n).forEach(function(n){if(e.hasOwnProperty(n)){switch(n){case"type":var a=t.getElementsByClassName(e["type"]);r=l(r,a);break;case"public":if(e["public"]===true){var i=t.getPublicElements();r=l(r,i)}break;case"cloned":if(!e["cloned"]){r=r.filter(function(e){var t=g(e);if(t){var n=p(e);if(!o.hasOwnProperty(n)){o[n]=e}}return t===false})}break}}});Object.keys(o).forEach(function(e){r.push(o[e])});return r}return a},getPublicElements:function(){var e=[];var r=n.mUIAreas;t.registry.forEach(function(t){e=e.concat(s(t))});for(var a in r){e=e.concat(s(r[a]))}return e},getElementsByClassName:function(e){if(typeof e==="string"){return a.filter(function(t){return t.getMetadata().getName()===e})}if(typeof e==="function"){return a.filter(function(t){return t instanceof e})}},getLoggedObjects:function(t){var n=e.getLogEntries(),r=[],o;n.forEach(function(e){if(!e.supportInfo){return}if(!o){o=a.map(function(e){return e.getId()})}var n=!!e.supportInfo.elementId,i=e.supportInfo.type===t||t===undefined,u=!n||o.indexOf(e.supportInfo.elementId)>-1;if(typeof t==="function"&&t(e)&&u){r.push(e);return}if(i&&u){r.push(e)}});return r},getType:function(){return r.type},_getContext:function(){return r}}}v.possibleScopes=Object.getOwnPropertyNames(f);return v},true);