/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/core/LocaleData","./_Calendars","sap/ui/core/Configuration"],function(e,t,r,n){"use strict";var a=e.extend("sap.ui.core.date.UniversalDate",{constructor:function(){var e=a.getClass();return this.createDate(e,arguments)}});a.UTC=function(){var e=a.getClass();return e.UTC.apply(e,arguments)};a.now=function(){return Date.now()};a.prototype.createDate=function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]instanceof Date?t[0].getTime():t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}};a.getInstance=function(e,t){var r,i;if(e instanceof a){e=e.getJSDate()}else if(!e){e=new Date}if(isNaN(e.getTime())){throw new Error("The given date object is invalid")}if(!t){t=n.getCalendarType()}r=a.getClass(t);i=Object.create(r.prototype);i.oDate=e;i.sCalendarType=t;return i};a.getClass=function(e){if(!e){e=n.getCalendarType()}return r.get(e)};["getDate","getMonth","getFullYear","getYear","getDay","getHours","getMinutes","getSeconds","getMilliseconds","getUTCDate","getUTCMonth","getUTCFullYear","getUTCDay","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","getTime","valueOf","getTimezoneOffset","toString","toDateString","setDate","setFullYear","setYear","setMonth","setHours","setMinutes","setSeconds","setMilliseconds","setUTCDate","setUTCFullYear","setUTCMonth","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds"].forEach(function(e){a.prototype[e]=function(){return this.oDate[e].apply(this.oDate,arguments)}});a.prototype.getJSDate=function(){return this.oDate};a.prototype.getCalendarType=function(){return this.sCalendarType};a.prototype.getEra=function(){return a.getEraByDate(this.sCalendarType,this.oDate.getFullYear(),this.oDate.getMonth(),this.oDate.getDate())};a.prototype.setEra=function(e){};a.prototype.getUTCEra=function(){return a.getEraByDate(this.sCalendarType,this.oDate.getUTCFullYear(),this.oDate.getUTCMonth(),this.oDate.getUTCDate())};a.prototype.setUTCEra=function(e){};a.prototype.getWeek=function(e,t){s(t);return a.getWeekByDate(this.sCalendarType,this.getFullYear(),this.getMonth(),this.getDate(),e,t)};a.prototype.setWeek=function(e,t,r){s(r);var n=a.getFirstDateOfWeek(this.sCalendarType,e.year||this.getFullYear(),e.week,t,r);this.setFullYear(n.year,n.month,n.day)};a.prototype.getUTCWeek=function(e,t){s(t);return a.getWeekByDate(this.sCalendarType,this.getUTCFullYear(),this.getUTCMonth(),this.getUTCDate(),e,t)};a.prototype.setUTCWeek=function(e,t,r){s(r);var n=a.getFirstDateOfWeek(this.sCalendarType,e.year||this.getFullYear(),e.week,t,r);this.setUTCFullYear(n.year,n.month,n.day)};a.prototype.getQuarter=function(){return Math.floor(this.getMonth()/3)};a.prototype.getUTCQuarter=function(){return Math.floor(this.getUTCMonth()/3)};a.prototype.getDayPeriod=function(){if(this.getHours()<12){return 0}else{return 1}};a.prototype.getUTCDayPeriod=function(){if(this.getUTCHours()<12){return 0}else{return 1}};a.prototype.getTimezoneShort=function(){if(this.oDate.getTimezoneShort){return this.oDate.getTimezoneShort()}};a.prototype.getTimezoneLong=function(){if(this.oDate.getTimezoneLong){return this.oDate.getTimezoneLong()}};var i=7*24*60*60*1e3;a.getWeekByDate=function(e,r,a,i,s,g){s=s||n.getFormatSettings().getFormatLocale();var f=t.getInstance(s);var l=this.getClass(e);var c=o(l,r,s,g);var y=new l(l.UTC(r,a,i));var D,h,p,T,C;var d=(!g||g.minimalDaysInFirstWeek===undefined||g.firstDayOfWeek===undefined)&&f.firstDayStartsFirstWeek();if(d){D=u(c,y)}else{h=r-1;p=r+1;T=o(l,h,s,g);C=o(l,p,s,g);if(y>=C){r=p;D=0}else if(y<c){r=h;D=u(T,y)}else{D=u(c,y)}}return{year:r,week:D}};a.getFirstDateOfWeek=function(e,r,a,s,u){s=s||n.getFormatSettings().getFormatLocale();var g=t.getInstance(s);var f=this.getClass(e);var l=o(f,r,s,u);var c=new f(l.valueOf()+a*i);var y=(!u||u.minimalDaysInFirstWeek===undefined||u.firstDayOfWeek===undefined)&&g.firstDayStartsFirstWeek();if(y&&a===0&&l.getUTCFullYear()<r){return{year:r,month:0,day:1}}return{year:c.getUTCFullYear(),month:c.getUTCMonth(),day:c.getUTCDate()}};function s(e){if(e){if(e.firstDayOfWeek===undefined&&e.minimalDaysInFirstWeek!==undefined||e.firstDayOfWeek!==undefined&&e.minimalDaysInFirstWeek===undefined){throw new Error("Week config requires both firstDayOfWeek and minimalDaysInFirstWeek to be set")}}}function o(e,r,a,i){a=a||n.getFormatSettings().getFormatLocale();var s=t.getInstance(a);var o;var u;if(i&&i.minimalDaysInFirstWeek!==undefined&&i.firstDayOfWeek!==undefined){o=i.minimalDaysInFirstWeek;u=i.firstDayOfWeek}else{o=s.getMinimalDaysInFirstWeek();u=s.getFirstDayOfWeek()}var g=new e(e.UTC(r,0,1));var f=7;if(isNaN(g.getTime())){throw new Error("Could not determine the first day of the week, because the date "+"object is invalid")}while(g.getUTCDay()!==u){g.setUTCDate(g.getUTCDate()-1);f--}if(f<o){g.setUTCDate(g.getUTCDate()+7)}return g}function u(e,t){return Math.floor((t.valueOf()-e.valueOf())/i)}var g={};a.getEraByDate=function(e,t,r,n){var a=f(e),i=new Date(0).setUTCFullYear(t,r,n),s;for(var o=a.length-1;o>=0;o--){s=a[o];if(!s){continue}if(s._start&&i>=s._startInfo.timestamp){return o}if(s._end&&i<s._endInfo.timestamp){return o}}};a.getCurrentEra=function(e){var t=new Date;return this.getEraByDate(e,t.getFullYear(),t.getMonth(),t.getDate())};a.getEraStartDate=function(e,t){var r=f(e),n=r[t]||r[0];if(n._start){return n._startInfo}};function f(e){var r=n.getFormatSettings().getFormatLocale(),a=t.getInstance(r),i=g[e];if(!i){var i=a.getEraDates(e);if(!i[0]){i[0]={_start:"1-1-1"}}for(var s=0;s<i.length;s++){var o=i[s];if(!o){continue}if(o._start){o._startInfo=l(o._start)}if(o._end){o._endInfo=l(o._end)}}g[e]=i}return i}function l(e){var t=e.split("-"),r,n,a;if(t[0]==""){r=-parseInt(t[1]);n=parseInt(t[2])-1;a=parseInt(t[3])}else{r=parseInt(t[0]);n=parseInt(t[1])-1;a=parseInt(t[2])}return{timestamp:new Date(0).setUTCFullYear(r,n,a),year:r,month:n,day:a}}return a});