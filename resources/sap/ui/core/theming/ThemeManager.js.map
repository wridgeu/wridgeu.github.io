{"version":3,"file":"ThemeManager.js","names":["sap","ui","define","assert","Eventing","Log","BaseConfig","Localization","each","LoaderExtensions","Device","Global","Library","Theming","ThemeHelper","includeStylesheet","maxThemeCheckCycles","mAllLoadedLibraries","CUSTOMCSSCHECK","_iCount","_CUSTOMID","_customCSSAdded","_themeCheckedForCustom","_sFallbackTheme","_mThemeFallback","_sThemeCheckId","ThemeManager","themeLoaded","checkThemeChanged","reset","delayedCheckTheme","fireThemeChanged","clearTimeout","_includeLibraryThemeAndEnsureThemeRoot","oLibThemingInfo","sLibName","name","_ensureThemeRoot","getTheme","preloadedCss","includeLibraryTheme","variant","sVariant","vQueryOrLibInfo","undefined","sQuery","getLibraryCssQueryParams","oGetCssVariablesParam","type","Type","Boolean","sCssVars","get","sRtl","getRTL","sLibFileName","sLibId","length","indexOf","substring","sLinkId","sOldCssUri","document","getElementById","href","sCssBasePath","URL","_getThemePath","baseURI","toString","oTmpLink","createElement","sCssPathAndName","sCssVariablesPathAndName","fnAddFoucmarker","String","test","info","Parameters","require","_addLibraryTheme","sThemeName","toUrl","replace","_updateThemeUrls","bSuppressFOUC","oQueryResult","querySelectorAll","Array","prototype","forEach","call","oHTMLElement","updateThemeUrl","ThemeParameters","_reset","fireEvent","theme","checkTheme","sPath","bIsStandardTheme","res","aFailedLibs","checkLib","lib","sStyleId","currentRes","checkAndRemoveStyle","prefix","id","checkCustom","sCustomCssPath","sLibCssQueryParams","debug","oCustomCssLink","querySelector","remove","oStyle","getAttribute","sheet","hasSheetCssRules","push","sLib","oThemeMetaData","getMetadata","Extends","warning","cssFile","window","style","getComputedStyle","content","getPropertyValue","browser","safari","html","documentElement","classList","add","e","error","aRules","safeAccessSheetCssRules","i","selectorText","bFirst","bEmergencyExit","iDelay","setTimeout","oLink","dataset","sapUiFoucmarker","applyTheme","oTheme","sTheme","new","old","sThemeRoot","getThemeRoot","slice","registerResourcePath","iQueryIndex","search","sStandardLibFilePrefix","sRTL","sHref","pos","mLinkId","exec","isArray","lastIndexOf","oLibInfo","getVersionedLibCss","version","versioninfo","apply","attachChange","oEvent","mThemeRoots","themeRoots","forceUpdate","registerThemeManager"],"sources":["ThemeManager-dbg.js"],"mappings":"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"}