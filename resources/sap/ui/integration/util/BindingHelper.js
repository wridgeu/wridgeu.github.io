/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/BindingParser","sap/base/util/extend","sap/ui/integration/formatters/DateTimeFormatter","sap/ui/integration/formatters/NumberFormatter","sap/ui/integration/formatters/TextFormatter","sap/ui/integration/bindingFeatures/DateRange"],function(e,t,r,a,n,i){"use strict";var o=/\{\{([^}]+)\}\}/g,u=/\{\{(parameters\.[^}]+)\}\}/g,f=/\{\{(dataSources\.[^}]+)\}\}/g;var s={};var c={date:r.date,dateTime:r.dateTime,currency:a.currency,float:a.float,integer:a.integer,percent:a.percent,text:n.text,unit:a.unit};s.mLocals={format:c,dateRange:i};s.extractBindingInfo=function(r,a){r=s.escapeCardPlaceholders(r);return e.complexParser(r,undefined,true,undefined,undefined,undefined,t({},s.mLocals,a))};s.createBindingInfos=function(e,t){if(!e){return e}if(Array.isArray(e)){return e.map(function(e){return s.createBindingInfos(e,t)})}if(typeof e==="object"){var r={};for(var a in e){r[a]=s.createBindingInfos(e[a],t)}return r}var n=s.extractBindingInfo(e,t);return s.escapeParametersAndDataSources(n||e)};s.formattedProperty=function(e,r){if(e===undefined){return e}var a={};if(Array.isArray(e)){a.parts=e.map(function(e){return typeof e==="object"?t({},e):{value:e}});a.formatter=r}else if(typeof e==="object"){a=t({},e);if(e.formatter){var n=a.formatter;a.formatter=function(){var e=n.apply(this,arguments);return r(e)}}else{a.formatter=r}}else{a={value:e,formatter:r}}return a};s.escapeCardPlaceholders=function(e){if(typeof e!=="string"){return e}return e.replace(o,"\\{\\{$1\\}\\}")};s.escapeParametersAndDataSources=function(e){if(typeof e!=="string"){return e}return e.replace(u,"\\{\\{$1\\}\\}").replace(f,"\\{\\{$1\\}\\}")};s.isAbsolutePath=function(e){return e.startsWith("/")};s.prependRelativePaths=function(e,r){if(typeof e!=="object"){return e}var a=t({},e);if(a.path&&!this.isAbsolutePath(a.path)){a.path=r+"/"+a.path}if(a.parts){a.parts=a.parts.map(function(e){return s.prependRelativePaths(e,r)})}return a};s.propagateModels=function(e,r){var a=t({},e.oPropagatedProperties.oModels,e.oModels),n=Object.keys(a),i=e.getModel();if(i){r.setModel(i)}n.forEach(function(t){if(t==="undefined"){return}var a=e.getModel(t);if(a){r.setModel(a,t)}})};s.reuse=function(e){if(typeof e==="object"){return t({},e)}return e};return s});