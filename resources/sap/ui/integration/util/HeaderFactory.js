/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","./BaseFactory","sap/ui/integration/cards/actions/CardActions","sap/ui/integration/library","sap/m/library","sap/ui/integration/cards/NumericHeader","sap/ui/integration/cards/Header","sap/base/strings/formatMessage","sap/m/Button"],function(t,a,r,e,s,i,n,o,c){"use strict";var u=e.CardActionArea;var p=s.ButtonType;var d=t.getLibraryResourceBundle("sap.ui.integration");function l(t,a){if(t.parts&&t.translationKey&&t.parts.length===2){var r={parts:[t.translationKey,t.parts[0].toString(),t.parts[1].toString()],formatter:function(a,r,e){var s=r||t.parts[0];var i=e||t.parts[1];if(Array.isArray(r)){s=r.length}if(Array.isArray(e)){i=e.length}var n=parseFloat(s)||0;var c=parseFloat(i)||0;return o(a,[n,c])}};a.bindProperty("statusText",r)}}var f=a.extend("sap.ui.integration.util.HeaderFactory");f.prototype.create=function(t,a){var e=this._oCard,s=e.getOpener(),o;t=this.createBindingInfos(t,e.getBindingNamespaces());if(s){a=this._createCloseButton()}switch(t.type){case"Numeric":o=new i(t,a);break;default:o=new n(t,a,e._oIconFormatter);break}o.setCard(e);if(t.status&&t.status.text&&t.status.text.format){if(t.status.text.format.translationKey){e._loadDefaultTranslations()}l(t.status.text.format,o)}o.setServiceManager(e._oServiceManager);o.setDataProviderFactory(e._oDataProviderFactory);o._setDataConfiguration(t.data);var c=new r({card:e});c.attach({area:u.Header,actions:t.actions,control:o});o._oActions=c;if(o._bIsEmpty){o.setVisible(a.getVisible())}if(s){o.setProperty("focusable",false)}return o};f.prototype._createCloseButton=function(){var t=new c({type:p.Transparent,tooltip:d.getText("CARD_DIALOG_CLOSE_BUTTON"),icon:"sap-icon://decline",press:function(){this._oCard.hide()}.bind(this)});t.addStyleClass("sapUiIntCardCloseButton");return t};return f});