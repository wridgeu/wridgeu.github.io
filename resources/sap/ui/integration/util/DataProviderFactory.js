/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/integration/util/ServiceDataProvider","sap/ui/integration/util/RequestDataProvider","sap/ui/integration/util/CacheAndRequestDataProvider","sap/ui/integration/util/DataProvider","sap/ui/integration/util/ExtensionDataProvider","sap/ui/integration/util/JSONBindingHelper","sap/ui/integration/util/BindingHelper"],function(e,t,i,s,n,r,o,a){"use strict";var u=e.extend("sap.ui.integration.util.DataProviderFactory",{constructor:function(t,i,s,n,r){e.call(this);this._oDestinations=t;this._oExtension=i;this._oCard=s;this._oEditor=n;this._oHost=r;this._aDataProviders=[];this._aFiltersProviders=[]}});u.prototype.destroy=function(){e.prototype.destroy.apply(this,arguments);if(this._aDataProviders){this._aDataProviders.forEach(function(e){if(!e.bIsDestroyed){e.destroy()}});this._aDataProviders=null;this._aFiltersProviders=null}this._oCard=null;this._oExtension=null;this._bIsDestroyed=true};u.prototype.isDestroyed=function(){return this._bIsDestroyed};u.prototype.create=function(e,u,d){var l=this._oCard,p=this._oEditor,h=this._oHost||l&&l.getHostInstance()||p&&p.getHostInstance(),c=h&&h.bUseExperimentalCaching,f,g;if(!e){return null}if(l){f={baseRuntimeUrl:l.getRuntimeUrl("/"),settingsJson:o.createJsonWithBindingInfos(e,l.getBindingNamespaces())}}else if(p){f={baseRuntimeUrl:p.getRuntimeUrl("/"),settingsJson:o.createJsonWithBindingInfos(e,p.getBindingNamespaces())}}else{f={settingsJson:o.createJsonWithBindingInfos(e,{})}}if(e.request&&c){g=new s(f);g.setCard(l);g.setHost(h)}else if(e.request){g=new i(f)}else if(e.service){g=new t(f)}else if(e.json){g=new n(f)}else if(e.extension){g=new r(f,this._oExtension)}else{return null}if(l){a.propagateModels(l,g)}else if(p){a.propagateModels(p,g)}g.bindObject("/");g.setDestinations(this._oDestinations);if(g.isA("sap.ui.integration.util.IServiceDataProvider")){g.createServiceInstances(u)}this._aDataProviders.push(g);if(d){this._aFiltersProviders.push(g)}else{g.setDependencies(this._aFiltersProviders)}return g};u.prototype.remove=function(e){var t=this._aDataProviders.indexOf(e);if(t>-1){this._aDataProviders.splice(t,1)}if(e&&!e.bDestroyed&&e._bIsDestroyed){e.destroy()}};return u});