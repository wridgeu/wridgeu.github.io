/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/util/BindingHelper","sap/ui/integration/util/BindingResolver","sap/ui/integration/util/Utils"],function(t,e,n){"use strict";var a={};a.resolveCard=function(t){t.startManifestProcessing();return a._awaitReadyEvent(t).then(a._handleCardReady)};a._awaitReadyEvent=function(t){if(t.isReady()){return Promise.resolve(t)}return new Promise(function(e,n){t.attachEvent("_ready",function(n){e(t)})})};a._handleCardReady=function(a){var r=a.getManifestEntry("/");var i=[];var o=a.getFundamentalErrors();if(o.length){return Promise.reject(o.join(" "))}if(a.getAggregation("_filterBar")){i=a.getAggregation("_filterBar")._getFilters().map(function(t){return["/sap.card/configuration/filters/"+t.getKey(),t]})}i.concat([["/sap.card/content",a.getCardContent()],["/sap.card/header",a.getCardHeader()],["/sap.card",a]]).filter(function(t){return!!a.getManifestEntry(t[0])}).forEach(function(i){var o=i[0];var g=i[1];var s;if(g.getStaticConfiguration){s=g.getStaticConfiguration()}else if(g._oCardOriginalContent&&g._oCardOriginalContent.getStaticConfiguration){s=g._oCardOriginalContent.getStaticConfiguration()}else{s=n.getNestedPropertyValue(r,o)}if(s.data){var d=s.data.path;delete s.data;s=t.createBindingInfos(s,a.getBindingNamespaces());s=e.resolveValue(s,g,d)}n.setNestedPropertyValue(r,o,s)});return JSON.stringify(r)};return a});