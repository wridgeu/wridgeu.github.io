/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/m/ColorPalettePopover","sap/m/Button","sap/ui/core/Core","sap/base/util/merge","sap/ui/core/theming/Parameters"],function(e,t,o,a,n,r){"use strict";var l=e.extend("sap.ui.integration.editor.fields.viz.ColorSelect",{metadata:{library:"sap.ui.integration",properties:{enumValue:{type:"string",defaultValue:""},colorValue:{type:"string",defaultValue:""},editable:{type:"boolean",defaultValue:true},colorEnum:{type:"string",defaultValue:"sap.m.AvatarColor"},background:{type:"boolean",defaultValue:true},allowCustomColors:{type:"boolean",defaultValue:false}},aggregations:{_colorpalette:{type:"sap.m.ColorPalettePopover",multiple:false,visibility:"hidden"},_button:{type:"sap.m.Button",multiple:false,visibility:"hidden"}}},renderer:function(e,t){var o=t.getAggregation("_button");e.openStart("div");e.addClass("sapUiIntegrationColorSelect");if(!t._colorValue||t._colorValue==="transparent"){e.addClass("noColorValueOrTransparentValue")}else{e.addClass("hasColorValue")}if(t._colorValue){e.addStyle("--colorValue",t._colorValue)}e.writeElementData(t);e.openEnd();e.renderControl(o);e.close("div")}});var i={};function c(){var e=["sapUiAccent1","sapUiAccent2","sapUiAccent3","sapUiAccent4","sapUiAccent5","sapUiAccent6","sapUiAccent7","sapUiAccent8","sapUiAccent9","sapUiAccent10","sapUiTileIconColor","sapUiContentImagePlaceholderBackground"];var t=r.get({name:e,callback:function(e){}});if(t){i={"sap.m.AvatarColor":{Accent1:t["sapUiAccent1"],Accent2:t["sapUiAccent2"],Accent3:t["sapUiAccent3"],Accent4:t["sapUiAccent4"],Accent5:t["sapUiAccent5"],Accent6:t["sapUiAccent6"],Accent7:t["sapUiAccent7"],Accent8:t["sapUiAccent8"],Accent9:t["sapUiAccent9"],Accent10:t["sapUiAccent10"],TileIcon:t["sapUiTileIconColor"],Transparent:"transparent",Placeholder:t["sapUiContentImagePlaceholderBackground"]}}}}c();a.attachThemeChanged(c);var s,u=new t("oColorPalettePopoverFull",{colorSelect:function(e){var t=e.getParameter("value"),o=i[s.getColorEnum()],a=Object.values(o).indexOf(t);s.setEnumValue(Object.keys(o)[a]);s.setColorValue(t);s._colorValue=t}});l.prototype.init=function(){this._oButton=new o({icon:"sap-icon://color-fill",press:function(){this._openPalette()}.bind(this)});this._colorValue="transparent";this.setAggregation("_button",this._oButton)};l.prototype._openPalette=function(){s=this;u.setShowDefaultColorButton(true);u.setShowMoreColorsButton(false);u.setDefaultColor("");var e=i[this.getColorEnum()];if(e){var t=[];for(var o in e){t.push(e[o])}u.setColors(t)}u.openBy(this._oButton)};l.prototype.setEnumValue=function(e){this.setProperty("enumValue",e,true);this._colorValue=i[this.getColorEnum()][e];this.rerender()};l.prototype.bindProperty=function(t,o){e.prototype.bindProperty.apply(this,arguments);if(t==="editable"){var a=n({},o);this._oButton.bindProperty("enabled",a)}return this};return l});