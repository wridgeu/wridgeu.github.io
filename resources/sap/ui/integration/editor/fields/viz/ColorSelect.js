/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/m/ColorPalettePopover","sap/m/Button","sap/ui/core/Core","sap/base/util/merge","sap/ui/core/theming/Parameters"],function(e,t,o,n,a,r){"use strict";var i=e.extend("sap.ui.integration.editor.fields.viz.ColorSelect",{metadata:{library:"sap.ui.integration",properties:{enumValue:{type:"string",defaultValue:""},colorValue:{type:"string",defaultValue:""},editable:{type:"boolean",defaultValue:true},colorEnum:{type:"string",defaultValue:"sap.m.AvatarColor"},background:{type:"boolean",defaultValue:true},allowCustomColors:{type:"boolean",defaultValue:false}},aggregations:{_colorpalette:{type:"sap.m.ColorPalettePopover",multiple:false,visibility:"hidden"},_button:{type:"sap.m.Button",multiple:false,visibility:"hidden"}}},renderer:function(e,t){var o=t.getAggregation("_button");e.openStart("div");e.addClass("sapUiIntegrationColorSelect");e.writeClasses();e.writeStyles();e.writeElementData(t);e.openEnd();e.renderControl(o);e.close("div")}});var s={};function l(){var e=["sapUiAccent1","sapUiAccent2","sapUiAccent3","sapUiAccent4","sapUiAccent5","sapUiAccent6","sapUiAccent7","sapUiAccent8","sapUiAccent9","sapUiAccent10","sapUiTileIconColor","sapUiContentImagePlaceholderBackground"];var t=r.get({name:e,callback:function(e){}});if(t){s={"sap.m.AvatarColor":{Accent1:t["sapUiAccent1"],Accent2:t["sapUiAccent2"],Accent3:t["sapUiAccent3"],Accent4:t["sapUiAccent4"],Accent5:t["sapUiAccent5"],Accent6:t["sapUiAccent6"],Accent7:t["sapUiAccent7"],Accent8:t["sapUiAccent8"],Accent9:t["sapUiAccent9"],Accent10:t["sapUiAccent10"],TileIcon:t["sapUiTileIconColor"],Transparent:"transparent",Placeholder:t["sapUiContentImagePlaceholderBackground"]}}}}l();n.attachThemeChanged(l);var c,p=new t("oColorPalettePopoverFull",{colorSelect:function(e){var t=e.getParameter("value"),o=s[c.getColorEnum()],n=Object.values(o).indexOf(t);c.setEnumValue(Object.keys(o)[n]);c.setColorValue(t);c._colorValue=t}});i.prototype.init=function(){this._oButton=new o({icon:"sap-icon://color-fill",press:function(){this._openPalette()}.bind(this)});this._colorValue="transparent";this.setAggregation("_button",this._oButton)};i.prototype.onBeforeRendering=function(){if(!this._oStyle){this._oStyle=document.createElement("style");this._oStyle.innerHTML="#"+this.getId()+" .sapUiIcon::before { color: "+this._colorValue+" !important}";document.body.appendChild(this._oStyle)}var e=this._oStyle.sheet.rules[0];if(!this._colorValue||this._colorValue==="transparent"){e.style.opacity="0.5";e.style.color="transparent";e.style.backgroundSize="10px 10px";e.style.backgroundPosition="0px 0px, 0px 10px, 10px -10px, -10px 10px";e.style.border="1px dashed #808080";e.style.padding="0px 0px";e.style.backgroundImage="linear-gradient(45deg, #ddd 25%, transparent 25%), linear-gradient(-45deg, #ddd 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ddd 75%), linear-gradient(-45deg, transparent 75%, #ddd 75%)"}else{e.style.textShadow="unset";e.style.opacity="unset";e.style.backgroundSize="unset";e.style.backgroundPosition="unset";e.style.border="unset";e.style.padding="unset";e.style.backgroundImage="unset";e.style.color=this._colorValue}};i.prototype._openPalette=function(){c=this;p.setShowDefaultColorButton(true);p.setShowMoreColorsButton(false);p.setDefaultColor("");var e=s[this.getColorEnum()];if(e){var t=[];for(var o in e){t.push(e[o])}p.setColors(t)}p.openBy(this._oButton)};i.prototype.setEnumValue=function(e){this.setProperty("enumValue",e,true);this._colorValue=s[this.getColorEnum()][e];this.rerender()};i.prototype.bindProperty=function(t,o){e.prototype.bindProperty.apply(this,arguments);if(t==="editable"){var n=a({},o);this._oButton.bindProperty("enabled",n)}return this};return i});