/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/thirdparty/adaptivecards","sap/ui/core/format/DateFormat"],function(t,i){"use strict";function e(){t.TimeInput.apply(this,arguments)}var a={None:"None",Error:"Error"};var s="HH:mm";e.prototype=Object.create(t.TimeInput.prototype);e.prototype.internalRender=function(){var t="ui5-timepicker";this._timeInputElement=document.createElement(t);this._timeInputElement.id=this.id;this._timeInputElement.value=this.defaultValue||"";this._timeInputElement.formatPattern=s;this._handleMinMaxProps();this._validateInput(this.value);this._timeInputElement.addEventListener("change",function(t){this._validateInput(t.target.value);this.valueChanged()}.bind(this));return this._timeInputElement};e.prototype._validateInputRange=function(t){var i,e,s;if(!this._isMinValid&&!this._isMaxValid){this._setValueState(a.None);return}i=t.split(":");e=i[0];s=i[1];if(this._isMinValid&&e<this._iMinHour||e===this._iMinHour&&s<this._iMinMinute){this._setValueState(a.Error);return}if(this._isMaxValid&&e>this._iMaxHour||e===this._iMaxHour&&s>this._iMaxMinute){this._setValueState(a.Error);return}this._setValueState(a.None)};e.prototype._validateInput=function(t){if(t===""){this._setValueState(a.None);return}this._isValidTime(t)?this._validateInputRange(t):this._setValueState(a.Error)};e.prototype._handleMinMaxProps=function(){this._isMinValid=this._min&&this._isValidTime(this._min);this._isMaxValid=this._max&&this._isValidTime(this._max);if(this._isMinValid){this._aMinValue=this._min.split(":");this._iMinHour=Number(this._aMinValue[0]);this._iMinMinute=Number(this._aMinValue[1])}if(this._isMaxValid){this._aMaxValue=this._max.split(":");this._iMaxHour=Number(this._aMaxValue[0]);this._iMaxMinute=Number(this._aMaxValue[1])}if(!this._isMinValid||!this._isMaxValid){return}if(this._iMinHour>this._iMaxHour||(this._iMinHour===this._iMaxHour&&this._iMinMinute>this._iMaxMinute||this._iMinMinute===this._iMaxMinute)){this._setValueState(a.Error)}else{this._setValueState(a.None)}};e.prototype._setValueState=function(t){this._timeInputElement.valueState=t};e.prototype._setValueStateMessage=function(t){this._timeInputElement.valueStateMessage=t};e.prototype._isValidTime=function(t){var e=i.getTimeInstance({pattern:s});return t&&e.parse(t)};return e});