/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/cards/BaseContent","sap/ui/integration/util/BindingResolver","sap/ui/integration/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/Log","sap/ui/model/Sorter"],function(t,e,i,r,n,a,s){"use strict";var o=t.extend("sap.ui.integration.cards.BaseListContent",{metadata:{library:"sap.ui.integration"},renderer:{apiVersion:2}});o.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oAwaitingPromise=null};o.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oAwaitingPromise=null};o.prototype.setConfiguration=function(e,i){t.prototype.setConfiguration.apply(this,arguments);e=this.getConfiguration();if(!e){return this}var r=this.getInnerList(),n=this.getCard()?this.getCardInstance().hasPaginator():false,a=e.maxItems;if(!Number.isNaN(parseInt(a))){a=parseInt(a)}if(r&&a&&!n){r.applySettings({growing:true,growingThreshold:a});r.addStyleClass("sapFCardMaxItems")}return this};o.prototype.getInnerList=function(){return null};o.prototype._checkHiddenNavigationItems=function(t){if(!t.actions){return}if(!this.getInnerList()){return}var i=this.getInnerList(),r=this.isA("sap.ui.integration.cards.TimelineContent")?i.getContent():i.getItems(),n=[],s=t.actions[0],o,g=0;if(!s||!s.service||s.type!=="Navigation"){return}if(s.service==="object"){o=s.service.name}else{o=s.service}r.forEach(function(t){var i=e.resolveValue(s.parameters,this,t.getBindingContext().getPath());n.push(this._oServiceManager.getService(o).then(function(t){if(!t.hidden){return false}return t.hidden({parameters:i})}).then(function(e){t.setVisible(!e);if(!e){g++}}).catch(function(t){a.error(t)}))}.bind(this));this.awaitEvent("_filterNavItemsReady");var p=this._oAwaitingPromise=Promise.all(n).then(function(){if(this._oAwaitingPromise===p){if(this.getModel("parameters")){this.getModel("parameters").setProperty("/visibleItems",g)}this.fireEvent("_filterNavItemsReady")}}.bind(this))};o.prototype._handleNoItemsError=function(t){if(!this.getInnerList()){return}var e=this.getInnerList(),i=e.getBinding(e.getMetadata().getDefaultAggregationName()),r=i.getModel(),n=i.getPath(),a=r.getProperty(n);if(a&&a.length===0){this.getParent()._handleError("No items available",true)}};o.prototype._getGroupSorter=function(t){var i=false;if(t.order.dir&&t.order.dir==="DESC"){i=true}var r=new s(t.order.path,i,function(i){return e.resolveValue(t.title,i.getModel(),i.getPath())});return r};o.prototype.sliceData=function(t,e){this.getModel().sliceData(t,e)};o.prototype.getDataLength=function(){var t=this.getModel().getProperty(this.getInnerList().getBindingContext().getPath());if(Array.isArray(t)){return t.length}return Object.getOwnPropertyNames(t).length};return o});