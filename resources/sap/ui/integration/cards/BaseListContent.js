/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/cards/BaseContent","sap/ui/integration/util/BindingResolver","sap/ui/integration/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/Log"],function(t,e,i,n,r,a){"use strict";var s=t.extend("sap.ui.integration.cards.BaseListContent",{metadata:{library:"sap.ui.integration"},renderer:{apiVersion:2}});s.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oAwaitingPromise=null};s.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oAwaitingPromise=null};s.prototype.setConfiguration=function(e,i){t.prototype.setConfiguration.apply(this,arguments);if(!e){return this}var n=this.getInnerList(),r=e.maxItems;if(n&&r){n.setGrowing(true);n.setGrowingThreshold(parseInt(r));n.addStyleClass("sapFCardMaxItems")}return this};s.prototype.getInnerList=function(){return null};s.prototype._filterHiddenNavigationItems=function(t,e){if(!t.actions){return}var i=t.actions[0];if(!(i&&i.service&&i.type==="Navigation")){return}var a=new n("_card_item_hidden",r.EQ,false);this.awaitEvent("_filterNavItemsReady");e.filters=[a]};s.prototype._checkHiddenNavigationItems=function(t){if(!t.actions){return}if(!this.getInnerList()){return}var i=this.getInnerList().getBinding("items"),n=i.getModel(),r=i.getPath(),s=n.getProperty(r),o=[],p=t.actions[0],u=r.trim().replace(/\/$/,""),d;if(!(p&&p.service&&p.type==="Navigation")){return}if(p.service==="object"){d=p.service.name}else{d=p.service}s.forEach(function(t,i){var r=e.resolveValue(p.parameters,this,u+"/"+i);if(t._card_item_hidden===undefined){t._card_item_hidden=false}o.push(this._oServiceManager.getService(d).then(function(t){if(!t.hidden){return false}return t.hidden({parameters:r})}).then(function(e){t._card_item_hidden=!!e;n.checkUpdate(true)}).catch(function(t){a.error(t)}))}.bind(this));n.checkUpdate(true);this._awaitPromises(o)};s.prototype._awaitPromises=function(t){var e=this._oAwaitingPromise=Promise.all(t);e.then(function(){if(this._oAwaitingPromise===e){this.fireEvent("_filterNavItemsReady")}}.bind(this))};return s});