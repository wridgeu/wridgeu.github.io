/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/cards/BaseContent","sap/ui/integration/util/BindingResolver","sap/ui/integration/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/Log","sap/ui/model/Sorter"],function(t,e,i,r,n,a,o){"use strict";var s=t.extend("sap.ui.integration.cards.BaseListContent",{metadata:{library:"sap.ui.integration"},renderer:{apiVersion:2}});s.prototype.init=function(){t.prototype.init.apply(this,arguments);this._oAwaitingPromise=null};s.prototype.exit=function(){t.prototype.exit.apply(this,arguments);this._oAwaitingPromise=null};s.prototype.setConfiguration=function(e,i){t.prototype.setConfiguration.apply(this,arguments);if(!e){return this}var r=this.getInnerList(),n=e.maxItems;if(r&&n){r.setGrowing(true);r.setGrowingThreshold(parseInt(n));r.addStyleClass("sapFCardMaxItems")}return this};s.prototype.getInnerList=function(){return null};s.prototype._filterHiddenNavigationItems=function(t,e){if(!t.actions){return}var i=t.actions[0];if(!(i&&i.service&&i.type==="Navigation")){return}var a=new r("_card_item_hidden",n.EQ,false);this.awaitEvent("_filterNavItemsReady");e.filters=[a]};s.prototype._checkHiddenNavigationItems=function(t){if(!t.actions){return}if(!this.getInnerList()){return}var i=this.getInnerList().getBinding("items"),r=i.getModel(),n=i.getPath(),o=r.getProperty(n),s=[],p=t.actions[0],u=n.trim().replace(/\/$/,""),d;if(!(p&&p.service&&p.type==="Navigation")){return}if(p.service==="object"){d=p.service.name}else{d=p.service}o.forEach(function(t,i){var n=e.resolveValue(p.parameters,this,u+"/"+i);if(t._card_item_hidden===undefined){t._card_item_hidden=false}s.push(this._oServiceManager.getService(d).then(function(t){if(!t.hidden){return false}return t.hidden({parameters:n})}).then(function(e){t._card_item_hidden=!!e;r.checkUpdate(true)}).catch(function(t){a.error(t)}))}.bind(this));r.checkUpdate(true);this._awaitPromises(s)};s.prototype._awaitPromises=function(t){var e=this._oAwaitingPromise=Promise.all(t);e.then(function(){if(this._oAwaitingPromise===e){this.fireEvent("_filterNavItemsReady")}}.bind(this))};s.prototype._getGroupSorter=function(t){var i=false;if(t.order.dir&&t.order.dir==="DESC"){i=true}var r=new o(t.order.path,i,function(i){return e.resolveValue(t.title,i.getModel(),i.getPath())});return r};return s});