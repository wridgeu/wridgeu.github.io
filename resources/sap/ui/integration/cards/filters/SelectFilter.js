/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseFilter","sap/m/Select","sap/ui/core/ListItem","sap/ui/model/json/JSONModel","sap/ui/integration/util/BindingResolver"],function(e,t,i,a,r){"use strict";var s=e.extend("sap.ui.integration.cards.filters.SelectFilter",{metadata:{library:"sap.ui.integration",aggregations:{_select:{type:"sap.m.Select",multiple:false,visibility:"hidden"}}},renderer:{apiVersion:2}});s.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this._oItemTemplate){this._oItemTemplate.destroy()}};s.prototype.getField=function(){return this._getSelect()};s.prototype.onDataChanged=function(){var e=this._getSelect();e.setSelectedKey(this.getValue().value)};s.prototype.getValueForModel=function(){var e=this._getSelect().getSelectedItem();if(e){return{value:e.getKey(),selectedItem:{title:e.getText(),key:e.getKey()}}}return{value:this.getConfig().value}};s.prototype.getStaticConfiguration=function(){var e=this.getConfig();var t="/";var i=this.getModel().getProperty(t);var a=[];if(e.item&&e.item.path){t=e.item.path}for(var s=0;s<i.length;s++){if(t==="/"){a.push(r.resolveValue(e.item,this,t+s))}else{a.push(r.resolveValue(e.item,this,t+"/"+s))}}var l=Object.assign({},e);delete l.item;l.items=a;return l};s.prototype._getSelect=function(){var e=this.getAggregation("_select");if(!e){e=this._createSelect();this.setAggregation("_select",e)}return e};s.prototype._createSelect=function(){var e=new t,r,s,l="/",n=this.getConfig(),o=this.createLabel(n);e.attachChange(function(e){this._setValue()}.bind(this));if(n&&n.item){l=n.item.path||l}if(n&&n.item&&n.item.template){r=n.item.template.key;s=n.item.template.title}if(n&&n.items){r="{key}";s="{title}";this.setModel(new a(n.items))}this._oItemTemplate=new i({key:r,text:s});e.bindItems({path:l,template:this._oItemTemplate});e.setSelectedKey(n.value);if(o){e.addAriaLabelledBy(o)}return e};return s});