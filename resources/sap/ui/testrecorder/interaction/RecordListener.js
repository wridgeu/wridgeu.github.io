/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/testrecorder/interaction/ContextMenu","sap/ui/testrecorder/interaction/CommandExecutor","sap/ui/testrecorder/interaction/Commands","sap/ui/testrecorder/CommunicationBus","sap/ui/testrecorder/CommunicationChannels"],function(t,e,n,i,o,r){"use strict";var s=null;var u=t.extend("sap.ui.testrecorder.interaction.RecordListener",{constructor:function(){if(!s){t.apply(this,arguments);this._fnClickListener=this._onClick.bind(this);this._fnContextmenuListener=this._onContextmenu.bind(this)}else{return s}}});u.prototype.init=function(){document.addEventListener("click",this._fnClickListener);document.addEventListener("contextmenu",this._fnContextmenuListener);o.subscribe(r.CONTEXT_MENU_HIGHLIGHT,this._onContextHighlight.bind(this));o.subscribe(r.CONTEXT_MENU_PRESS,this._onContextPress.bind(this));o.subscribe(r.CONTEXT_MENU_ENTER_TEXT,this._onContextEnterText.bind(this));o.subscribe(r.ASSERT_PROPERTY,this._onAssertProperty.bind(this))};u.prototype.stop=function(){e.hide();document.removeEventListener("click",this._fnClickListener);document.removeEventListener("contextmenu",this._fnContextmenuListener)};u.prototype._onClick=function(t){t.preventDefault();t.stopPropagation();e.hide()};u.prototype._onContextmenu=function(t){t.preventDefault();var n=c(t.target);e.show({domElementId:n,location:{x:t.pageX,y:t.pageY}})};u.prototype._onContextHighlight=function(t){n.execute(i.HIGHLIGHT,t)};u.prototype._onContextPress=function(t){n.execute(i.PRESS,t)};u.prototype._onAssertProperty=function(t){n.execute(i.ASSERT,t)};u.prototype._onContextEnterText=function(t){n.execute(i.ENTER_TEXT,t)};function c(t){if(t.id){return t.id}else if(t.parentElement){return c(t.parentElement)}else{return""}}s=new u;return s},true);