/*!
* OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["sap/base/Log","sap/ui/base/ManagedObject","sap/ui/testrecorder/CommunicationBus"],function(t,e,r){"use strict";var i=null;var n=null;var o=null;var s=null;var a=e.extend("sap.ui.testrecorder.Recorder",{constructor:function(){if(!s){e.apply(this,arguments)}else{t.warning("Only one Recorder allowed");return s}}});a.prototype.start=function(t){if(this._hasStarted){return}this._hasStarted=true;this._testRecorderConfig=t||sap.ui.getCore().getConfiguration().getTestRecorderMode();if(this._testRecorderConfig&&!this._testRecorderConfig.indexOf("silent")>-1&&!this._isInIframe()){sap.ui.require(["sap/ui/testrecorder/UIContextInjector","sap/ui/testrecorder/inspector/ControlInspector","sap/ui/testrecorder/interaction/RecordListener"],function(t,e,s){i=t;n=e;o=s;i.injectFrame(this._testRecorderConfig,this._stop.bind(this));r.allowFrame(i.getCommunicationInfo());n.init();o.init()}.bind(this))}};a.prototype._stop=function(){this._hasStarted=false;n.stop();o.stop()};a.prototype._isInIframe=function(){try{if(window.self!==window.top){var t="#sap-ui-test-recorder-frame";if(window.top.$&&window.top.$(t).length&&window.top.$(t)[0].contentWindow===window.self){return true}else{return false}}}catch(t){return true}};s=new a;return s},true);