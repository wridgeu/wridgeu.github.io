/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/registry/Settings","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/write/_internal/fieldExtensibility/ABAPExtensibilityVariantFactory","sap/ui/fl/write/_internal/fieldExtensibility/ServiceValidation"],function(e,n,t,i){"use strict";var r=null;var u=null;function o(){if(!u){return t.getInstance(r).then(function(e){u=e;return e})}return Promise.resolve(u)}var a={};a.getTexts=function(){return o(r).then(function(e){return e.getTexts().then(function(e){return e})})};a.isExtensibilityEnabled=function(t){var i=n.getFlexReferenceForControl(t);if(!i){return Promise.resolve(false)}return e.getInstance(i).then(function(e){return e.isModelS()})};a.getExtensionData=function(){return o(r).then(function(e){return e.getExtensionData().then(function(e){return e})})};a.onControlSelected=function(e){if(e!==r){r=e;u=null}};a.onTriggerCreateExtensionData=function(){return o().then(function(e){return e.getNavigationUri().then(function(e){if(e){a.openNewWindow(e)}})})};a.openNewWindow=function(e){window.open(e,"_blank","noopener noreferrer")};a.isServiceOutdated=function(e){return i.isServiceOutdated(e)};a.setServiceValid=function(e){i.setServiceValid(e)};a.setServiceInvalid=function(e){i.setServiceInvalid(e)};return a},true);