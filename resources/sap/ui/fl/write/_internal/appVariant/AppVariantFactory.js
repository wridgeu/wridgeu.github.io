/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/write/_internal/appVariant/AppVariant","sap/ui/thirdparty/jquery","sap/ui/fl/Layer","sap/ui/fl/descriptorRelated/internal/Utils","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/base/util/merge"],function(e,r,n,t,a,i){"use strict";function s(e){if(!e.url){e.url="/sap/bc/lrep"}return a.appVariant.load(e)}var p={};p.load=function(n){if(n.id===undefined||typeof n.id!=="string"){throw new Error("Parameter "+n.id+" must be provided of type string")}return s({reference:n.id}).then(function(t){var a=t.response;if(!r.isPlainObject(a)){a=JSON.parse(a)}n=i({},n,a);return new e(n)})};p.prepareCreate=function(r){try{t.checkParameterAndType(r,"reference","string");t.checkParameterAndType(r,"id","string");if(r.version){t.checkParameterAndType(r,"version","string")}if(!r.layer){r.layer=n.CUSTOMER}else{t.checkParameterAndType(r,"layer","string")}if(r.skipIam){t.checkParameterAndType(r,"skipIam","boolean")}if(r.transport){t.checkTransportRequest(r.transport)}if(r.package){t.checkPackage(r.package)}}catch(e){return Promise.reject(e)}r.content=[];var a=new e(r);a.setMode("NEW");return Promise.resolve(a)};p.prepareUpdate=function(e){return p.load(e).then(function(e){e.setMode("EXISTING");return e})};p.prepareDelete=function(r){return(r.isForSmartBusiness?Promise.resolve(new e(r)):p.load(r)).then(function(e){e.setMode("DELETION");return e})};return p});