/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/write/_internal/appVariant/AppVariant","sap/ui/thirdparty/jquery","sap/ui/fl/descriptorRelated/internal/Utils","sap/ui/fl/write/_internal/connectors/LrepConnector","sap/base/util/merge"],function(e,r,n,t,a){"use strict";function i(e){if(!e.url){e.url="/sap/bc/lrep"}return t.appVariant.load(e)}var s={};s.load=function(n){if(n.id===undefined||typeof n.id!=="string"){throw new Error("Parameter "+n.id+" must be provided of type string")}return i({reference:n.id}).then(function(t){var i=t.response;if(!r.isPlainObject(i)){i=JSON.parse(i)}n=a({},n,i);return new e(n)})};s.prepareCreate=function(r){try{n.checkParameterAndType(r,"reference","string");n.checkParameterAndType(r,"id","string");if(r.version){n.checkParameterAndType(r,"version","string")}if(!r.layer){r.layer="CUSTOMER"}else{n.checkParameterAndType(r,"layer","string")}if(r.skipIam){n.checkParameterAndType(r,"skipIam","boolean")}if(r.transport){n.checkTransportRequest(r.transport)}if(r.package){n.checkPackage(r.package)}}catch(e){return Promise.reject(e)}r.content=[];var t=new e(r);t.setMode("NEW");return Promise.resolve(t)};s.prepareUpdate=function(e){return s.load(e).then(function(e){e.setMode("EXISTING");return e})};s.prepareDelete=function(r){return(r.isForSmartBusiness?Promise.resolve(new e(r)):s.load(r)).then(function(e){e.setMode("DELETION");return e})};return s});