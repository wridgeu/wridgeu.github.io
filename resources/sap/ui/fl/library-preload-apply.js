//@ui5-bundle sap/ui/fl/library-preload-apply.js
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/ChangesController",["sap/ui/fl/FlexControllerFactory","sap/ui/fl/Utils"],function(e,t){"use strict";var r={getFlexControllerInstance:function(t){if(typeof t==="string"){return e.create(t)}var r=t.appComponent||t;return e.createForControl(r)},getDescriptorFlexControllerInstance:function(r){if(typeof r.appId==="string"){return e.create(r.appId)}var n=r.appComponent||r;var o=t.getAppDescriptorComponentObjectForControl(n);return e.create(o.name)},getAppComponentForSelector:function(e){if(typeof e.appId==="string"){return e}return e.appComponent||t.getAppComponentForControl(e)}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ApplyUtil",["sap/ui/thirdparty/URI"],function(r){"use strict";var e={formatBundleName:function(e,t){if(t.startsWith("/")){throw Error("Absolute paths are not supported")}var a=new r(e+"/"+t).normalize().path();return a.replace(/\//g,".").replace("..",".").replace(/.properties$/g,"")}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/Registration",["sap/ui/fl/requireAsync"],function(e){"use strict";var a={appdescr_ui5_addLibraries:e.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddLibrary"),appdescr_app_setTitle:e.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/app/SetTitle"),appdescr_ovp_changeCard:e.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ovp/ChangeCard"),appdescr_ovp_addNewCard:e.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ovp/AddNewCard"),appdescr_ovp_removeCard:e.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ovp/DeleteCard"),appdescr_ui_generic_app_addNewObjectPage:e.bind(this,"sap/suite/ui/generic/template/manifestMerger/AddNewObjectPage"),appdescr_ui_generic_app_changePageConfiguration:e.bind(this,"sap/suite/ui/generic/template/manifestMerger/ChangePageConfiguration"),appdescr_fe_changePageConfiguration:e.bind(this,"sap/fe/core/manifestMerger/ChangePageConfiguration")};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/RegistrationBuild",["sap/ui/fl/requireAsync","sap/ui/fl/apply/_internal/changes/descriptor/Registration"],function(i,a){"use strict";var e={appdescr_app_changeDataSource:i.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeDataSource"),appdescr_ui5_addNewModelEnhanceWith:i.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModelEnhanceWith"),appdescr_ui5_addComponentUsages:i.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddComponentUsages"),appdescr_ui5_setMinUI5Version:i.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetMinUI5Version"),appdescr_fiori_setRegistrationIds:i.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetRegistrationIds"),appdescr_ui5_setFlexExtensionPointEnabled:i.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetFlexExtensionPointEnabled"),appdescr_ui5_addNewModel:i.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModel"),appdescr_app_addAnnotationsToOData:i.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/app/AddAnnotationsToOData"),appdescr_app_changeInbound:i.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeInbound"),appdescr_fiori_setAbstract:i.bind(this,"sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetAbstract")};var n=Object.assign({},a);return Object.assign(n,e)});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/app/AddAnnotationsToOData",["sap/ui/fl/util/DescriptorChangeCheck"],function(t){"use strict";var n=["BEGINNING","END"];function e(t,n){return Object.keys(t).indexOf(n)>=0}function a(t,n){return!t[n].type||t[n].type==="OData"}function o(t,n,e){return t[e]&&t[e].type==="ODataAnnotation"||n[e]}function r(t,n){return t[n].type&&t[n].type==="ODataAnnotation"}function i(t,n){return t.indexOf(n)>=0}function s(t,n){if(n){if(Object.keys(t).length>0){if(!e(t,n)){throw new Error("There is no dataSource '"+n+"' existing in the manifest. You can only add annotations to already existing dataSources in the manifest")}if(!a(t,n)){throw new Error("The dataSource '"+n+"' is existing in the manifest but is not type of 'OData'. The type of the dataSource in the manifest is '"+t[n].type+"'")}}else{throw new Error("There are no dataSources in the manifest at all")}}else{throw new Error("Invalid change format: The mandatory 'dataSourceId' is not defined. Please define the mandatory property 'dataSourceId' and refer it to an existing OData")}}function f(t){if(t){if(t.length===0){throw new Error("Invalid change format: The 'annotations' array property is empty")}}else{throw new Error("Invalid change format: The mandatory 'annotations' array property is not defined. Please define the 'annotations' array property")}}function c(t){if(!(n.indexOf(t)>=0)&&!(t===undefined)){throw new Error("The defined insert position '"+t+"' is not supported. The supported insert positions are: "+n.join("|"))}}function d(n,e,a){if(n){if(Object.keys(n).length===0){throw new Error("The 'dataSource' object is empty")}Object.keys(n).forEach(function(o){t.checkIdNamespaceCompliance(o,a);if(!r(n,o)){throw new Error("The dataSource annotation '"+o+"' is type of '"+n[o].type+"'. Only dataSource annotations of type 'ODataAnnotation' is supported")}if(!i(e,o)){throw new Error("The annotation '"+o+"' is not part of 'annotations' array property. Please add the annotation '"+o+"' in the 'annotations' array property")}})}else{throw new Error("Invalid change format: The mandatory 'dataSource' object is not defined. Please define the mandatory 'dataSource' object")}}function p(t,n,e,a,o){u(t[n],e,a);h(t,o)}function u(t,n,e){if(!t["settings"]){t["settings"]={}}if(!t["settings"].annotations){t["settings"].annotations=[]}var a=t["settings"].annotations.filter(function(t){return n.indexOf(t)<0});t["settings"].annotations=a;if(e==="END"){t["settings"].annotations=t["settings"].annotations.concat(n)}else{t["settings"].annotations=n.concat(t["settings"].annotations)}}function h(t,n){Object.assign(t,n)}function y(t,n,e){e.forEach(function(e){if(!o(t,n,e)){throw new Error("The annotation '"+e+"' is part of 'annotations' array property but does not exists in the change property 'dataSource' and in the manifest (or it is not type of 'ODataAnnotation' in the manifest)")}})}var g={applyChange:function(t,n){var e=n.getContent().dataSourceId;var a=n.getContent().annotations;var o=n.getContent().annotationsInsertPosition;var r=n.getContent().dataSource;s(t["sap.app"].dataSources,e);f(a);c(o);d(r,a,n);y(t["sap.app"]["dataSources"],r,a);p(t["sap.app"]["dataSources"],e,a,o,r);return t}};return g});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeDataSource",["sap/ui/fl/util/changePropertyValueByPath","sap/ui/fl/util/DescriptorChangeCheck"],function(a,e){"use strict";var t=["UPDATE","UPSERT"];var r=["uri","settings/maxAge"];var n={applyChange:function(n,o){var i=n["sap.app"].dataSources;var p=o.getContent();e.checkEntityPropertyChange(p,r,t);if(i){var u=i[p.dataSourceId];if(u){a(p.entityPropertyChange,u)}else{throw new Error('Nothing to update. DataSource with ID "'+p.dataSourceId+'" does not exist.')}}else{throw Error("No sap.app/dataSource found in manifest.json")}return n}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/app/ChangeInbound",["sap/ui/fl/util/changePropertyValueByPath","sap/ui/fl/util/DescriptorChangeCheck"],function(n,e){"use strict";var t=["UPDATE","UPSERT"];var a=["title","subTitle","icon"];var i={applyChange:function(i,o){var r=i["sap.app"].crossNavigation;var s=o.getContent();e.checkEntityPropertyChange(s,a,t);if(r&&r.inbounds){var p=r.inbounds[s.inboundId];if(p){n(s.entityPropertyChange,p)}else{throw new Error('Nothing to update. Inbound with ID "'+s.inboundId+'" does not exist.')}}else{throw new Error("sap.app/crossNavigation or sap.app/crossNavigation/inbounds sections have not been found in manifest.json")}return i}};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/app/SetTitle",[],function(){"use strict";var p={applyChange:function(p){p["sap.app"].title="{{"+p["sap.app"].id+"_sap.app.title}}";return p}};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetAbstract",["sap/base/util/ObjectPath"],function(t){"use strict";var e={applyChange:function(e,r){if(!r.getContent().hasOwnProperty("abstract")){throw new Error("No abstract in change content provided")}if(r.getContent().abstract!==false){throw new Error("The current change value of property abstract is '"+r.getContent().abstract+"'. Only allowed value for property abstract is boolean 'false'")}t.set(["sap.fiori","abstract"],r.getContent().abstract,e);return e}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/fiori/SetRegistrationIds",["sap/base/util/ObjectPath"],function(t){"use strict";var e={applyChange:function(e,i){t.set(["sap.fiori","registrationIds"],i.getContent().registrationIds,e);return e}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ovp/AddNewCard",[],function(){"use strict";var r={applyChange:function(r,e){var a=e.getContent();var n=r["sap.ovp"].cards;if("card"in a&&Object.keys(a.card).length>0&&!(Object.keys(a.card)in n)){Object.assign(n,a.card)}else{throw Error("No new card found")}return r}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ovp/ChangeCard",["sap/base/util/ObjectPath"],function(r){"use strict";var e={applyChange:function(e,t){var a=t.getContent();var n=a.entityPropertyChange.operation==="UPSERT";var o=e["sap.ovp"].cards;var p=a.entityPropertyChange;if(Array.isArray(p)){throw Error("Expected value for oPropertyChange was an object")}if(!n){throw Error("This Operation is not supported")}if(a.cardId in o&&"propertyPath"in p){r.set([a.cardId,p.propertyPath],p.propertyValue,o)}else{throw Error("Change card settings was not found")}return e}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ovp/DeleteCard",[],function(){"use strict";var e={applyChange:function(e,r){var a=r.getContent();var t=e["sap.ovp"].cards;if(a.cardId in t){delete t[a.cardId]}else{throw Error("The card to be deleted was not found")}return e}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddComponentUsages",[],function(){"use strict";var e={applyChange:function(e,n){var s=n.getContent().componentUsages;if(!e["sap.ui5"]["componentUsages"]){e["sap.ui5"]["componentUsages"]={}}var a=e["sap.ui5"].componentUsages;Object.keys(s).forEach(function(e){if(a[e]){throw new Error("Component usage '"+e+"' already exists")}else{a[e]=s[e]}});return e}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddLibrary",["sap/base/util/Version"],function(e){"use strict";function i(i,n){var r={};if(n.minVersion){var s=new e(i.minVersion);r.minVersion=s.compareTo(n.minVersion)>=0?i.minVersion:n.minVersion}if(n.lazy){r.lazy=i.lazy===n.lazy===true}return r}var n={applyChange:function(e,n){if(!e["sap.ui5"]["dependencies"]["libs"]){e["sap.ui5"]["dependencies"]["libs"]={}}var r=e["sap.ui5"]["dependencies"]["libs"];var s=n.getContent().libraries;Object.keys(s).forEach(function(e){if(r[e]){r[e]=i(r[e],s[e])}else{r[e]=s[e]}});return e}};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModel",[],function(){"use strict";var e=["OData","INA","XML","JSON","FHIR","http","WebSocket"];var t=e.concat(["ODataAnnotation"]);function n(e,t,n){return!e[t].type||n.indexOf(e[t]["type"])>=0}function r(e,t){return h(e).some(function(e){return(!e.type||e["type"]==="OData")&&e["settings"]["annotations"].indexOf(t)>=0})}function o(t,n,r){return a(n,r,e)||i(t,r)}function a(e,t,r){return u(e,t)&&n(e,t,r)}function i(e,t){if(u(e,t)){if(e[t].type&&e[t]["type"]==="ODataAnnotation"){throw new Error("The already existing dataSource '"+t+"' in the manifest is type of 'ODataAnnotation'. A model must not reference to a dataSource which is of type 'ODataAnnotation'")}return true}return false}function u(e,t){return e&&Object.keys(e).indexOf(t)>=0}function c(e,t,n){if(t){Object.keys(t).forEach(function(r){if(e[r]){throw new Error("The "+n+" '"+r+"' already exists")}e[r]=t[r]})}}function d(e,t,n,r,o){if(!e[n][r]){e[n][r]={}}c(e[n][r],t.getContent()[o],o);return e[n][r]}function f(e,t,n){if(e[n].type==="ODataAnnotation"){return true}return h(t).some(function(e){return e.dataSource&&e["dataSource"]===n})}function s(e,t){return e[t].type||e[t].dataSource}function h(e){return Object.keys(e).map(function(t){return e[t]})}var p={applyChange:function(a,i){var u=i.getContent().model;var c=i.getContent().dataSource;if(u){if(Object.keys(u).length!==1){throw new Error("There are currently '"+Object.keys(u).length+"' models in the change. Currently it is only allowed to add '1' model")}Object.keys(u).forEach(function(t){if(!s(u,t)){throw new Error("There is no 'dataSource' or 'type' in the change model defined. Please define either 'type' or 'dataSource' in property '"+t+"'")}if(u[t].dataSource){if(!o(a["sap.app"]["dataSources"],c,u[t]["dataSource"])){throw new Error("The defined dataSource '"+u[t]["dataSource"]+"' in the model does not exists as dataSource or must be allowed type of "+e.join("|"))}}})}else{throw new Error("No model defined")}if(c){Object.keys(c).forEach(function(e){if(!n(c,e,t)){throw new Error("The dataSource '"+e+"' has the type '"+c[e]["type"]+"', but only dataSources with the follwing types are supported: "+t.join("|"))}if(!f(c,u,e)){throw new Error("The dataSource in the change '"+e+"' is not used by any model in the change. A dataSource in the change must be used by model in the change")}if(c[e]["type"]==="ODataAnnotation"){if(!r(c,e)){throw new Error("There is no dataSource with type 'OData' defined which includes the annotation '"+e+"'")}}})}d(a,i,"sap.ui5","models","model");d(a,i,"sap.app","dataSources","dataSource");return a}};return p});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ui5/AddNewModelEnhanceWith",["sap/ui/fl/apply/_internal/changes/descriptor/ApplyUtil","sap/base/util/ObjectPath"],function(e,t){"use strict";var n={applyChange:function(n,s){var i=s.getContent().modelId;var a=e.formatBundleName(n["sap.app"].id,s.getTexts().i18n);var p=n["sap.ui5"].models[i];if(p){if(p.type&&p.type==="sap.ui.model.resource.ResourceModel"){if(!(p.settings&&p.settings.enhanceWith)){t.set("settings.enhanceWith",[],p)}var r=p.settings.enhanceWith;r.push({bundleName:a})}}return n},skipPostprocessing:true};return n});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetFlexExtensionPointEnabled",["sap/base/util/ObjectPath"],function(n){"use strict";var e={applyChange:function(e,t){if(!t.getContent().flexExtensionPointEnabled){throw new Error("No flexExtensionPointEnabled in change content provided")}n.set(["sap.ui5","flexExtensionPointEnabled"],t.getContent().flexExtensionPointEnabled,e);return e}};return e});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/changes/descriptor/ui5/SetMinUI5Version",["sap/base/util/Version"],function(e){"use strict";var n={applyChange:function(n,i){var r=new e(n["sap.ui5"].dependencies.minUI5Version);if(r.compareTo(i.getContent().minUI5Version)<=0){n["sap.ui5"].dependencies.minUI5Version=i.getContent().minUI5Version}return n}};return n});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/connectors/ObjectStorageConnector",["sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils","sap/ui/fl/initial/_internal/StorageUtils"],function(e,n){"use strict";function t(n){var t=[];return e.forEachObjectInStorage(n,function(e){t.push(e.changeDefinition)}).then(function(){return t})}var r={oStorage:undefined,layers:["ALL"],loadFlexData:function(e){return t({storage:this.oStorage,reference:e.reference}).then(function(e){var t=n.getGroupedFlexObjects(e);return n.filterAndSortResponses(t)})}};r.storage=r.oStorage;return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/connectors/ObjectStorageUtils",[],function(){"use strict";var e="sap.ui.fl";return{forEachObjectInStorage:function(r,t){var n=r.storage.getItems&&r.storage.getItems()||r.storage;return Promise.resolve(n).then(function(n){var a=Object.keys(n).map(function(a){var c=a.includes(e);if(!c){return}var i=n[a];var o=r.storage._itemsStoredAsObjects?i:JSON.parse(i);var u=true;if(r.reference){u=o.reference===r.reference||o.reference+".Component"===r.reference}var f=true;if(r.layer){f=o.layer===r.layer}if(!u||!f){return}return t({changeDefinition:o,key:a})});return Promise.all(a)})},getAllFlexObjects:function(e){var r=[];return this.forEachObjectInStorage(e,function(e){r.push(e)}).then(function(){return r})},createFlexKey:function(r){if(r){return e+"."+r}},createFlexObjectKey:function(e){return this.createFlexKey(e.fileName)}}});
/*!
* OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.predefine("sap/ui/fl/apply/_internal/extensionPoint/Processor",["sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/changes/ExtensionPointState","sap/ui/fl/Utils","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/base/SyncPromise","sap/base/util/merge"],function(n,e,t,i,o,r,a){"use strict";var s;function u(n,e,t,i,o){return o(n,true).then(function(o){o.forEach(function(n,o){e.splice(t+o+i,0,n)});n.index+=i;return o.length-1})}function f(n,e,t){var i=[];var o=[];var a=0;var s;t.forEach(function(t,r){if(t._isExtensionPoint){t.targetControl=n.targetControl;t.aggregationName=n.aggregationName;t.fragmentId=n.fragmentId;t.index=r;if(s){s._nextSibling=t}s=t;t.referencedExtensionPoint=n;i.push(function(){return u(t,o,r,a,e).then(function(n){a+=n})})}else{o.push(t)}});if(i.length>0){return i.reduce(function(n,e){return n.then(e)},r.resolve()).then(function(){return o})}return r.resolve(o)}function l(n,r){var u=i.getAppComponentForControl(n.targetControl);var f={};var g=a({defaultContent:[]},n);f.appComponent=u;f.modifier=o;f.viewId=n.view.getId();f.componentId=u.getId();return s.registerExtensionPoint(g).then(e.initialize.bind(e,f)).then(t.enhanceExtensionPointChanges.bind(t,f,n)).then(s.createDefaultContent.bind(this,n,r,l)).then(s.addDefaultContentToExtensionPointInfo.bind(this,g,r))}s={oExtensionPointRegistry:undefined,oRegistryPromise:Promise.resolve(),registerExtensionPoint:function(n){if(sap.ui.getCore().getConfiguration().getDesignMode()){if(s.oExtensionPointRegistry){s.oExtensionPointRegistry.registerExtensionPoint(n);return r.resolve()}s.oRegistryPromise=s.oRegistryPromise.then(function(){return new Promise(function(e,t){sap.ui.require(["sap/ui/fl/write/_internal/extensionPoint/Registry"],function(t){s.oExtensionPointRegistry=t;t.registerExtensionPoint(n);e()},function(n){t(n)})})});return s.oRegistryPromise}return r.resolve()},createDefaultContent:function(n,e,t,i){if(i.length===0){return n.createDefault().then(f.bind(undefined,n,t)).then(function(t){if(!e){t.forEach(function(e,t){o.insertAggregation(n.targetControl,n.aggregationName,e,n.index+t,n.view)});n.ready(t)}return t})}return r.resolve([])},addDefaultContentToExtensionPointInfo:function(n,e,t){if(!e){n.defaultContent=n.defaultContent.concat(t)}return t},applyExtensionPoint:function(e){var t=l(e,false);n.addPreConditionForInitialChangeApplying(t);return t}};return s});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/CompVariantRevertData",["sap/ui/fl/apply/_internal/flexObjects/RevertData"],function(e){"use strict";return e.extend("sap.ui.fl.apply._internal.flexObjects.CompVariantRevertData",{metadata:{properties:{change:{type:"sap.ui.fl.Change"}}}})});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/FlexObject",["sap/base/Log","sap/base/util/deepClone","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/base/util/ObjectPath","sap/base/util/restricted/_omit","sap/ui/base/ManagedObject","sap/ui/fl/apply/_internal/flexObjects/States","sap/ui/fl/Layer","sap/ui/fl/registry/Settings","sap/ui/fl/Utils"],function(t,e,r,a,n,i,o,s,p,u,c){"use strict";var f=o.extend("sap.ui.fl.apply._internal.flexObjects.FlexObject",{metadata:{properties:{state:{type:"string",defaultValue:s.NEW},fileType:{type:"string",defaultValue:"change"},layer:{type:"string"},flexObjectMetadata:{type:"object",defaultValue:{}},supportInformation:{type:"object",defaultValue:{}},content:{type:"any"},texts:{type:"object",defaultValue:{}}}},constructor:function(){o.apply(this,arguments);var t=this.getFlexObjectMetadata();if(t.reference){t.namespace=t.namespace||c.createNamespace({reference:t.reference},this.getFileType());if(!t.projectId){t.projectId=t.reference.replace(".Component","")}}this.setFlexObjectMetadata(t);var e=this.getSupportInformation();if(!e.originalLanguage){e.originalLanguage=c.getCurrentLanguage()}this.setSupportInformation(e)}});f.getMappingInfo=function(){return Object.assign({},{"flexObjectMetadata.reference":"reference","flexObjectMetadata.namespace":"namespace","flexObjectMetadata.creation":"creation","flexObjectMetadata.projectId":"projectId","flexObjectMetadata.packageName":"packageName","flexObjectMetadata.moduleName":"moduleName","supportInformation.generator":"support.generator","supportInformation.service":"support.service","supportInformation.sourceSystem":"sourceSystem","supportInformation.sourceClient":"sourceClient","supportInformation.user":"support.user","supportInformation.sapui5Version":"support.sapui5Version","supportInformation.sourceChangeFileName":"support.sourceChangeFileName","supportInformation.compositeCommand":"support.compositeCommand","supportInformation.command":"support.command","supportInformation.oDataInformation":"oDataInformation","supportInformation.originalLanguage":"originalLanguage",layer:"layer",fileType:"fileType",content:"content",id:"fileName",texts:"texts"})};f.prototype.getMappingInfo=function(){return f.getMappingInfo()};f.prototype.setContent=function(t){this.setProperty("content",t);this.setState(s.DIRTY);return this};f.prototype.getFlexObjectMetadata=function(){return Object.assign({},this.getProperty("flexObjectMetadata"))};f.prototype.getSupportInformation=function(){return Object.assign({},this.getProperty("supportInformation"))};function l(t,e){if(!Object.values(s).includes(t)){return false}if(e===s.NEW&&t===s.DIRTY){return false}return true}f.prototype.setState=function(t){var e=this.getState();if(e!==t&&l(t,e)){this._sPreviousState=e;this.setProperty("state",t)}return this};f.prototype.markForDeletion=function(){this.setState(s.DELETED)};f.prototype.restorePreviousState=function(){if(this._sPreviousState){this.setState(this._sPreviousState);delete this._sPreviousState}};f.prototype.isChangeFromOtherSystem=function(){var t=this.getSupportInformation().sourceSystem;var e=this.getSupportInformation().sourceClient;if(!t||!e){return false}var r=u.getInstanceOrUndef();if(!r){return true}var a=r.getSystem();var n=r.getClient();if(!a||!n){return false}return t!==a||e!==n};f.prototype.isUserDependent=function(){return this.getLayer()===p.USER};f.prototype.getText=function(t){var e=this.getTexts()[t]||{};return e.value||""};f.prototype.setText=function(t,e){var r=Object.assign({},this.getTexts());if(r[t]){r[t]=Object.assign({},r[t],{value:e});this.setTexts(r);this.setState(s.DIRTY)}return this};function g(t){return t.length?t.charAt(0).toUpperCase()+t.slice(1):t}function h(t){return typeof this[t]==="function"?this[t].bind(this):function(){throw new Error(t+" is not a valid mutator")}}function m(t){var r=t.split(".");r[0]=g(r[0]);var a=r.shift();var i=h.call(this,"get"+a);var o=h.call(this,"set"+a);return{getValue:function(){var t=e(i());if(r.length>0){return n.get(r,t)}return t},setValue:function(t){var a=e(i());if(r.length>0){n.set(r,t,a)}else{a=t}o(a);return this}.bind(this)}}f.prototype.convertToFileContent=function(){var t={};Object.entries(this.getMappingInfo()).forEach(function(e){var r=m.call(this,e[0]).getValue();if(r!==undefined){n.set(e[1],r,t)}}.bind(this));return t};function y(t,e){var r=m.call(this,t);var a=r.getValue();if(a!==e){r.setValue(e)}}f.mapFileContent=function(r,n){var i=Object.values(n);var o={};var s=function(e,r,p){var u=p?p+"."+e:e;var c=i.indexOf(u);if(c>=0){var f=Object.keys(n)[c];o[f]=r}else if(a(r)){Object.entries(r).forEach(function(t){s(t[0],t[1],u)})}else{t.error("Missing mapping info for property "+u)}};Object.entries(e(r)).forEach(function(t){s(t[0],t[1])});return o};f.prototype.update=function(t){var e=i(t,["fileName"]);var r=f.mapFileContent(e,this.getMappingInfo());Object.entries(r).forEach(function(t){y.call(this,t[0],t[1])}.bind(this))};f.prototype.setResponse=function(t){if(!t||r(t)){return}this.update(t);this.setState(s.PERSISTED)};return f});
/* !
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/FlexObjectFactory",["sap/base/util/ObjectPath","sap/ui/fl/apply/_internal/flexObjects/FlexObject"],function(e,t){"use strict";var r={BASE_FLEX_OBJECT:t};function n(){return r.BASE_FLEX_OBJECT}var a={};a.createFromFileContent=function(t){var r=Object.assign({},t);var a=n(r);if(!a){throw new Error("Unknown file type")}r.support=Object.assign({generator:"FlexObjectFactory.createFromFileContent"},r.support||{});var i=a.getMappingInfo();var c=a.mapFileContent(r,i);var o=Object.entries(c).reduce(function(t,r){e.set(r[0].split("."),r[1],t);return t},{});var p=new a(o);return p};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexObjects/RevertData",["sap/ui/base/ManagedObject"],function(e){"use strict";return e.extend("sap.ui.fl.apply._internal.flexObjects.RevertData",{metadata:{properties:{type:{type:"string"},content:{type:"object"}}}})});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/UI2Personalization/UI2PersonalizationState",["sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/write/_internal/connectors/LrepConnector"],function(e,n){"use strict";var r={};r.getPersonalization=function(n,r,t){var i=e.getUI2Personalization(n);if(!i||!i[r]){return t?undefined:[]}if(!t){return i[r]}return i[r].filter(function(e){return e.itemName===t})[0]};r.setPersonalization=function(r){if(!r||!r.reference||!r.containerKey||!r.itemName||!r.content){return Promise.reject("not all mandatory properties were provided for the storage of the personalization")}return n.ui2Personalization.create({flexObjects:r}).then(function(n){var r=e.getUI2Personalization(n.response.reference);r[n.response.containerKey]=r[n.response.containerKey]||[];r[n.response.containerKey].push(n.response)})};r.deletePersonalization=function(e,t,i){if(!e||!t||!i){return Promise.reject("not all mandatory properties were provided for the storage of the personalization")}return n.ui2Personalization.remove({reference:e,containerKey:t,itemName:i}).then(function(){var n=r.getPersonalization(e,t);var o=r.getPersonalization(e,t,i);var a=n.indexOf(o);n.splice(a,1)})};return r});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/changes/ExtensionPointState",["sap/base/util/restricted/_omit","sap/base/util/merge","sap/base/Log","sap/ui/fl/apply/_internal/changes/Utils","sap/ui/fl/write/api/ChangesWriteAPI","sap/ui/fl/ChangePersistenceFactory"],function(e,n,t,i,o,r){"use strict";var a={};function s(e,n){if(n.getSelector().name!==e.extensionPointName){return false}return i.filterChangeByView(e,n)}function g(e,n){if(n.fragmentId){var t=e.getExtensionPointInfo&&e.getExtensionPointInfo();if(t){return n.fragmentId!==t.fragmentId}return true}return false}function f(e,t,i){var o=e.getSelector();if(t.closestAggregationBindingCarrier&&t.closestAggregationBinding){o=n(o,{id:t.closestAggregationBindingCarrier,idIsLocal:false});var r=e.getDefinition();var a={id:t.targetControl.getId(),idIsLocal:false};if(!r.dependentSelector){r.dependentSelector={}}if(i){e.originalSelectorToBeAdjusted=a}else{r.dependentSelector.originalSelector=a}r.content.boundAggregation=t.closestAggregationBinding}else{o=n(o,{id:t.targetControl.getId(),idIsLocal:false})}e.setSelector(o)}a.getChangesForExtensionPoint=function(e,n){if(!n.extensionPointName){t.error("Missing name from extension point info!");return Promise.resolve([])}return e.getChangesForComponent().then(function(e){return e.filter(s.bind(undefined,n))})};a.enhanceExtensionPointChanges=function(n,t){n.extensionPointName=t.name;var i=r.getChangePersistenceForControl(t.targetControl);return a.getChangesForExtensionPoint(i,n).then(function(r){var a=[];r.forEach(function(r){if(r.isInInitialState()&&!(r.getExtensionPointInfo&&r.getExtensionPointInfo())){r.setExtensionPointInfo(t);f(r,t,false);if(i.isChangeMapCreated()){i.addChangeAndUpdateDependencies(n.appComponent,r)}}else if(g(r,t)){var s=r.getDefinition();var l=e(s,["dependentSelector","fileName","selector","content"]);Object.keys(s.content).forEach(function(e){l[e]=s.content[e]});l.support.sourceChangeFileName=s.fileName||"";a.push(o.create({changeSpecificData:l,selector:{view:t.view,name:t.name}}).then(function(e){f(e,t,true);e.setExtensionPointInfo(t);e.setModuleName(s.moduleName);e.getDefinition().creation=s.creation;i.addChangeAndUpdateDependencies(n.appComponent,e,r)}))}});return Promise.all(a).then(function(){return r})})};return a});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/_internal/flexState/compVariants/Utils",[],function(){"use strict";var e={};e.getPersistencyKey=function(e){if(e){var t=e.getVariantManagement&&e.getVariantManagement()||e;if(t.getPersonalizableControlPersistencyKey){return t.getPersonalizableControlPersistencyKey()}return t.getPersistencyKey&&t.getPersistencyKey()}};return e});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/api/ControlVariantApplyAPI",["sap/base/Log","sap/ui/core/Component","sap/ui/core/Core","sap/ui/core/Element","sap/ui/fl/apply/_internal/controlVariants/URLHandler","sap/ui/fl/variants/VariantManagement","sap/ui/fl/Utils"],function(e,r,t,n,a,o,i){"use strict";var l={clearVariantParameterInURL:function(r){var t;var n=i.getAppComponentForControl(r.control);var l=n&&n.getModel(i.VARIANT_MODEL_NAME);if(!l){e.error("Variant model could not be found on the provided control");return}if(r.control instanceof o){var c=l.getLocalId(r.control.getId(),n);var p=a.removeURLParameterForVariantManagement({model:l,vmReference:c});t=p.parameters}a.update({parameters:t||[],updateURL:true,updateHashEntry:!!l,model:l||{},silent:!l})},activateVariant:function(a){function o(r){e.error(r);return Promise.reject(r)}var l;if(typeof a.element==="string"){l=r.get(a.element);if(!(l instanceof r)){l=t.byId(a.element);if(!(l instanceof n)){return o(Error("No valid component or control found for the provided ID"))}}}else if(a.element instanceof r||a.element instanceof n){l=a.element}var c=i.getAppComponentForControl(l);if(!c){return o(Error("A valid variant management control or component (instance or ID) should be passed as parameter"))}var p=c.getModel(i.VARIANT_MODEL_NAME);if(!p){return o(Error("No variant management model found for the passed control or application component"))}var d=p.getVariantManagementReference(a.variantReference).variantManagementReference;if(!d){return o(Error("A valid control or component, and a valid variant/ID combination are required"))}return p.waitForVMControlInit(d).then(function(){return p.updateCurrentVariant({variantManagementReference:d,newVariantReference:a.variantReference,appComponent:c})}).catch(function(r){e.error(r);throw r})},attachVariantApplied:function(e){var r=e.selector.id&&sap.ui.getCore().byId(e.selector.id)||e.selector;var t=i.getAppComponentForControl(r);var n=t.getModel(i.VARIANT_MODEL_NAME);n.attachVariantApplied({vmControlId:e.vmControlId,control:r,callback:e.callback,callAfterInitialVariant:e.callAfterInitialVariant})},detachVariantApplied:function(e){var r=e.selector.id&&sap.ui.getCore().byId(e.selector.id)||e.selector;var t=i.getAppComponentForControl(r);var n=t.getModel(i.VARIANT_MODEL_NAME);n.detachVariantApplied(e.vmControlId,r.getId())}};return l});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/api/FlexRuntimeInfoAPI",["sap/base/util/includes","sap/base/Log","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/apply/_internal/controlVariants/Utils","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/FlexControllerFactory","sap/ui/fl/Layer","sap/ui/fl/Utils"],function(e,t,r,n,o,l,a,i,s){"use strict";var c={isPersonalized:function(n){function o(e){t.error(e);return Promise.reject(e)}function l(e){return e.getFileType()==="change"}function c(t,n,o){var l=n.map(function(e){return e.id||e.getId()});var a=o.getSelector();var i=r.getControlIdBySelector(a,t);return e(l,i)}function p(t,r){return Array.isArray(t)&&t.length>0?e(t,r.getChangeType()):true}if(!n.selectors||n.selectors.length===0){return o("At least one control ID has to be provided as a parameter")}var u=n.selectors[0].appComponent||s.getAppComponentForControl(n.selectors[0]);if(!u){return o("App Component could not be determined")}var f=a.createForControl(u);return f.getComponentChanges({currentLayer:i.USER,includeCtrlVariants:true}).then(function(e){return e.filter(c.bind(this,u,n.selectors)).filter(p.bind(this,n.changeTypes)).some(l)}.bind(this))},waitForChanges:function(e){var t;var r;if(e.element){t=[{selector:e.element}];r=e.element}else if(e.selectors){t=e.selectors.map(function(e){return{selector:e}});r=e.selectors[0]}else if(e.complexSelectors){t=e.complexSelectors;r=e.complexSelectors[0].selector}return l.getFlexControllerInstance(r).waitForChangesToBeApplied(t)},isFlexSupported:function(e){return!!s.getAppComponentForControl(e.element)},hasVariantManagement:function(e){return n.belongsToVariantManagement(e.element)},getFlexReference:function(e){return o.getFlexReferenceForControl(e.element)}};return c});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/api/SmartVariantManagementApplyAPI",["sap/ui/fl/apply/_internal/flexState/compVariants/CompVariantMerger","sap/ui/fl/apply/_internal/flexState/compVariants/Utils","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/flexState/ManifestUtils","sap/ui/fl/Utils","sap/ui/fl/LayerUtils"],function(t,e,n,r,a,i){"use strict";function o(t){var a=r.getFlexReferenceForControl(t);var i=e.getPersistencyKey(t);var o=n.getCompVariantsMap(a);return o._getOrCreate(i)}function p(t){var i=t.control;var o=r.getFlexReferenceForControl(i);return n.initialize({reference:o,componentData:{},manifest:a.getAppDescriptor(i),componentId:a.getAppComponentForControl(i).getId()}).then(function(){var r=e.getPersistencyKey(i);var a=n.getCompVariantsMap(o);n.setInitialNonFlCompVariantData(o,r,t.standardVariant,t.variants);return a._initialize(r,t.variants)})}function l(t){if(t.length>0&&t.indexOf(".Component")<0){t+=".Component"}return t}var s={loadVariants:function(n){return p(n).then(function(r){var a=e.getPersistencyKey(n.control);return t.merge(a,r,n.standardVariant)})},isApplicationVariant:function(t){var e=t.control;var n=a.getAppComponentForControl(e);var i=r.getFlexReferenceForControl(n);var o=l(a.getAppIdFromManifest(n.getManifest()));if(i!==o){return true}var p=a.getComponentForControl(e);if(p&&p.getAppComponent){p=p.getAppComponent();if(p){return true}}return false},isVendorLayer:function(){return i.isVendorLayer()},isVariantDownport:function(){return s.isVendorLayer()&&a.isHotfixMode()},getDefaultVariantId:function(t){var e=o(t.control).defaultVariants;var n=e[e.length-1];return n?n.getContent().defaultVariantName:""}};return s});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/apply/api/UI2PersonalizationApplyAPI",["sap/ui/fl/apply/_internal/flexState/UI2Personalization/UI2PersonalizationState","sap/ui/fl/apply/_internal/flexState/FlexState","sap/ui/fl/apply/_internal/ChangesController"],function(e,n,t){"use strict";var r={load:function(r){var a=t.getFlexControllerInstance(r.selector);r.reference=a.getComponentName();if(!r.reference||!r.containerKey){return Promise.reject(new Error("not all mandatory properties were provided for the loading of the personalization"))}return n.initialize({componentId:r.selector.getId()}).then(function(){return e.getPersonalization(r.reference,r.containerKey,r.itemName)})}};return r});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/descriptorRelated/api/DescriptorChangeFactory",["sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/Change","sap/ui/fl/Utils","sap/base/util/merge"],function(e,t,n,r){"use strict";var i=function(e,t){this._mChangeFile=e;this._mChangeFile.packageName="";this._oInlineChange=t};i.prototype.submit=function(){this.store();var e=this._getChangePersistence(this._mChangeFile.reference);return e.saveDirtyChanges()};i.prototype.store=function(){var e=this._mChangeFile.reference;var t=this._getChangePersistence(e);var n=this._getChangeToSubmit();t.addChange(n);return n};i.prototype._getChangePersistence=function(t){return e.getChangePersistenceForComponent(t)};i.prototype._getChangeToSubmit=function(){var e=new t(this._getMap());return e};i.prototype._getMap=function(){var e=this._oInlineChange.getMap();this._mChangeFile.content=e.content;this._mChangeFile.texts=e.texts;return this._mChangeFile};i.prototype.getJson=function(){return r({},this._getMap())};var a=function(){};a.prototype.createNew=function(e,n,r,a,o){var s=function(e,t){if(e["setHostingIdForTextKey"]){e.setHostingIdForTextKey(t)}};s(n,e);var g={};g.changeType=n._getChangeType();g.componentName=e;g.reference=e;g.generator=o;g.support=n.getMap().support;g.layer=r||"CUSTOMER";var p=t.createInitialFileContent(g);return Promise.resolve(new i(p,n))};return a});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/descriptorRelated/internal/Utils",[],function(){"use strict";var e=function(){};e.prototype.getNameAndNameSpace=function(e,r){return{fileName:"manifest",namespace:"apps/"+r+"/appVariants/"+e+"/"}};e.prototype.checkEntityPropertyChange=function(e){this.checkParameterAndType(e,"entityPropertyChange","object");if(e.entityPropertyChange instanceof Array){for(var r=0;r<e.entityPropertyChange.length;r++){var t=e.entityPropertyChange[r];this.checkEntityPropertyChangeContent(t)}}else if(e.entityPropertyChange instanceof Object){this.checkEntityPropertyChangeContent(e.entityPropertyChange)}};e.prototype.checkEntityPropertyChangeContent=function(e){this.checkParameterAndType(e,"propertyPath","string");this.checkParameterAndType(e,"operation","string");if(["INSERT","UPDATE","UPSERT","DELETE"].indexOf(e.operation)===-1){throw new Error("Parameter \"entityPropertyChange.operation\" needs to be one of 'INSERT', 'UPDATE', 'UPSERT', 'DELETE'")}if(e.propertyValue===undefined&&e.operation!=="DELETE"){throw new Error('No parameter "entityPropertyChange.propertyValue" provided')}};e.prototype.checkParameterAndType=function(e,r,t){if(t==="array"){if(e===undefined||e[r]===undefined||!Array.isArray(e[r])){throw new Error('No parameter "'+r+'" of type '+t+" provided")}}else if(e===undefined||e[r]===undefined||typeof e[r]!==t){throw new Error('No parameter "'+r+'" of type '+t+" provided")}};e.prototype.checkTexts=function(e){if(e!==undefined&&typeof e!=="object"){throw new Error('Wrong format for provided "texts" parameter')}};e.prototype.checkTransportRequest=function(e){if(!/^[A-Z0-9]{1,20}$/.test(e)&&e!=="ATO_NOTIFICATION"){throw new Error('Wrong format for provided "sTransportRequest" parameter')}};e.prototype.checkPackage=function(e){if(!/^[A-Z0-9/_]{1,30}$/.test(e)&&e!=="$TMP"){throw new Error('Wrong format for provided "sPackage" parameter')}};return new e},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/LrepConnector",["sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/Utils","sap/ui/dom/includeScript","sap/base/util/restricted/_pick"],function(e,i,n,t){"use strict";var s={DATA:"/flex/data/",MODULES:"/flex/modules/"};return{layers:["ALL"],xsrfToken:undefined,settings:undefined,_loadModules:function(e){return new Promise(function(i,t){n(e,undefined,i,t)})},_addClientInfo:function(e){var n=i.getUrlParameter("sap-client");if(!e&&n){e={}}if(n){e["sap-client"]=n}},loadFlexData:function(i){if(i.cacheKey==="<NO CHANGES>"){return Promise.resolve()}var n=t(i,["version","allContexts"]);this._addClientInfo(n);e.addLanguageInfo(n);var r;if(i.appDescriptor&&i.appDescriptor["sap.app"]){r=i.appDescriptor["sap.app"].id}if(i.preview){i.reference=i.preview.reference;n.upToLayerType=i.preview.maxLayer}var a=e.getUrl(s.DATA,i,n);return e.sendRequest(a,"GET",{xsrfToken:this.xsrfToken,siteId:i.siteId,sAppDescriptorId:r}).then(function(t){var r=t.response;if(t.xsrfToken){this.xsrfToken=t.xsrfToken}if(t.etag){r.cacheKey=t.etag}else if(i.cacheKey){r.cacheKey=i.cacheKey}r.changes=r.changes.concat(r.compVariants||[]);if(r.settings){this.settings=r.settings;this.settings.isVariantAdaptationEnabled=!!this.settings.isPublicLayerAvailable}if(!r.loadModules){return r}var a=e.getUrl(s.MODULES,i,n);return this._loadModules(a).then(function(){return r})}.bind(this))}}});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/initial/_internal/connectors/Utils",["sap/base/security/encodeURLParameters"],function(e){"use strict";var s=0;var t=function(e,s){var t=new Error(e.statusText);t.status=e.status;t.userMessage=s;return t};var r=function(e){return sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl").getText(e)};return{addLanguageInfo:function(e){if(!e){e={}}e["sap-language"]=sap.ui.getCore().getConfiguration().getLanguage()},getUrl:function(s,t,r){if(!s||!t.url){throw new Error("Not all necessary parameters were passed")}var n=t.url+s;if(t.cacheKey){n+="~"+t.cacheKey+"~/"}if(t.reference){n+=t.reference}else if(t.fileName){n+=t.fileName}if(r){Object.keys(r).forEach(function(e){if(r[e]===undefined){delete r[e]}});var a=e(r);if(a.length>0){n+="?"+a}}return n},sendRequest:function(e,n,a){n=n||"GET";n=n.toUpperCase();return new Promise(function(o,i){var p=new XMLHttpRequest;p.open(n,e);p.timeout=s;if((n==="GET"||n==="HEAD")&&(!a||!a.xsrfToken)){p.setRequestHeader("X-CSRF-Token","fetch")}if((n==="POST"||n==="PUT"||n==="DELETE")&&a&&a.xsrfToken){p.setRequestHeader("X-CSRF-Token",a.xsrfToken)}if(a&&a.contentType){p.setRequestHeader("Content-Type",a.contentType)}if(a&&a.siteId){p.setRequestHeader("X-LRep-Site-Id",a.siteId)}if(a&&a.sAppDescriptorId){p.setRequestHeader("X-LRep-AppDescriptor-Id",a.sAppDescriptorId)}if(a&&a.dataType){p.responseType=a.dataType}p.onload=function(){if(p.status>=200&&p.status<400){try{var e={};if(p.status!==204&&p.status!==205){if(!p.response&&p.responseText){p.response=p.responseText}e.response=p.response;if(typeof e.response==="string"&&p.getResponseHeader("content-type")&&p.getResponseHeader("content-type").indexOf("json")>0){e.response=JSON.parse(e.response)}}e.status=p.status;if(p.getResponseHeader("X-CSRF-Token")){e.xsrfToken=p.getResponseHeader("X-CSRF-Token")}if(p.getResponseHeader("Etag")){e.etag=p.getResponseHeader("Etag")}o(e)}catch(e){e.userMessage=r("MSG_LOADING_SERVER_RESPONSE_ERROR");i(e)}}else{var s="";try{var n=typeof p.response==="string"?JSON.parse(p.response):p.response;if(Array.isArray(n.messages)&&n.messages.length){s=n.messages.reduce(function(e,s){return e.concat(s.severity==="Error"?s.text+"\n":"")},s)}}catch(e){}i(t(p,s))}};p.ontimeout=function(){i(t(p,r("MSG_CONNECTION_TIMEOUT_ERROR")))};p.onerror=function(){i(t(p,r("MSG_NETWORK_ERROR")))};if(a&&a.payload){p.send(a.payload)}else{p.send()}})}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/transport/TransportDialog",["sap/ui/fl/write/_internal/transport/TransportDialog"],function(r){"use strict";var a=r.extend("sap.ui.fl.transport.TransportDialog",{metadata:{library:"sap.ui.fl",deprecated:true},renderer:{apiVersion:2}});return a});
/*
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/transport/TransportSelection",["sap/ui/fl/write/_internal/transport/TransportSelection"],function(r){"use strict";return r},true);
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/util/DescriptorChangeCheck",["sap/base/util/includes","sap/ui/fl/Layer"],function(r,e){"use strict";function t(r,e,t){if(Array.isArray(r)){r.forEach(function(r){o(r,e,t)})}else{o(r,e,t)}}function o(e,t,o){if(!e.propertyPath){throw new Error("Invalid change format: The mandatory 'propertyPath' is not defined. Please define the mandatory property 'propertyPath'")}if(!e.operation){throw new Error("Invalid change format: The mandatory 'operation' is not defined. Please define the mandatory property 'operation'")}if(!e.propertyValue){throw new Error("Invalid change format: The mandatory 'propertyValue' is not defined. Please define the mandatory property 'propertyValue'")}if(!r(t,e.propertyPath)){throw new Error("Changing "+e.propertyPath+" is not supported. The supported 'propertyPath' is: "+t.join("|"))}if(!r(o,e.operation)){throw new Error("Operation "+e.operation+" is not supported. The supported 'operation' is "+o.join("|"))}}function n(r,e,o){var n=Object.keys(r).filter(function(r){return r.endsWith("Id")}).shift();if(!r[n]){throw new Error('Mandatory "'+n+'" parameter is not provided.')}if(!r.entityPropertyChange){throw new Error('Changes for "'+r[n]+'" are not provided.')}t(r.entityPropertyChange,e,o)}var a={};a[e.CUSTOMER]="customer.";a[e.CUSTOMER_BASE]="customer.";a[e.PARTNER]="partner.";a[e.VENDOR]=null;function i(r,e){var t=e.getLayer();if(!t){throw new Error("Mandatory layer parameter is not provided.")}var o=p(t);if(o===null){Object.keys(a).forEach(function(e){if(a[e]&&r.startsWith(a[e])){throw new Error("Id "+r+" must not start with reserved "+a[e])}})}else if(!r.startsWith(o)){throw new Error("Id "+r+" must start with "+o)}}function p(r){var e=a[r];if(e===undefined){throw new Error("Layer "+r+" not supported.")}return e}return{checkEntityPropertyChange:n,checkIdNamespaceCompliance:i,getNamespacePrefixForLayer:p}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/util/IFrame.flexibility",["sap/ui/fl/changeHandler/UpdateIFrame"],function(e){"use strict";return{updateIFrame:e,hideControl:"default",unhideControl:"default"}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/util/changePropertyValueByPath",["sap/base/util/ObjectPath"],function(r){"use strict";function a(a,t){var e=a.propertyPath.split("/");var o=r.get(e,t);if(o&&a.operation==="INSERT"){throw new Error("Path has already a value. 'INSERT' operation is not appropriate.")}if(!o&&a.operation==="UPDATE"){throw new Error("Path does not contain a value. 'UPDATE' operation is not appropriate.")}r.set(e,a.propertyValue,t)}return function(r,t){if(Array.isArray(r)){r.forEach(function(r){a(r,t)})}else{a(r,t)}}});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/variants/VariantManagement",["sap/ui/model/Context","sap/ui/model/PropertyBinding","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/layout/HorizontalLayout","sap/ui/layout/Grid","sap/base/Log","sap/m/SearchField","sap/m/RadioButton","sap/m/ColumnListItem","sap/m/Column","sap/m/Text","sap/m/Bar","sap/m/Table","sap/m/Page","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/m/ToggleButton","sap/m/CheckBox","sap/m/Dialog","sap/m/Input","sap/m/Label","sap/m/Title","sap/m/ResponsivePopover","sap/m/SelectList","sap/m/ObjectIdentifier","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/VBox","sap/m/HBox","sap/ui/events/KeyCodes","sap/ui/core/library","sap/m/library","sap/ui/fl/Utils","sap/ui/fl/registry/Settings"],function(e,t,i,a,o,n,s,r,l,h,u,d,p,g,c,f,_,m,M,y,v,A,N,S,V,C,T,b,E,I,x,D,R,w,O,P,L,F,B,K,k){"use strict";var G=B.OverflowToolbarPriority;var U=B.ButtonType;var H=B.PlacementType;var z=B.PopinDisplay;var W=B.ScreenSize;var j=F.ValueState;var X=F.TextAlign;var Y=r.extend("sap.ui.fl.variants.VariantManagement",{metadata:{interfaces:["sap.m.IOverflowToolbarContent"],library:"sap.ui.fl",designtime:"sap/ui/fl/designtime/variants/VariantManagement.designtime",properties:{showSetAsDefault:{type:"boolean",group:"Misc",defaultValue:true},manualVariantKey:{type:"boolean",group:"Misc",defaultValue:false},inErrorState:{type:"boolean",group:"Misc",defaultValue:false},editable:{type:"boolean",group:"Misc",defaultValue:true},modelName:{type:"string",group:"Misc",defaultValue:null},updateVariantInURL:{type:"boolean",group:"Misc",defaultValue:false},resetOnContextChange:{type:"boolean",group:"Misc",defaultValue:true},executeOnSelectionForStandardDefault:{type:"boolean",group:"Misc",defaultValue:false},displayTextForExecuteOnSelectionForStandardVariant:{type:"string",group:"Misc",defaultValue:""}},associations:{for:{type:"sap.ui.core.Control",multiple:true}},events:{save:{parameters:{name:{type:"string"},overwrite:{type:"boolean"},key:{type:"string"},execute:{type:"boolean"},def:{type:"boolean"}}},cancel:{},manage:{},initialized:{},select:{parameters:{key:{type:"string"}}}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t).class("sapUiFlVarMngmt").openEnd();e.renderControl(t.oVariantLayout);e.close("div")}}});Y.INNER_MODEL_NAME="$sapUiFlVariants";Y.MAX_NAME_LEN=100;Y.COLUMN_FAV_IDX=0;Y.COLUMN_NAME_IDX=1;Y.prototype.init=function(){this._sModelName=K.VARIANT_MODEL_NAME;this.attachModelContextChange(this._setModel,this);this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");this._createInnerModel();this.oVariantInvisibleText=new s;this.oVariantText=new E(this.getId()+"-text",{text:{path:"currentVariant",model:this._sModelName,formatter:function(e){var t="";if(e){t=this.getSelectedVariantText(e);this._setInvisibleText(t,this.getModified())}return t}.bind(this)}});this.oVariantText.addStyleClass("sapUiFlVarMngmtClickable");this.oVariantText.addStyleClass("sapUiFlVarMngmtTitle");this.oVariantText.addStyleClass("sapMTitleStyleH4");if(n.system.phone){this.oVariantText.addStyleClass("sapUiFlVarMngmtTextPhoneMaxWidth")}else{this.oVariantText.addStyleClass("sapUiFlVarMngmtTextMaxWidth")}var e=new _(this.getId()+"-modified",{text:"*",visible:{path:"modified",model:this._sModelName,formatter:function(e){var t=this.getCurrentVariantKey();if(t){this._setInvisibleText(this.getSelectedVariantText(t),e)}return e===null||e===undefined?false:e}.bind(this)}});e.setVisible(false);e.addStyleClass("sapUiFlVarMngmtModified");e.addStyleClass("sapUiFlVarMngmtClickable");this.oVariantPopoverTrigger=new S(this.getId()+"-trigger",{icon:"sap-icon://slim-arrow-down",type:U.Transparent,tooltip:this._oRb.getText("VARIANT_MANAGEMENT_TRIGGER_TT")});this.oVariantPopoverTrigger.addAriaLabelledBy(this.oVariantInvisibleText);this.oVariantPopoverTrigger.addStyleClass("sapUiFlVarMngmtTriggerBtn");this.oVariantLayout=new h({content:[this.oVariantText,e,this.oVariantPopoverTrigger]});this.oVariantLayout.addStyleClass("sapUiFlVarMngmtLayout");e.setVisible(false);this.oVariantModifiedText=e;this.oVariantInvisibleText.toStatic();this.addDependent(this.oVariantLayout);this._fRegisteredApplyAutomaticallyOnStandardVariant=null};Y.prototype.registerApplyAutomaticallyOnStandardVariant=function(e){this._fRegisteredApplyAutomaticallyOnStandardVariant=e;return this};Y.prototype.getApplyAutomaticallyOnVariant=function(e){var t=e.executeOnSelect;if(this._fRegisteredApplyAutomaticallyOnStandardVariant&&this.getDisplayTextForExecuteOnSelectionForStandardVariant()&&e.key===this.getStandardVariantKey()){try{t=this._fRegisteredApplyAutomaticallyOnStandardVariant(e)}catch(e){d.error("callback for determination of apply automatically on standard variant failed")}}return t};Y.prototype.getOverflowToolbarConfig=function(){return{canOverflow:false,invalidationEvents:["save","manage","select"]}};Y.prototype.getTitle=function(){return this.oVariantText};Y.prototype._setInvisibleText=function(e,t){var i;if(e){if(t){i="VARIANT_MANAGEMENT_SEL_VARIANT_MOD"}else{i="VARIANT_MANAGEMENT_SEL_VARIANT"}this.oVariantInvisibleText.setText(this._oRb.getText(i,[e]))}};Y.prototype._createInnerModel=function(){var e=new i({showExecuteOnSelection:false,showSetAsDefault:true,showPublic:false,showContexts:false,editable:true,popoverTitle:this._oRb.getText("VARIANT_MANAGEMENT_VARIANTS")});this.setModel(e,Y.INNER_MODEL_NAME);this._bindProperties();this._updateInnerModelWithSettingsInfo()};Y.prototype._bindProperties=function(){this.bindProperty("showSetAsDefault",{path:"/showSetAsDefault",model:Y.INNER_MODEL_NAME});this.bindProperty("editable",{path:"/editable",model:Y.INNER_MODEL_NAME})};Y.prototype._updateInnerModelWithSettingsInfo=function(){k.getInstance().then(function(e){this.getModel(Y.INNER_MODEL_NAME).setProperty("/showSaveAs",e.isVariantPersonalizationEnabled());this.getModel(Y.INNER_MODEL_NAME).setProperty("/showPublic",e.isPublicFlVariantEnabled())}.bind(this))};Y.prototype._getShowPublic=function(){var e=this.getModel(Y.INNER_MODEL_NAME);if(e){return e.getProperty("/showPublic")}return false};Y.prototype._setShowPublic=function(e){var t=this.getModel(Y.INNER_MODEL_NAME);if(t){t.setProperty("/showPublic",e)}};Y.prototype._getShowContexts=function(){var e=this.getModel(Y.INNER_MODEL_NAME);if(e){return e.getProperty("/showContexts")}return false};Y.prototype._setShowContexts=function(e){var t=this.getModel(Y.INNER_MODEL_NAME);if(t){t.setProperty("/showContexts",e)}};Y.prototype._getShowExecuteOnSelection=function(){var e=this.getModel(Y.INNER_MODEL_NAME);if(e){return e.getProperty("/showExecuteOnSelection")}return false};Y.prototype._setShowExecuteOnSelection=function(e){var t=this.getModel(Y.INNER_MODEL_NAME);if(t){t.setProperty("/showExecuteOnSelection",e)}};Y.prototype.setExecuteOnSelection=function(e){var t=this.getModel(this._sModelName);if(t&&this.oContext){t.setProperty(this.oContext+"/executeOnSelection",e)}};Y.prototype.getOriginalDefaultVariantKey=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/originalDefaultVariant")}return null};Y.prototype.setDefaultVariantKey=function(e){var t=this.getModel(this._sModelName);if(t&&this.oContext){t.setProperty(this.oContext+"/defaultVariant",e)}};Y.prototype.getDefaultVariantKey=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/defaultVariant")}return null};Y.prototype.setCurrentVariantKey=function(e){var t=this.getModel(this._sModelName);if(t&&this.oContext){t.setProperty(this.oContext+"/currentVariant",e)}return this};Y.prototype.getCurrentVariantKey=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/currentVariant")}return null};Y.prototype._assignPopoverTitle=function(){var e;var t;var i=this.getModel(this._sModelName);if(i&&this.oContext){e=i.getProperty(this.oContext+"/popoverTitle")}if(e!==undefined){t=this.getModel(Y.INNER_MODEL_NAME);if(t){t.setProperty("/popoverTitle",e)}}};Y.prototype.getVariants=function(){return this._getItems()};Y.prototype.setModified=function(e){var t=this.getModel(this._sModelName);if(t&&this.oContext){t.setProperty(this.oContext+"/modified",e)}};Y.prototype.getModified=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/modified")}return false};Y.prototype.getSelectedVariantText=function(e){var t=this._getItemByKey(e);if(t){return t.title}return""};Y.prototype.getStandardVariantKey=function(){var e=this._getItems();if(e&&e[0]){return e[0].key}return null};Y.prototype.getShowFavorites=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/showFavorites")}return false};Y.prototype._clearDeletedItems=function(){this._aDeletedItems=[]};Y.prototype._addDeletedItem=function(e){this._aDeletedItems.push(e)};Y.prototype._getDeletedItems=function(){return this._aDeletedItems};Y.prototype._getItems=function(){var e=[];if(this.oContext&&this.oContext.getObject()){e=this.oContext.getObject().variants.filter(function(e){if(!e.hasOwnProperty("visible")){return true}return e.visible})}return e};Y.prototype._getItemByKey=function(e){var t=null;var i=this._getItems();i.some(function(i){if(i.key===e){t=i}return t!==null});return t};Y.prototype._rebindControl=function(){this.oVariantText.unbindProperty("text");this.oVariantText.bindProperty("text",{path:"currentVariant",model:this._sModelName,formatter:function(e){var t="";if(e){t=this.getSelectedVariantText(e);this._setInvisibleText(t,this.getModified())}return t}.bind(this)});this.oVariantModifiedText.unbindProperty("visible");this.oVariantModifiedText.bindProperty("visible",{path:"modified",model:this._sModelName,formatter:function(e){var t=this.getCurrentVariantKey();if(t){this._setInvisibleText(this.getSelectedVariantText(t),e)}return e===null||e===undefined?false:e}.bind(this)})};Y.prototype.setModelName=function(e){if(this.getModelName()){this.oContext=null}this.setProperty("modelName",e);this._sModelName=e;this._rebindControl();return this};Y.prototype._setBindingContext=function(){var t;var i;if(!this.oContext){t=this.getModel(this._sModelName);if(t){i=this._getLocalId(t);if(i){this.oContext=new e(t,"/"+i);this.setBindingContext(this.oContext,this._sModelName);if(!this.getModelName()&&t.registerToModel){t.registerToModel(this)}this._assignPopoverTitle();this._registerPropertyChanges(t);this.fireInitialized()}}}};Y.prototype._getLocalId=function(e){if(this.getModelName()&&this._sModelName!==K.VARIANT_MODEL_NAME){return this.getId()}return e.getVariantManagementReferenceForControl(this)};Y.prototype._setModel=function(){this._setBindingContext()};Y.prototype._registerPropertyChanges=function(e){var i=new t(e,this.oContext+"/showExecuteOnSelection");i.attachChange(function(e){if(e&&e.oSource&&e.oSource.oModel&&e.oSource.sPath){var t=e.oSource.oModel.getProperty(e.oSource.sPath);if(t!==undefined){this._setShowExecuteOnSelection(t)}}}.bind(this));i=new t(e,this.oContext+"/variantsEditable");i.attachChange(function(e){if(e&&e.oSource&&e.oSource.oModel&&e.oSource.sPath){var t;var i=e.oSource.oModel.getProperty(e.oSource.sPath);t=this.getModel(Y.INNER_MODEL_NAME);if(t&&i!==undefined){t.setProperty("/editable",i)}}}.bind(this))};Y.prototype._obtainControl=function(e){if(e&&e.target&&e.target.id){var t=e.target.id;var i=t.indexOf("-inner");if(i>0){t=t.substring(0,i)}return sap.ui.getCore().byId(t)}return null};Y.prototype.handleOpenCloseVariantPopover=function(e){if(!this.bPopoverOpen){this._oCtrlRef=this._obtainControl(e);this._openVariantList()}else if(this.oVariantPopOver&&this.oVariantPopOver.isOpen()){this.oVariantPopOver.close()}else if(this.getInErrorState()&&this.oErrorVariantPopOver&&this.oErrorVariantPopOver.isOpen()){this.oErrorVariantPopOver.close()}};Y.prototype.getFocusDomRef=function(){return this.oVariantPopoverTrigger.getFocusDomRef()};Y.prototype.onclick=function(e){if(this.oVariantPopoverTrigger&&!this.bPopoverOpen){this.oVariantPopoverTrigger.focus()}this.handleOpenCloseVariantPopover(e)};Y.prototype.onkeyup=function(e){if(e.which===L.F4||e.which===L.SPACE||e.altKey===true&&e.which===L.ARROW_UP||e.altKey===true&&e.which===L.ARROW_DOWN){this._oCtrlRef=this._obtainControl(e);this._openVariantList()}};Y.prototype.onAfterRendering=function(){this.oVariantText.$().off("mouseover").on("mouseover",function(){this.oVariantPopoverTrigger.addStyleClass("sapUiFlVarMngmtTriggerBtnHover")}.bind(this));this.oVariantText.$().off("mouseout").on("mouseout",function(){this.oVariantPopoverTrigger.removeStyleClass("sapUiFlVarMngmtTriggerBtnHover")}.bind(this))};Y.prototype._openInErrorState=function(){var e;if(!this.oErrorVariantPopOver){e=new O({fitContainer:true,alignItems:sap.m.FlexAlignItems.Center,items:[new l({size:"4rem",color:"lightgray",src:"sap-icon://message-error"}),new E({titleStyle:sap.ui.core.TitleLevel.H2,text:this._oRb.getText("VARIANT_MANAGEMENT_ERROR_TEXT1")}),new _({textAlign:sap.ui.core.TextAlign.Center,text:this._oRb.getText("VARIANT_MANAGEMENT_ERROR_TEXT2")})]});e.addStyleClass("sapUiFlVarMngmtErrorPopover");this.oErrorVariantPopOver=new I(this.getId()+"-errorpopover",{title:{path:"/popoverTitle",model:Y.INNER_MODEL_NAME},contentWidth:"400px",placement:H.VerticalPreferredBottom,content:[new y(this.getId()+"-errorselpage",{showSubHeader:false,showNavButton:false,showHeader:false,content:[e]})],afterOpen:function(){this.bPopoverOpen=true}.bind(this),afterClose:function(){if(this.bPopoverOpen){setTimeout(function(){this.bPopoverOpen=false}.bind(this),200)}}.bind(this),contentHeight:"300px"});this.oErrorVariantPopOver.attachBrowserEvent("keyup",function(e){if(e.which===32){this.oErrorVariantPopOver.close()}}.bind(this))}if(this.bPopoverOpen){return}this.oErrorVariantPopOver.openBy(this.oVariantLayout)};Y.prototype._createVariantList=function(){if(this.oVariantPopOver){return}this.oVariantManageBtn=new N(this.getId()+"-manage",{text:this._oRb.getText("VARIANT_MANAGEMENT_MANAGE"),enabled:true,press:function(){this._openManagementDialog()}.bind(this),layoutData:new w({priority:G.Low})});this.oVariantSaveBtn=new N(this.getId()+"-mainsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),press:function(){this._handleVariantSave()}.bind(this),visible:{path:"modified",model:this._sModelName,formatter:function(e){return e}},type:U.Emphasized,layoutData:new w({priority:G.Low})});this.oVariantSaveAsBtn=new N(this.getId()+"-saveas",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVEAS"),press:function(){this._openSaveAsDialog()}.bind(this),layoutData:new w({priority:G.Low}),visible:{path:"/showSaveAs",model:Y.INNER_MODEL_NAME}});this._oVariantList=new x(this.getId()+"-list",{selectedKey:{path:"currentVariant",model:this._sModelName},itemPress:function(e){var t=null;if(e&&e.getParameters()){var i=e.getParameters().item;if(i){t=i.getKey()}}if(t){this.setCurrentVariantKey(t);this.fireEvent("select",{key:t});this.oVariantPopOver.close()}}.bind(this)});this._oVariantList.setNoDataText(this._oRb.getText("VARIANT_MANAGEMENT_NODATA"));var e=new sap.ui.core.Item({key:"{"+this._sModelName+">key}",text:"{"+this._sModelName+">title}"});this._oVariantList.bindAggregation("items",{path:"variants",model:this._sModelName,template:e});this._oSearchField=new p(this.getId()+"-search");this._oSearchField.attachLiveChange(function(e){this._triggerSearch(e,this._oVariantList)}.bind(this));this.oVariantSelectionPage=new y(this.getId()+"-selpage",{subHeader:new v({content:[this._oSearchField]}),content:[this._oVariantList],footer:new R({content:[new A(this.getId()+"-spacer"),this.oVariantSaveBtn,this.oVariantSaveAsBtn,this.oVariantManageBtn]}),showNavButton:false,showHeader:false,showFooter:{path:"/editable",model:Y.INNER_MODEL_NAME}});this.oVariantPopOver=new I(this.getId()+"-popover",{title:{path:"/popoverTitle",model:Y.INNER_MODEL_NAME},titleAlignment:"Auto",contentWidth:"400px",placement:H.VerticalPreferredBottom,content:[this.oVariantSelectionPage],afterOpen:function(){this.bPopoverOpen=true;this.oVariantPopoverTrigger.setPressed(true)}.bind(this),afterClose:function(){this.oVariantPopoverTrigger.setPressed(false);if(this.bPopoverOpen){setTimeout(function(){this.bPopoverOpen=false}.bind(this),200)}}.bind(this),contentHeight:"300px"});this.oVariantPopOver.addStyleClass("sapUiFlVarMngmtPopover");if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oVariantPopOver.addStyleClass("sapUiSizeCompact")}this.addDependent(this.oVariantPopOver)};Y.prototype.showSaveButton=function(e){if(e===false){this.oVariantSaveAsBtn.setType(U.Emphasized);this.oVariantSaveBtn.setVisible(false)}else{this.oVariantSaveAsBtn.setType(U.Default);this.oVariantSaveBtn.setVisible(true)}};Y.prototype._openVariantList=function(){var e;if(this.getInErrorState()){this._openInErrorState();return}if(this.bPopoverOpen){return}if(!this.oContext){return}this._createVariantList();this._oSearchField.setValue("");this._oVariantList.getBinding("items").filter(this._getFilters());this.oVariantSelectionPage.setShowSubHeader(this._oVariantList.getItems().length>9);this.showSaveButton(false);if(this.getModified()){e=this._getItemByKey(this.getCurrentVariantKey());if(e&&e.change){this.showSaveButton(true)}}var t=this._oCtrlRef?this._oCtrlRef:this.oVariantLayout;this._oCtrlRef=null;this.oVariantPopOver.openBy(t)};Y.prototype._triggerSearch=function(e,t){if(!e){return}var i=e.getParameters();if(!i){return}var n=i.newValue?i.newValue:"";var s=new a({path:"title",operator:o.Contains,value1:n});t.getBinding("items").filter(this._getFilters(s))};Y.prototype._createSaveAsDialog=function(){if(!this.oSaveAsDialog){this.oInputName=new T(this.getId()+"-name",{liveChange:function(){this._checkVariantNameConstraints(this.oInputName)}.bind(this)});var e=new b(this.getId()+"-namelabel",{text:this._oRb.getText("VARIANT_MANAGEMENT_NAME")});e.setLabelFor(this.oInputName);e.addStyleClass("sapUiFlVarMngmtSaveDialogLabel");this.oDefault=new V(this.getId()+"-default",{text:this._oRb.getText("VARIANT_MANAGEMENT_SETASDEFAULT"),visible:{path:"/showSetAsDefault",model:Y.INNER_MODEL_NAME},width:"100%"});this.oPublic=new V(this.getId()+"-public",{text:this._oRb.getText("VARIANT_MANAGEMENT_SETASPUBLIC"),visible:{path:"/showPublic",model:Y.INNER_MODEL_NAME},width:"100%"});this.oExecuteOnSelect=new V(this.getId()+"-execute",{text:this._oRb.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),visible:{path:"/showExecuteOnSelection",model:Y.INNER_MODEL_NAME},width:"100%"});this.oInputManualKey=new T(this.getId()+"-key",{liveChange:function(){this._checkVariantNameConstraints(this.oInputManualKey)}.bind(this)});this.oLabelKey=new b(this.getId()+"-keylabel",{text:this._oRb.getText("VARIANT_MANAGEMENT_KEY"),required:true});this.oLabelKey.setLabelFor(this.oInputManualKey);this.oSaveSave=new N(this.getId()+"-variantsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),type:U.Emphasized,press:function(){if(!this._bSaveOngoing){this._checkVariantNameConstraints(this.oInputName);if(this.oInputName.getValueState()==="Error"){this.oInputName.focus();return}this._bSaveOngoing=true;this._bSaveCanceled=false;this._handleVariantSaveAs(this.oInputName.getValue())}}.bind(this),enabled:true});var t=new u({defaultSpan:"L12 M12 S12"});if(this.getShowSetAsDefault()){t.addContent(this.oDefault)}t.addContent(this.oPublic);if(this._getShowExecuteOnSelection()){t.addContent(this.oExecuteOnSelect)}this.oSaveAsDialog=new C(this.getId()+"-savedialog",{title:this._oRb.getText("VARIANT_MANAGEMENT_SAVEDIALOG"),afterClose:function(){this._bSaveOngoing=false;if(this._sStyleClass){this._setShowPublic(this._bShowPublic);this.oSaveAsDialog.removeStyleClass(this._sStyleClass);if(this._oRolesComponentContainer){this.oSaveAsDialog.removeContent(this._oRolesComponentContainer)}this._sStyleClass=undefined;this._oRolesComponentContainer=null}}.bind(this),beginButton:this.oSaveSave,endButton:new N(this.getId()+"-variantcancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:this._cancelPressed.bind(this)}),content:[e,this.oInputName,this.oLabelKey,this.oInputManualKey,t],stretch:n.system.phone});this.oSaveAsDialog.isPopupAdaptationAllowed=function(){return false};this.oSaveAsDialog.addStyleClass("sapUiContentPadding");this.oSaveAsDialog.addStyleClass("sapUiFlVarMngmtSaveDialog");if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oSaveAsDialog.addStyleClass("sapUiSizeCompact")}this.addDependent(this.oSaveAsDialog)}};Y.prototype._cancelPressed=function(){this._bSaveCanceled=true;this.fireCancel();this.oSaveAsDialog.close()};Y.prototype._getSelectedContexts=function(){return this._oRolesComponentContainer.getComponentInstance().getSelectedContexts()};Y.prototype._setSelectedContexts=function(e){if(!e){e={role:[]}}this._oRolesComponentContainer.getComponentInstance().setSelectedContexts(e)};Y.prototype._isInErrorContexts=function(){return this._oRolesComponentContainer.getComponentInstance().hasErrorsAndShowErrorMessage()};Y.prototype._determineRolesSpecificText=function(e,t){if(!e){e={role:[]}}if(e&&t){t.setText(this._oRb.getText(e.role&&e.role.length>0?"VARIANT_MANAGEMENT_VISIBILITY_RESTRICTED":"VARIANT_MANAGEMENT_VISIBILITY_NON_RESTRICTED"))}};Y.prototype._checkAndAddRolesContainerToManageDialog=function(){if(this._oRolesComponentContainer&&this._oRolesDialog){var e=null;this._oRolesDialog.getContent().some(function(t){if(t===this._oRolesComponentContainer){e=t;return true}return false}.bind(this));if(!e){this._oRolesDialog.addContent(this._oRolesComponentContainer)}}};Y.prototype._createRolesDialog=function(){if(!this._oRolesDialog){this._oRolesDialog=new C(this.getId()+"-roledialog",{draggable:true,resizable:true,contentWidth:"40%",title:this._oRb.getText("VARIANT_MANAGEMENT_SELECTROLES_DIALOG"),beginButton:new N(this.getId()+"-rolesave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),type:U.Emphasized,press:function(){if(!this._checkAndCreateContextInfoChanges(this._oCurrentContextsKey,this._oTextControl)){return}this._oRolesDialog.close()}.bind(this)}),endButton:new N(this.getId()+"-rolecancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){this._oRolesDialog.close()}.bind(this)}),content:[this._oRolesComponentContainer],stretch:n.system.phone});this._oRolesDialog.setParent(this);this._oRolesDialog.addStyleClass("sapUiContentPadding");this._oRolesDialog.addStyleClass(this._sStyleClass);this._oRolesDialog.isPopupAdaptationAllowed=function(){return false}}this._checkAndAddRolesContainerToManageDialog()};Y.prototype._openRolesDialog=function(e,t){this._createRolesDialog();this._oCurrentContextsKey=e.key;this._oTextControl=t;this._setSelectedContexts(e.contexts);this._oRolesDialog.open()};Y.prototype._checkAndCreateContextInfoChanges=function(e,t){if(e){if(this._oRolesComponentContainer){try{if(!this._isInErrorContexts()){var i=this._getSelectedContexts();var a=this._getItemByKey(e);if(a){a.contexts=i;this._determineRolesSpecificText(i,t)}}else{return false}}catch(e){return false}}return true}return false};Y.prototype._checkAndAddRolesContainerToSaveAsDialog=function(){if(this._oRolesComponentContainer&&this.oSaveAsDialog){var e=null;this.oSaveAsDialog.getContent().some(function(t){if(t===this._oRolesComponentContainer){e=t;return true}return false}.bind(this));this._setSelectedContexts({role:[]});if(!e){this.oSaveAsDialog.addContent(this._oRolesComponentContainer)}}};Y.prototype.openSaveAsDialogForKeyUser=function(e,t){this._openSaveAsDialog(true);this.oSaveAsDialog.addStyleClass(e);this._sStyleClass=e;this._bShowPublic=this._getShowPublic();this._setShowPublic(false);if(t){Promise.all([t]).then(function(e){this._oRolesComponentContainer=e[0];this._checkAndAddRolesContainerToSaveAsDialog();this.oSaveAsDialog.open()}.bind(this))}else{this.oSaveAsDialog.open()}};Y.prototype._openSaveAsDialog=function(e){this._createSaveAsDialog();this.oInputName.setValue(this.getSelectedVariantText(this.getCurrentVariantKey()));this.oInputName.setEnabled(true);this.oInputName.setValueState(j.None);this.oInputName.setValueStateText(null);this.oDefault.setSelected(false);this.oPublic.setSelected(false);this.oExecuteOnSelect.setSelected(false);if(this.oVariantPopOver){this.oVariantPopOver.close()}if(this.getManualVariantKey()){this.oInputManualKey.setVisible(true);this.oInputManualKey.setEnabled(true);this.oInputManualKey.setValueState(j.None);this.oInputManualKey.setValueStateText(null);this.oLabelKey.setVisible(true)}else{this.oInputManualKey.setVisible(false);this.oLabelKey.setVisible(false)}if(!e){this.oSaveAsDialog.open()}};Y.prototype._handleVariantSaveAs=function(e){var t=null;var i=e.trim();var a=this.oInputManualKey.getValue().trim();if(i===""){this.oInputName.setValueState(j.Error);this.oInputName.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));return}if(this.getManualVariantKey()){if(a===""){this.oInputManualKey.setValueState(j.Error);this.oInputManualKey.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));return}t=a}if(this.oSaveAsDialog){this.oSaveAsDialog.close()}if(this.oDefault.getSelected()){this.setDefaultVariantKey(t)}this.setModified(false);this.fireSave({key:t,name:i,overwrite:false,def:this.oDefault.getSelected(),execute:this.oExecuteOnSelect.getSelected(),public:this._sStyleClass?undefined:this.oPublic.getSelected(),contexts:this._sStyleClass?this._getContextInfoChanges():undefined})};Y.prototype._getContextInfoChanges=function(){if(this._oRolesComponentContainer){try{if(!this._isInErrorContexts()){return this._getSelectedContexts()}}catch(e){return null}}return null};Y.prototype._handleVariantSave=function(){var e=this._getItemByKey(this.getCurrentVariantKey());var t=false;if(this.getDefaultVariantKey()===e.key){t=true}if(this.oVariantPopOver){this.oVariantPopOver.close()}this.fireSave({name:e.title,overwrite:true,key:e.key,def:t});this.setModified(false)};Y.prototype.openManagementDialog=function(e,t,i){if(e&&this.oManagementDialog){this.oManagementDialog.destroy();this.oManagementDialog=undefined}if(t){this._sStyleClass=t;this._bShowPublic=this._getShowPublic();this._setShowPublic(false)}if(i){Promise.all([i]).then(function(e){this._oRolesComponentContainer=e[0];this._setShowContexts(!!this._oRolesComponentContainer);this._openManagementDialog();if(this._sStyleClass){this.oManagementDialog.addStyleClass(this._sStyleClass)}}.bind(this))}else{this._setShowContexts(false);this._openManagementDialog();if(this._sStyleClass){this.oManagementDialog.addStyleClass(this._sStyleClass)}}};Y.prototype._triggerSearchInManageDialog=function(e,t){if(!e){return}var i=e.getParameters();if(!i){return}var n=i.newValue?i.newValue:"";var s=[this._getVisibleFilter(),new a({filters:[new a({path:"title",operator:o.Contains,value1:n}),new a({path:"author",operator:o.Contains,value1:n})],and:false})];t.getBinding("items").filter(s);this._bDeleteOccured=true};Y.prototype.getManageDialog=function(){return this.oManagementDialog};Y.prototype._createManagementDialog=function(){if(!this.oManagementDialog||this.oManagementDialog.bIsDestroyed){this.oManagementTable=new M(this.getId()+"-managementTable",{contextualWidth:"Auto",fixedLayout:false,growing:true,columns:[new f({width:"3rem",visible:{path:"showFavorites",model:this._sModelName}}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_NAME")}),width:"16rem"}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_VARIANTTYPE"),wrappingType:"Hyphenated"}),visible:{path:"/showPublic",model:Y.INNER_MODEL_NAME},demandPopin:true,popinDisplay:z.Inline,minScreenWidth:W.Tablet}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_DEFAULT"),wrappingType:"Hyphenated"}),hAlign:X.Center,demandPopin:true,popinDisplay:z.Block,minScreenWidth:W.Tablet,visible:{path:"/showSetAsDefault",model:Y.INNER_MODEL_NAME}}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),wrappingType:"Hyphenated"}),hAlign:this.getDisplayTextForExecuteOnSelectionForStandardVariant()?X.Begin:X.Center,demandPopin:true,popinDisplay:z.Block,minScreenWidth:W.Tablet,visible:{path:"/showExecuteOnSelection",model:Y.INNER_MODEL_NAME}}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_VISIBILITY"),wrappingType:"Hyphenated"}),width:"8rem",demandPopin:true,popinDisplay:z.Inline,minScreenWidth:W.Tablet,visible:{path:"/showContexts",model:Y.INNER_MODEL_NAME}}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_AUTHOR")}),demandPopin:true,popinDisplay:z.Block,minScreenWidth:W.Tablet}),new f({hAlign:X.Center}),new f({visible:false})]});this.oManagementSave=new N(this.getId()+"-managementsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),enabled:true,type:U.Emphasized,press:function(){this._handleManageSavePressed()}.bind(this)});this.oManagementCancel=new N(this.getId()+"-managementcancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){this._resumeManagementTableBinding();this.oManagementDialog.close();this._handleManageCancelPressed()}.bind(this)});this.oManagementDialog=new C(this.getId()+"-managementdialog",{contentWidth:"64%",resizable:true,draggable:true,title:this._oRb.getText("VARIANT_MANAGEMENT_MANAGEDIALOG"),beginButton:this.oManagementSave,endButton:this.oManagementCancel,afterClose:function(){if(this._sStyleClass){this._setShowPublic(this._bShowPublic);this.oManagementDialog.removeStyleClass(this._sStyleClass);this._sStyleClass=undefined;this._oRolesComponentContainer=null}}.bind(this),content:[this.oManagementTable],stretch:n.system.phone});this.oManagementDialog.isPopupAdaptationAllowed=function(){return false};this._oSearchFieldOnMgmtDialog=new p;this._oSearchFieldOnMgmtDialog.attachLiveChange(function(e){this._triggerSearchInManageDialog(e,this.oManagementTable)}.bind(this));var e=new m(this.getId()+"-mgmHeaderSearch",{contentMiddle:[this._oSearchFieldOnMgmtDialog]});this.oManagementDialog.setSubHeader(e);if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oManagementDialog.addStyleClass("sapUiSizeCompact")}this.addDependent(this.oManagementDialog);this.oManagementTable.bindAggregation("items",{path:"variants",model:this._sModelName,factory:this._templateFactoryManagementDialog.bind(this),filters:this._getVisibleFilter()});this._bDeleteOccured=false}};Y.prototype._setFavoriteIcon=function(e,t){if(e){e.setSrc(t?"sap-icon://favorite":"sap-icon://unfavorite");e.setTooltip(this._oRb.getText(t?"VARIANT_MANAGEMENT_FAV_DEL_TOOLTIP":"VARIANT_MANAGEMENT_FAV_ADD_TOOLTIP"));e.setAlt(this._oRb.getText(t?"VARIANT_MANAGEMENT_FAV_DEL_ACC":"VARIANT_MANAGEMENT_FAV_ADD_ACC"))}};Y.prototype._templateFactoryManagementDialog=function(e,t){var i=null;var a;var o;var n;var s;var r;var h=t.getObject();if(!h){return undefined}var u=function(e){this._checkVariantNameConstraints(e.oSource,e.oSource.getBindingContext(this._sModelName).getObject().key)}.bind(this);var d=function(e){this._handleManageTitleChanged(e.oSource.getBindingContext(this._sModelName).getObject())}.bind(this);var p=function(e){this._handleManageDefaultVariantChange(e.oSource,e.oSource.getBindingContext(this._sModelName).getObject(),e.getParameters().selected)}.bind(this);var f=function(e){this._handleManageExecuteOnSelectionChanged(e.oSource.getBindingContext(this._sModelName).getObject())}.bind(this);var m=function(e){this._handleManageDeletePressed(e.oSource.getBindingContext(this._sModelName).getObject());var t=e.oSource.getParent();if(t){t.setVisible(false)}this._reCheckVariantNameConstraints()}.bind(this);var M=function(e){this._handleManageFavoriteChanged(e.oSource,e.oSource.getBindingContext(this._sModelName).getObject())}.bind(this);var y=function(e){var t=e.oSource.getBindingContext(this._sModelName).getObject();this._openRolesDialog(t,e.oSource.getParent().getItems()[0])}.bind(this);if(h.rename){n=new T({liveChange:u,change:d,value:"{"+this._sModelName+">title}"})}else{n=new D({title:"{"+this._sModelName+">title}"});if(i){n.setTooltip(i)}}a=new N({icon:"sap-icon://decline",enabled:true,type:U.Transparent,press:m,tooltip:this._oRb.getText("VARIANT_MANAGEMENT_DELETE"),visible:h.remove});this._assignColumnInfoForDeleteButton(a);o=this.oContext.getPath();var v=new l({src:{path:"favorite",model:this._sModelName,formatter:function(e){return e?"sap-icon://favorite":"sap-icon://unfavorite"}},tooltip:{path:"favorite",model:this._sModelName,formatter:function(e){return this._oRb.getText(e?"VARIANT_MANAGEMENT_FAV_DEL_TOOLTIP":"VARIANT_MANAGEMENT_FAV_ADD_TOOLTIP")}.bind(this)},press:M});if(this.getStandardVariantKey()===h.key||this.getDefaultVariantKey()===h.key){v.addStyleClass("sapUiFlVarMngmtFavNonInteractiveColor")}else{v.addStyleClass("sapUiFlVarMngmtFavColor")}if(this.getDisplayTextForExecuteOnSelectionForStandardVariant()&&this.getStandardVariantKey()===h.key){s=new V({wrapping:true,text:this.getDisplayTextForExecuteOnSelectionForStandardVariant(),select:f,selected:"{"+this._sModelName+">executeOnSelect}"})}else{s=new V({text:"",select:f,selected:"{"+this._sModelName+">executeOnSelect}"})}if(this._sStyleClass&&h.key!==this.getStandardVariantKey()){var A=new _({wrapping:false});this._determineRolesSpecificText(h.contexts,A);var S=new l({src:"sap-icon://edit",press:y});S.addStyleClass("sapUiFlVarMngmtRolesEdit");S.setTooltip(this._oRb.getText("VARIANT_MANAGEMENT_VISIBILITY_ICON_TT"));r=new P({items:[A,S]})}else{r=new _}return new c({cells:[v,n,new _({text:{path:"sharing",model:this._sModelName,formatter:function(e){return this._oRb.getText(e==="private"?"VARIANT_MANAGEMENT_PRIVATE":"VARIANT_MANAGEMENT_PUBLIC")}.bind(this)},textAlign:"Center"}),new g({groupName:this.getId(),select:p,selected:{path:o+"/defaultVariant",model:this._sModelName,formatter:function(e){return h.key===e}}}),s,r,new _({text:"{"+this._sModelName+">author}",textAlign:"Begin"}),a,new _({text:"{"+this._sModelName+">key}"})]})};Y.prototype._openManagementDialog=function(){this._createManagementDialog();if(this.oVariantPopOver){this.oVariantPopOver.close()}this._suspendManagementTableBinding();this._clearDeletedItems();this._oSearchFieldOnMgmtDialog.setValue("");if(this._bDeleteOccured){this._bDeleteOccured=false;this.oManagementTable.bindAggregation("items",{path:"variants",model:this._sModelName,factory:this._templateFactoryManagementDialog.bind(this),filters:this._getVisibleFilter()})}this.oManagementDialog.open()};Y.prototype._assignColumnInfoForDeleteButton=function(e){if(!this._oInvisibleDeleteColumnName){this._oInvisibleDeleteColumnName=new s({text:this._oRb.getText("VARIANT_MANAGEMENT_ACTION_COLUMN")});this.oManagementDialog.addContent(this._oInvisibleDeleteColumnName)}if(this._oInvisibleDeleteColumnName){e.addAriaLabelledBy(this._oInvisibleDeleteColumnName)}};Y.prototype._toggleIconActivityState=function(e,t,i){if(!e){return}if(t.key===this.getStandardVariantKey()){return}if(i&&e.hasStyleClass("sapUiFlVarMngmtFavColor")){e.removeStyleClass("sapUiFlVarMngmtFavColor");e.addStyleClass("sapUiFlVarMngmtFavNonInteractiveColor")}else if(e.hasStyleClass("sapUiFlVarMngmtFavNonInteractiveColor")){e.removeStyleClass("sapUiFlVarMngmtFavNonInteractiveColor");e.addStyleClass("sapUiFlVarMngmtFavColor")}};Y.prototype._handleManageDefaultVariantChange=function(e,t,i){var a=t.key;if(e){var o=e.getParent().getCells()[Y.COLUMN_FAV_IDX];if(i){if(this.getShowFavorites()&&!t.favorite){t.favorite=true;this._setFavoriteIcon(o,true)}this.setDefaultVariantKey(a)}this._toggleIconActivityState(o,t,i)}};Y.prototype._handleManageCancelPressed=function(){var e;var t;this._getDeletedItems().forEach(function(e){e.visible=true});this._getItems().forEach(function(e){e.title=e.originalTitle;e.favorite=e.originalFavorite;e.executeOnSelection=e.originalExecuteOnSelection;e.contexts=e.originalContexts});e=this.getOriginalDefaultVariantKey();if(e!==this.getDefaultVariantKey()){this.setDefaultVariantKey(e)}t=this.getModel(this._sModelName);if(t){t.checkUpdate()}};Y.prototype._handleManageFavoriteChanged=function(e,t){if(this.getStandardVariantKey()===t.key){return}if(this.getDefaultVariantKey()===t.key&&t.favorite){return}t.favorite=!t.favorite;this._setFavoriteIcon(e,t.favorite)};Y.prototype._getRowForKey=function(e){var t=null;if(this.oManagementTable){this.oManagementTable.getItems().some(function(i){if(e===i.getCells()[0].getBindingContext(this._sModelName).getObject().key){t=i}return t!==null}.bind(this))}return t};Y.prototype._handleManageDeletePressed=function(e){var t;var i=e.key;if(this.getStandardVariantKey()===i){return}e.visible=false;this._addDeletedItem(e);if(i===this.getDefaultVariantKey()){this.setDefaultVariantKey(this.getStandardVariantKey());if(this.getShowFavorites()){var a=this._getItemByKey(this.getStandardVariantKey());if(a&&!a.favorite){var o=this._getRowForKey(this.getStandardVariantKey());if(o){a.favorite=true;this._setFavoriteIcon(o.getCells()[Y.COLUMN_FAV_IDX],true)}}}}t=this.getModel(this._sModelName);if(t){t.checkUpdate()}this.oManagementCancel.focus()};Y.prototype._handleManageExecuteOnSelectionChanged=function(){};Y.prototype._handleManageTitleChanged=function(){};Y.prototype._handleManageSavePressed=function(){if(this._anyInErrorState(this.oManagementTable)){return}this._getDeletedItems().some(function(e){if(e.key===this.getCurrentVariantKey()){var t=this.getStandardVariantKey();this.setModified(false);this.setCurrentVariantKey(t);this.fireEvent("select",{key:t});return true}return false}.bind(this));this.fireManage();this._resumeManagementTableBinding();this.oManagementDialog.close()};Y.prototype._resumeManagementTableBinding=function(){if(this.oManagementTable){var e=this.oManagementTable.getBinding("items");if(e){e.resume()}}};Y.prototype._suspendManagementTableBinding=function(){if(this.oManagementTable){var e=this.oManagementTable.getBinding("items");if(e){e.suspend()}}};Y.prototype._anyInErrorState=function(e){var t;var i;var a=false;if(e){t=e.getItems();t.some(function(e){i=e.getCells()[Y.COLUMN_NAME_IDX];if(i&&i.getValueState&&i.getValueState()===j.Error){a=true}return a})}return a};Y.prototype._getFilters=function(e){var t=[];if(e){t.push(e)}t.push(this._getVisibleFilter());if(this.getShowFavorites()){t.push(this._getFilterFavorites())}return t};Y.prototype._getVisibleFilter=function(){return new a({path:"visible",operator:o.EQ,value1:true})};Y.prototype._getFilterFavorites=function(){return new a({path:"favorite",operator:o.EQ,value1:true})};Y.prototype._verifyVariantNameConstraints=function(e,t){if(!e){return}var i=e.getValue();i=i.trim();if(!this._checkIsDuplicate(i,t)){if(i===""){e.setValueState(j.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"))}else if(i.indexOf("{")>-1){e.setValueState(j.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_NOT_ALLOWED_CHAR",["{"]))}else if(i.length>Y.MAX_NAME_LEN){e.setValueState(j.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_MAX_LEN",[Y.MAX_NAME_LEN]))}else{e.setValueState(j.None);e.setValueStateText(null)}}else{e.setValueState(j.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_DUPLICATE"))}};Y.prototype._checkVariantNameConstraints=function(e,t){this._verifyVariantNameConstraints(e,t);if(this.oManagementDialog&&this.oManagementDialog.isOpen()){this._reCheckVariantNameConstraints()}};Y.prototype._reCheckVariantNameConstraints=function(){var e;var t=false;if(this.oManagementTable){e=this.oManagementTable.getItems();e.some(function(e){var i=e.getBindingContext(this._sModelName).getObject();if(i&&i.visible){var a=e.getCells()[Y.COLUMN_NAME_IDX];if(a&&a.getValueState&&a.getValueState()===j.Error){this._verifyVariantNameConstraints(a,i.key);if(a.getValueState()===j.Error){t=true}}}return t}.bind(this))}return t};Y.prototype._checkIsDuplicate=function(e,t){if(this.oManagementDialog&&this.oManagementDialog.isOpen()){return this._checkIsDuplicateInManageTable(e,t)}return this._checkIsDuplicateInModel(e,t)};Y.prototype._checkIsDuplicateInModel=function(e,t){var i=false;var a=this._getItems();var o=e.toLowerCase();a.some(function(e){if(e.title.toLowerCase()===o){if(t&&t===e.key){return false}i=true}return i});return i};Y.prototype._checkIsDuplicateInManageTable=function(e,t){var i;var a=false;var o=e.toLowerCase();if(this.oManagementTable){i=this.oManagementTable.getItems();i.some(function(e){var i;var n=e.getBindingContext(this._sModelName).getObject();if(n&&n.visible){var s=e.getCells()[Y.COLUMN_NAME_IDX];if(s&&n.key!==t){if(s.isA("sap.m.Input")){i=s.getValue().toLowerCase()}else{i=s.getTitle().toLowerCase()}if(i===o){a=true}}}return a}.bind(this))}return a};Y.prototype.exit=function(){var e;if(this.oVariantInvisibleText){this.oVariantInvisibleText.destroy(true);this.oVariantInvisibleText=undefined}if(this.oDefault&&!this.oDefault._bIsBeingDestroyed){this.oDefault.destroy()}this.oDefault=undefined;if(this.oPublic&&!this.oPublic._bIsBeingDestroyed){this.oPublic.destroy()}this.oPublic=undefined;if(this.oExecuteOnSelect&&!this.oExecuteOnSelect._bIsBeingDestroyed){this.oExecuteOnSelect.destroy()}this.oExecuteOnSelect=undefined;this._oRb=undefined;this.oContext=undefined;this._oVariantList=undefined;this.oVariantSelectionPage=undefined;this.oVariantLayout=undefined;this.oVariantText=undefined;this.oVariantModifiedText=undefined;this.oVariantPopoverTrigger=undefined;this._oSearchField=undefined;this._oSearchFieldOnMgmtDialog=undefined;e=this.getModel(Y.INNER_MODEL_NAME);if(e){e.destroy()}this._oRolesComponentContainer=null;this._sStyleClass=null;this._fRegisteredApplyAutomaticallyOnStandardVariant=null;if(this._oRolesDialog){this._oRolesDialog.destroy();this._oRolesDialog=null}};return Y});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/appVariant/AppVariantInlineChange",["sap/ui/thirdparty/jquery","sap/ui/base/ManagedObject","sap/ui/fl/descriptorRelated/internal/Utils","sap/base/Log"],function(t,i,n,e){"use strict";var o=i.extend("sap.ui.fl.write._internal.appVariant.AppVariantInlineChange",{metadata:{library:"sap.ui.fl"},constructor:function(o){i.apply(this);if(!t.isPlainObject(o)){e.error("Constructor : sap.ui.fl.write._internal.appVariant.AppVariantInlineChange: mPropertyBag is not defined")}n.checkTexts(o.texts);this._oDefinition=o;return this}});o.prototype._getChangeType=function(){return this._oDefinition.changeType};o.prototype.getMap=function(){return this._oDefinition};o.prototype.getContent=function(){return this._oDefinition.content};o.prototype.getTexts=function(){return this._oDefinition.texts};o.prototype.getHostingIdSuffix=function(){return this._sHostingIdSuffix};o.prototype.setHostingIdSuffix=function(t){this._sHostingIdSuffix=t};o.prototype.replaceHostingIdForTextKey=function(t,i,n,e){var o=JSON.stringify(n);if(e){Object.keys(e).forEach(function(n){var e;if(n.indexOf(i)===0){e=t+n.substring(i.length);this._oDefinition.texts[e]=this._oDefinition.texts[n];delete this._oDefinition.texts[n];o=o.split("{{"+n+"}}").join("{{"+e+"}}")}},this);this._oDefinition.content=JSON.parse(o)}};o.prototype.setHostingIdForTextKey=function(t){if(this.getHostingIdSuffix()){var i=t+this.getHostingIdSuffix();if(this._oDefinition.texts){this._oDefinition.texts[i]=this._oDefinition.texts[""];delete this._oDefinition.texts[""]}}};return o});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/appVariant/AppVariantInlineChangeFactory",["sap/ui/fl/descriptorRelated/internal/Utils","sap/ui/fl/write/_internal/appVariant/AppVariantInlineChange"],function(e,t){"use strict";function n(e){if(!e.texts){e.texts={"":e.content};e.content={}}}function r(e){var n=new t(e);return Promise.resolve(n)}var c={};c.createNew=function(e){var n=new t(e);return Promise.resolve(n)};c.createDescriptorInlineChange=function(e){var t=e.changeType.replace("appdescr","create");return this[t](e)};c.create_ovp_addNewCard=function(t){e.checkParameterAndType(t.content,"card","object");return r(t)};c.create_ovp_removeCard=function(t){e.checkParameterAndType(t.content,"cardId","string");return r(t)};c.create_ovp_changeCard=function(t){e.checkParameterAndType(t.content,"cardId","string");e.checkEntityPropertyChange(t.content);return r(t)};c.create_app_addNewInbound=function(t){e.checkParameterAndType(t.content,"inbound","object");return r(t)};c.create_app_removeInbound=function(t){e.checkParameterAndType(t.content,"inboundId","string");return r(t)};c.create_app_removeAllInboundsExceptOne=function(t){e.checkParameterAndType(t.content,"inboundId","string");return r(t)};c.create_app_changeInbound=function(t){e.checkParameterAndType(t.content,"inboundId","string");e.checkEntityPropertyChange(t.content);return r(t)};c.create_app_addNewOutbound=function(t){e.checkParameterAndType(t.content,"outbound","object");return r(t)};c.create_app_removeOutbound=function(t){e.checkParameterAndType(t.content,"outboundId","string");return r(t)};c.create_app_changeOutbound=function(t){e.checkParameterAndType(t.content,"outboundId","string");e.checkEntityPropertyChange(t.content);return r(t)};c.create_app_addNewDataSource=function(t){e.checkParameterAndType(t.content,"dataSource","object");return r(t)};c.create_app_removeDataSource=function(t){e.checkParameterAndType(t.content,"dataSourceId","string");return r(t)};c.create_app_changeDataSource=function(t){e.checkParameterAndType(t.content,"dataSourceId","string");e.checkEntityPropertyChange(t.content);return r(t)};var a={BEGINNING:"BEGINNING",END:"END"};c.create_app_addAnnotationsToOData=function(t){e.checkParameterAndType(t.content,"dataSourceId","string");e.checkParameterAndType(t.content,"annotations","array");e.checkParameterAndType(t.content,"dataSource","object");return r(t)};c.create_app_setTitle=function(e){n(e);return r(e).then(function(e){e.setHostingIdSuffix("_sap.app.title");return e})};c.create_app_setSubTitle=function(e){n(e);return r(e).then(function(e){e.setHostingIdSuffix("_sap.app.subTitle");return e})};c.create_app_setShortTitle=function(e){n(e);return r(e).then(function(e){e.setHostingIdSuffix("_sap.app.shortTitle");return e})};c.create_app_setDescription=function(e){n(e);return r(e).then(function(e){e.setHostingIdSuffix("_sap.app.description");return e})};c.create_app_setInfo=function(e){n(e);return r(e).then(function(e){e.setHostingIdSuffix("_sap.app.info");return e})};c.create_app_setAch=function(t){e.checkParameterAndType(t.content,"ach","string");return r(t)};c.create_app_setDestination=function(t){e.checkParameterAndType(t.content,"destination","object");return r(t)};c.create_app_setKeywords=function(t){e.checkParameterAndType(t.content,"keywords","array");return r(t)};c.create_app_addTechnicalAttributes=function(t){e.checkParameterAndType(t.content,"technicalAttributes","array");return r(t)};c.create_app_removeTechnicalAttributes=function(t){e.checkParameterAndType(t.content,"technicalAttributes","array");return r(t)};c.create_app_addCdsViews=function(t){e.checkParameterAndType(t.content,"cdsViews","array");return r(t)};c.create_app_removeCdsViews=function(t){e.checkParameterAndType(t.content,"cdsViews","array");return r(t)};c.create_flp_setConfig=function(t){e.checkParameterAndType(t.content,"config","object");return r(t)};c.create_ui5_addNewModel=function(t){e.checkParameterAndType(t.content,"model","object");return r(t)};c.create_ui5_removeModel=function(t){e.checkParameterAndType(t.content,"modelId","string");return r(t)};c.create_ui5_addNewModelEnhanceWith=function(t){e.checkParameterAndType(t.content,"modelId","string");return r(t)};c.create_ui5_replaceComponentUsage=function(t){e.checkParameterAndType(t.content,"componentUsageId","string");e.checkParameterAndType(t.content,"componentUsage","object");return r(t)};c.create_ui5_addLibraries=function(t){e.checkParameterAndType(t.content,"libraries","object");return r(t)};c.create_ui5_addComponentUsages=function(t){e.checkParameterAndType(t.content,"componentUsages","object");return r(t)};c.create_ui5_setMinUI5Version=function(t){e.checkParameterAndType(t.content,"minUI5Version","string");return r(t)};c.create_smb_addNamespace=function(t){e.checkParameterAndType(t.content,"smartBusinessApp","object");return r(t)};c.create_smb_changeNamespace=function(t){e.checkParameterAndType(t.content,"smartBusinessApp","object");return r(t)};c.create_ui_generic_app_setMainPage=function(t){e.checkParameterAndType(t.content,"page","object");return r(t)};c.create_ui_setIcon=function(t){e.checkParameterAndType(t.content,"icon","string");return r(t)};c.create_ui_setDeviceTypes=function(t){e.checkParameterAndType(t.content,"deviceTypes","object");return r(t)};c.create_url_setUri=function(t){e.checkParameterAndType(t.content,"uri","string");return r(t)};c.create_fiori_setRegistrationIds=function(t){e.checkParameterAndType(t.content,"registrationIds","array");return r(t)};c.create_ui5_setFlexExtensionPointEnabled=function(t){e.checkParameterAndType(t.content,"flexExtensionPointEnabled","boolean");e.checkParameterAndType(t,"changeType","string");return r(t)};c.create_ui5_changeModel=function(t){e.checkParameterAndType(t.content,"modelId","string");e.checkEntityPropertyChange(t.content);return r(t)};c.create_fiori_setAbstract=function(t){e.checkParameterAndType(t.content,"abstract","boolean");e.checkParameterAndType(t,"changeType","string");return r(t)};return c});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/LrepConnector",["sap/base/util/merge","sap/ui/fl/write/connectors/BaseConnector","sap/ui/fl/initial/_internal/connectors/LrepConnector","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils","sap/ui/fl/write/_internal/transport/TransportSelection","sap/ui/fl/registry/Settings","sap/ui/fl/Layer","sap/ui/fl/LayerUtils","sap/ui/fl/Utils","sap/ui/fl/Change","sap/ui/core/Component","sap/ui/core/BusyIndicator","sap/base/Log","sap/m/MessageBox","sap/base/util/restricted/_pick"],function(e,t,n,r,a,i,s,o,u,l,c,f,p,d,g,v){"use strict";var T={FLEX_INFO:"/flex/info/",PUBLISH:"/actions/make_changes_transportable/",CHANGES:"/changes/",CONDENSE:"/actions/condense/",VARIANTS:"/variants/",SETTINGS:"/flex/settings",TOKEN:"/actions/getcsrftoken/",APPVARIANTS:"/appdescr_variants/",APPVARIANTS_OVERVIEW:"/app_variant_overview/",UI2PERSONALIZATION:"/ui2personalization/",CONTEXTS:"/flex/contexts/",VERSIONS:{GET:"/flex/versions/",ACTIVATE:"/flex/versions/activate/",DISCARD:"/flex/versions/draft/"}};var E=function(e){var t;if(e.isLegacyVariant){t=T.VARIANTS}else if(e.isAppVariant){t=T.APPVARIANTS}else if(e.isContextSharing){t=T.CONTEXTS}else if(e.isCondensingEnabled){t=T.CONDENSE}else{t=T.CHANGES}var i=e.transport?{changelist:e.transport}:{};if(e.skipIam){i.skipIam=e.skipIam}if(e.parentVersion){i.parentVersion=e.parentVersion}r.addLanguageInfo(i);n._addClientInfo(i);if(e.flexObject&&!e.isAppVariant){e.fileName=e.flexObject.fileName}var s=r.getUrl(t,e,i);delete e.reference;delete e.fileName;var o=r.getUrl(T.TOKEN,e);var u=a.getRequestOptions(n,o,e.flexObjects||e.flexObject,"application/json; charset=utf-8","json");return a.sendRequest(s,e.method,u)};var O=function(e){var t=e.getDefinition().layer===o.VENDOR?e.getPackage():"";return new c({fileName:e.getDefinition().fileName,fileType:e.getDefinition().fileType,packageName:t,namespace:e.getNamespace()})};var R=function(e){var t;if(e.transport){t=Promise.resolve({transport:e.transport})}else if(e.isForSmartBusiness){return Promise.resolve()}else{var n=O(e.appVariant);t=(new i).openTransportSelection(n)}return t.then(function(e){if(e==="cancel"){return Promise.reject("cancel")}if(e&&e.transport!==undefined){return e.transport}return Promise.reject(new Error("Transport information could not be determined"))})};function N(e){e.version=e.versionId;delete e.versionId;return e}return e({},t,{initialConnector:n,layers:n.layers,reset:function(e){p.show(0);var t=[];var u=Promise.resolve();if(e.layer!==o.USER){t=e.changes;u=s.getInstance().then(function(n){if(!n.isProductiveSystem()){return(new i).setTransports(t,f.get(e.reference)).then(function(){t.some(function(t){if(t.getRequest()){e.changelist=t.getRequest();return true}return false})})}})}return u.then(function(){p.show(0);var t=["reference","layer","changelist","generator"];var i=v(e,t);n._addClientInfo(i);if(e.selectorIds){i.selector=e.selectorIds}if(e.changeTypes){i.changeType=e.changeTypes}delete e.reference;var s=r.getUrl(T.CHANGES,e,i);var o=r.getUrl(T.TOKEN,e);var u=a.getRequestOptions(n,o);return a.sendRequest(s,"DELETE",u).then(function(e){if(e&&e.response){e.response.forEach(function(e){e.fileName=e.name;delete e.name})}p.hide();return e}).catch(function(e){p.hide();return Promise.reject(e)})})},publish:function(e){var t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");var n=function(n){p.hide();var r=t.getText("MSG_TRANSPORT_ERROR",n?[n.message||n]:undefined);var a=t.getText("HEADER_TRANSPORT_ERROR");d.error("transport error"+n);g.show(r,{icon:g.Icon.ERROR,title:a,styleClass:e.transportDialogSettings.styleClass});return"Error"};var r=new i;return r.openTransportSelection(null,e.transportDialogSettings.rootControl,e.transportDialogSettings.styleClass).then(function(n){if(r.checkTransportInfo(n)){p.show(0);var a={reference:e.reference,layer:e.layer};return r._prepareChangesForTransport(n,e.localChanges,e.appVariantDescriptors,a).then(function(){p.hide();if(n.transport==="ATO_NOTIFICATION"){return t.getText("MSG_ATO_NOTIFICATION")}return t.getText("MSG_TRANSPORT_SUCCESS")})}return"Cancel"})["catch"](n)},getFlexInfo:function(e){var t=["layer"];var a=v(e,t);n._addClientInfo(a);var i=r.getUrl(T.FLEX_INFO,e,a);return r.sendRequest(i).then(function(e){return e.response})},getContexts:function(e){var t=["type","$skip","$filter"];var a=v(e,t);n._addClientInfo(a);var i=r.getUrl(T.CONTEXTS,e,a);return r.sendRequest(i).then(function(e){return e.response})},loadContextDescriptions:function(e){e.method="POST";e.isContextSharing=true;return E(e).then(function(e){return e.response})},isContextSharingEnabled:function(){return Promise.resolve(true)},loadFeatures:function(e){if(n.settings){return Promise.resolve(n.settings)}var t={};n._addClientInfo(t);var a=r.getUrl(T.SETTINGS,e,t);return r.sendRequest(a).then(function(e){e.response.isVariantAdaptationEnabled=!!e.response.isPublicLayerAvailable;return e.response})},write:function(e){e.method="POST";return E(e)},condense:function(e){e.method="POST";e.isCondensingEnabled=true;return E(e)},update:function(e){if(e.flexObject.fileType==="variant"){e.isLegacyVariant=true}e.method="PUT";return E(e)},remove:function(e){var t={namespace:e.flexObject.namespace,layer:e.flexObject.layer};if(e.transport){t.changelist=e.transport}n._addClientInfo(t);e.fileName=e.flexObject.fileName;var i=e.flexObject.fileType==="variant"?T.VARIANTS:T.CHANGES;var s=r.getUrl(i,e,t);s=decodeURIComponent(s);delete e.fileName;var o=r.getUrl(T.TOKEN,e);var u=a.getRequestOptions(n,o,undefined,"application/json; charset=utf-8","json");return a.sendRequest(s,"DELETE",u)},appVariant:{getManifest:function(e){var t=e.appVarUrl;var r=a.getRequestOptions(n,l.getLrepUrl()+T.TOKEN,undefined,"application/json; charset=utf-8","json");return a.sendRequest(t,"GET",r)},load:function(e){var t=r.getUrl(T.APPVARIANTS,e);var i=a.getRequestOptions(n,l.getLrepUrl()+T.TOKEN,undefined,"application/json; charset=utf-8","json");return a.sendRequest(t,"GET",i)},create:function(e){e.method="POST";e.isAppVariant=true;return E(e)},assignCatalogs:function(e){var t={};t.action=e.action;delete e.action;t.assignFromAppId=e.assignFromAppId;delete e.assignFromAppId;var i=r.getUrl(T.APPVARIANTS,e,t);delete e.reference;var s=r.getUrl(T.TOKEN,e);var o=a.getRequestOptions(n,s,undefined,"application/json; charset=utf-8","json");return a.sendRequest(i,"POST",o)},unassignCatalogs:function(e){var t={};t.action=e.action;delete e.action;var i=r.getUrl(T.APPVARIANTS,e,t);delete e.reference;var s=r.getUrl(T.TOKEN,e);var o=a.getRequestOptions(n,s,undefined,"application/json; charset=utf-8","json");return a.sendRequest(i,"POST",o)},update:function(e){return R(e).then(function(t){if(t){e.transport=t}delete e.isForSmartBusiness;e.method="PUT";e.isAppVariant=true;return E(e)})},remove:function(e){return R(e).then(function(t){var i={};if(t){i.changelist=t}delete e.isForSmartBusiness;var s=r.getUrl(T.APPVARIANTS,e,i);delete e.reference;var o=r.getUrl(T.TOKEN,e);var u=a.getRequestOptions(n,o,undefined,"application/json; charset=utf-8","json");return a.sendRequest(s,"DELETE",u)})},list:function(e){var t={};t.layer=e.layer;t["sap.app/id"]=e.reference;delete e.layer;delete e.reference;var i=r.getUrl(T.APPVARIANTS_OVERVIEW,e,t);var s=a.getRequestOptions(n,undefined,undefined,"application/json; charset=utf-8","json");return a.sendRequest(i,"GET",s)}},ui2Personalization:{create:function(e){e.initialConnector=this.initialConnector;var t=l.getLrepUrl();var r=a.getRequestOptions(n,t+T.TOKEN,e.flexObjects||e.flexObject,"application/json; charset=utf-8","json");var i=t+T.UI2PERSONALIZATION;return a.sendRequest(i,"PUT",r)},remove:function(e){e.initialConnector=this.initialConnector;var t=r.getUrl(T.UI2PERSONALIZATION,{url:l.getLrepUrl()},{reference:e.reference,containerkey:e.containerKey,itemname:e.itemName});return a.sendRequest(t,"DELETE")}},versions:{load:function(e){var t=a.getRequestOptions(n,T.TOKEN);var i={};r.addLanguageInfo(i);i.limit=e.limit;var s=r.getUrl(T.VERSIONS.GET,e,i);return a.sendRequest(s,"GET",t).then(function(e){return e.response.versions.map(function(e){return N(e)})})},activate:function(e){var t=a.getRequestOptions(n,T.TOKEN,{title:e.title},"application/json; charset=utf-8","json");var i={version:e.version};r.addLanguageInfo(i);var s=r.getUrl(T.VERSIONS.ACTIVATE,e,i);return a.sendRequest(s,"POST",t).then(function(e){var t=e.response;return N(t)})},discardDraft:function(e){var t=a.getRequestOptions(n,T.TOKEN);var i=r.getUrl(T.VERSIONS.DISCARD,e);return a.sendRequest(i,"DELETE",t)}}})});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/connectors/Utils",["sap/ui/fl/initial/_internal/connectors/Utils"],function(n){"use strict";function t(t){return n.sendRequest(t.tokenUrl,"HEAD").then(function(n){if(n&&n.xsrfToken){if(t.initialConnector){t.initialConnector.xsrfToken=n.xsrfToken}t.xsrfToken=n.xsrfToken;return t}})}function e(e,r,i){return t(e).then(n.sendRequest.bind(undefined,r,i))}function r(n,t,e){if(!t[e]){t[e]=n[e];return}if(Array.isArray(t[e])){t[e]=t[e].concat(n[e]);return}if(typeof t[e]==="object"){Object.keys(n[e]).forEach(function(i){r(n[e],t[e],i)})}t[e]=n[e]}return{getRequestOptions:function(n,t,e,r,i){var o={xsrfToken:n.xsrfToken,tokenUrl:t,initialConnector:n};if(e){o.payload=JSON.stringify(e)}if(r){o.contentType=r}if(i){o.dataType=i}return o},sendRequest:function(t,r,i){if(!i.initialConnector||!i.initialConnector.xsrfToken&&!(r==="GET")&&!(r==="HEAD")){return e(i,t,r)}return n.sendRequest(t,r,i).then(function(n){return n}).catch(function(n){if(n.status===403){return e(i,t,r)}throw n})},mergeResults:function(n){var t={};n.forEach(function(n){Object.keys(n).forEach(function(e){r(n,t,e)})});return t}}});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/transport/TransportDialog",["sap/m/List","sap/m/InputListItem","sap/m/Button","sap/m/ComboBox","sap/m/Dialog","sap/m/Input","sap/m/MessageToast","sap/ui/core/ListItem","sap/ui/fl/write/_internal/transport/Transports"],function(t,e,s,r,o,a,n,i,u){"use strict";var l=o.extend("sap.ui.fl.write._internal.transport.TransportDialog",{metadata:{library:"sap.ui.fl",properties:{pkg:{type:"string",group:"Misc",defaultValue:null},transports:{type:"any",group:"Misc",defaultValue:null},lrepObject:{type:"any",group:"Misc",defaultValue:null},hidePackage:{type:"boolean",group:"Misc",defaultValue:null}},events:{ok:{},cancel:{}}},renderer:{apiVersion:2}});l.prototype.init=function(){o.prototype.init.apply(this);this._oResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");this.setTitle(this._oResources.getText("TRANSPORT_DIALOG_TITLE"));this._oPackageLabel=null;this._oPackage=this._createPackageField();this._oTransport=this._createTransportCombo();this.addContent(this._createContentList());this._createButtons();this.setEscapeHandler(function(t){this.fireCancel();t.resolve()}.bind(this))};l.prototype._createContentList=function(){this._oPackageListItem=new e({label:this._oResources.getText("TRANSPORT_DIALOG_PACKAGE"),content:[this._oPackage]});this._oTransportListItem=new e({label:this._oResources.getText("TRANSPORT_DIALOG_TRANSPORT"),content:[this._oTransport]});return new t({items:[this._oPackageListItem,this._oTransportListItem]})};l.prototype._createButtons=function(){var t=this;this.addButton(new s({text:this._oResources.getText("TRANSPORT_DIALOG_LOCAL_OBJECT"),tooltip:this._oResources.getText("TRANSPORT_DIALOG_LOCAL_OBJECT"),press:function(){t._onLocal()}}));this.addButton(new s({text:this._oResources.getText("TRANSPORT_DIALOG_OK"),tooltip:this._oResources.getText("TRANSPORT_DIALOG_OK"),enabled:false,press:function(){t._onOkay()}}));this.addButton(new s({text:this._oResources.getText("TRANSPORT_DIALOG_CANCEL"),tooltip:this._oResources.getText("TRANSPORT_DIALOG_CANCEL"),press:function(){t.fireCancel();t.close();t.destroy()}}))};l.prototype._onLocal=function(){this.fireOk({selectedTransport:"",selectedPackage:this.getPkg()||"$TMP",dialog:true});this.close();this.destroy()};l.prototype._onOkay=function(){var t=this._oTransport.getSelectedKey();if(this._checkOkay(t)){this.fireOk({selectedTransport:t,selectedPackage:this.getPkg()||this._oPackage.getValue(),dialog:true});this.close();this.destroy()}else{this.getButtons()[1].setEnabled(false);this._oTransport.setValueState(sap.ui.core.ValueState.Error);this._oTransport.setValueStateText(this.getTitle())}};l.prototype._checkOkay=function(t){if(t){return true}return false};l.prototype._createTransportCombo=function(){var t=this;return new r({showSecondaryValues:true,enabled:false,tooltip:this._oResources.getText("TRANSPORT_DIALOG_TRANSPORT_TT"),width:"100%",selectionChange:function(){if(t._oPackageListItem.getVisible()&&!t._oPackage.getValue()){return}t.getButtons()[1].setEnabled(true);t._oTransport.setValueState(sap.ui.core.ValueState.None)},change:function(e){var s=function(t){if(t&&e.mParameters.newValue!==t.getText()||!t){return true}return false};if(e&&e.mParameters&&e.mParameters.newValue){if(s(t._oTransport.getSelectedItem())){t.getButtons()[1].setEnabled(false);t._oTransport.setValueState(sap.ui.core.ValueState.Error);t._oTransport.setValueStateText(t._oResources.getText("TRANSPORT_DIALOG_TRANSPORT_TT"))}}}})};l.prototype._createPackageField=function(){var t=this;return new a({tooltip:this._oResources.getText("TRANSPORT_DIALOG_PACKAGE_TT"),width:"100%",change:function(){var e;var s;s=t._createObjectInfo();e=u.getTransports(s);e.then(function(e){t._onPackageChangeSuccess(e)},function(e){t._onPackageChangeError(e)})},liveChange:function(e){if(e.mParameters.liveValue&&e.mParameters.liveValue.length>3){t._oTransport.setEnabled(true)}}})};l.prototype._createObjectInfo=function(){var t;var e={package:this._oPackage.getValue()||""};t=this.getProperty("lrepObject");if(t){if(t.name){e.name=t.name}if(t.type){e.type=t.type}if(t.namespace){e.namespace=t.namespace}}return e};l.prototype._onPackageChangeSuccess=function(t){if(t){if(t.localonly){this._oTransport.setEnabled(false);this.getButtons()[1].setEnabled(true)}else if(t.transports&&t.transports.length>0){this._oTransport.setEnabled(true);this._setTransports(t)}else if(t.errorCode){this.getButtons()[1].setEnabled(false);this._oPackage.setValueState(sap.ui.core.ValueState.Error);this._oPackage.setValueStateText(this._oResources.getText("TRANSPORT_DIALOG_"+t.errorCode));this._setTransports(t)}else{n.show(this._oResources.getText("TRANSPORT_DIALOG_NO_TRANSPORTS"))}}};l.prototype._setTransports=function(t){var e;var s;e=this._hasLock(t.transports);if(e){s=[e]}else{s=t.transports}this.setTransports(s);if(s&&s.length===1){this._oTransport.setValue(s[0].description,true);this.getButtons()[1].setEnabled(true)}if(!s||s.length===0){this._oTransport.setSelectedKey(null);this._oTransport.setValueState(sap.ui.core.ValueState.None);this.getButtons()[1].setEnabled(false)}};l.prototype._onPackageChangeError=function(t){n.show(t);this.setTransports([])};l.prototype._hasLock=function(t){var e;var s=t.length;while(s--){e=t[s];if(e.locked){return e}}return null};l.prototype.setPkg=function(t){if(t&&!this.getProperty("pkg")){this.setProperty("pkg",t);this._oPackage.setValue(t);this._oPackage.setEnabled(false);this._oTransport.setEnabled(true);this.setTitle(this._oResources.getText("TRANSPORT_DIALOG_TITLE_SIMPLE"));this.getButtons()[0].setVisible(false)}return this};l.prototype.setTransports=function(t){var e;var s=0;var r;if(t){this.setProperty("transports",t);this._oTransport.removeAllItems();s=t.length;for(e=0;e<s;e++){r=t[e];this._oTransport.addItem(new i({key:r.transportId,text:r.transportId,additionalText:r.description}))}if(s===1){this._oTransport.setSelectedKey(t[0].transportId);this.getButtons()[1].setEnabled(true)}if(s>0){this._oTransport.setEnabled(true)}}return this};l.prototype.setLrepObject=function(t){if(t&&!this.getProperty("lrepObject")){this.setProperty("lrepObject",t)}return this};l.prototype.setHidePackage=function(t){this.setProperty("hidePackage",t);this._oPackageListItem.setVisible(!t);if(t){this.getButtons()[0].setEnabled(t);this.setTitle(this._oResources.getText("TRANSPORT_DIALOG_TITLE_SIMPLE"))}return this};return l},true);
/*
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/transport/TransportSelection",["sap/ui/fl/Utils","sap/ui/fl/LayerUtils","sap/ui/fl/Layer","sap/ui/fl/write/_internal/transport/Transports","sap/ui/fl/write/_internal/transport/TransportDialog","sap/ui/fl/registry/Settings","sap/ui/core/BusyIndicator"],function(e,t,r,a,n,s,o){"use strict";var i=function(){};i.prototype.selectTransport=function(n,o,i,p,c,l){if(!e.getLrepUrl()){o(this._createEventObject(n,{transportId:""}));return}var f=function(e,r,n,s,o,i){a.getTransports(e).then(function(a){if(this._checkDialog(a,i)){this._openDialog({hidePackage:!t.doesCurrentLayerRequirePackage(),pkg:e.package,transports:a.transports,lrepObject:this._toLREPObject(e)},r,n,s,o)}else{var p=!a.localonly&&i?{transportId:"ATO_NOTIFICATION"}:this._getTransport(a);r(this._createEventObject(e,p))}}.bind(this),function(e){n(e)})};var u=t.getCurrentLayer();if(u&&(u===r.CUSTOMER||u===r.CUSTOMER_BASE)){s.getInstance().then(function(e){if(e.isAtoEnabled()){if(!(n&&n.name&&n.namespace&&n.type)){var t={transportId:"ATO_NOTIFICATION"};o(this._createEventObject(n,t))}else{f.apply(this,[n,o,i,p,l,true])}}else{f.apply(this,[n,o,i,p,l,false])}}.bind(this))}else{f.apply(this,[n,o,i,p,l,false])}};i.prototype._createEventObject=function(e,t){return{mParameters:{selectedTransport:t.transportId,selectedPackage:e["package"],dialog:false},getParameters:function(){return this.mParameters},getParameter:function(e){return this.mParameters[e]}}};i.prototype._toLREPObject=function(e){var t={};if(e.namespace){t.namespace=e.namespace}if(e.name){t.name=e.name}if(e.type){t.type=e.type}return t};i.prototype._openDialog=function(e,t,r,a,s){var i=new n(e);i.attachOk(t);i.attachCancel(r);i.addStyleClass(s);if(a){i.addStyleClass("sapUiSizeCompact")}else{i.removeStyleClass("sapUiSizeCompact")}i.open();o.hide();return i};i.prototype._getTransport=function(e){var t;if(!e.localonly){t=this._hasLock(e.transports)}else{t={transportId:""}}return t};i.prototype._checkDialog=function(e,t){if(e){if(e.localonly||this._hasLock(e.transports)||!e.localonly&&t){return false}}return true};i.prototype._hasLock=function(e){var t=e.length;while(t--){var r=e[t];if(r.locked){return r}}return false};i.prototype.setTransports=function(e,t){var r=e.length-1;var a=this;var n=function(e,t,r,s,o){if(t>=0){var i=e[t];if(o===true){if(i.getDefinition().packageName!=="$TMP"){i.setRequest(s)}t--;return n(e,t,r,s,o)}if(i.getDefinition().packageName!=="$TMP"){return a.openTransportSelection(i,r).then(function(a){if(a==="cancel"){return Promise.reject("cancel")}i.setRequest(a.transport);if(a.fromDialog===true){s=a.transport;o=true}t--;return n(e,t,r,s,o)},function(){return null})}t--;return n(e,t,r,s,o)}return Promise.resolve()};return n(e,r,t)};i.prototype.openTransportSelection=function(e,t,r){var a=this;return new Promise(function(n,s){var o=function(e){if(e&&e.getParameters){var t=e.getParameters().selectedTransport;var r=e.getParameters().selectedPackage;var a=e.getParameters().dialog;var s={transport:t,packageName:r,fromDialog:a};n(s)}else{n({})}};var i=function(e){if(e.sId==="cancel"){n(e.sId)}else{s(e)}};var p={};if(e){p["package"]=e.getPackage();p.namespace=e.getNamespace();p.name=e.getId();p.type=e.getDefinition().fileType}a.selectTransport(p,o,i,false,t,r)})};i.prototype.checkTransportInfo=function(e){return e&&e.transport&&e.packageName!=="$TMP"};i.prototype._prepareChangesForTransport=function(e,t,r,n){var s=a.convertToChangeTransportData(t,r);var o={};o.package=e.packageName;o.transportId=e.transport;o.changeIds=s;o.reference=n.reference;o.layer=n.layer;return a.makeChangesTransportable(o).then(function(){t.forEach(function(t){if(t.getPackage()==="$TMP"){var r=t.getDefinition();r.packageName=e.packageName;t.setResponse(r)}})})};return i});
/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/_internal/transport/Transports",["sap/ui/fl/initial/_internal/connectors/LrepConnector","sap/ui/fl/Utils","sap/ui/fl/initial/_internal/connectors/Utils","sap/ui/fl/write/_internal/connectors/Utils"],function(e,r,t,n){"use strict";var a={ACTION_GET_TRANSPORTS:"/actions/gettransports/",ACTION_MAKE_CHANGE_TRANSPORTABLE:"/actions/make_changes_transportable/",ACTION_GET_TOKEN:"/actions/getcsrftoken/"};return{getTransports:function(e){if(r.getClient()){e["sap-client"]=r.getClient()}var n=t.getUrl(a.ACTION_GET_TRANSPORTS,{url:r.getLrepUrl()},e);n=decodeURIComponent(n);return t.sendRequest(n,"GET").then(function(e){if(e.response){if(!e.response.localonly){e.response.localonly=false}if(!e.response.errorCode){e.response.errorCode=""}return Promise.resolve(e.response)}return Promise.reject("response is empty")})},makeChangesTransportable:function(s){if(!s.transportId){return Promise.reject(new Error("no transportId provided as attribute of mParameters"))}if(!s.changeIds){return Promise.reject(new Error("no changeIds provided as attribute of mParameters"))}if(!s.reference){return Promise.reject(new Error("no reference provided as attribute of mParameters"))}var i=r.getClient()?{"sap-client":r.getClient()}:{};var o=t.getUrl(a.ACTION_MAKE_CHANGE_TRANSPORTABLE,{url:r.getLrepUrl()},i);var l=t.getUrl(a.ACTION_GET_TOKEN,{url:r.getLrepUrl()});var p=n.getRequestOptions(e,l,s,"application/json; charset=utf-8","json");return n.sendRequest(o,"POST",p)},convertToChangeTransportData:function(e,r){var t=[];var n;if(r&&r.length){for(n=0;n<r.length;n++){var a=r[n];var s={};s.namespace=a.getNamespace();s.fileName=a.getDefinition().fileName;s.fileType=a.getDefinition().fileType;t.push(s)}}var i=e.length;for(n=0;n<i;n++){var o=e[n];var l={};l.namespace=o.getNamespace();l.fileName=o.getId();l.fileType=o.getDefinition().fileType;t.push(l)}return t}}},true);
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/api/ChangesWriteAPI",["sap/ui/fl/apply/_internal/changes/Applier","sap/ui/fl/apply/_internal/changes/Reverter","sap/ui/fl/apply/_internal/ChangesController","sap/ui/fl/apply/_internal/appVariant/DescriptorChangeTypes","sap/ui/fl/descriptorRelated/api/DescriptorChangeFactory","sap/ui/fl/initial/_internal/changeHandlers/ChangeHandlerStorage","sap/ui/fl/write/_internal/appVariant/AppVariantInlineChangeFactory","sap/base/Log","sap/ui/core/Component","sap/ui/core/Element","sap/ui/core/util/reflection/JsControlTreeModifier","sap/base/util/includes","sap/base/util/restricted/_omit"],function(e,n,t,a,r,c,i,o,l,p,s,g,h){"use strict";var f={create:function(e){var n;if(g(a.getChangeTypes(),e.changeSpecificData.changeType)){n=t.getDescriptorFlexControllerInstance(e.selector);var c=n.getComponentName();var p;if(e.changeSpecificData.layer){p=e.changeSpecificData.layer;delete e.changeSpecificData.layer}var s={changeType:e.changeSpecificData.changeType,content:e.changeSpecificData.content};if(e.changeSpecificData.texts){s.texts=e.changeSpecificData.texts}return i.createDescriptorInlineChange(s).then(function(n){return(new r).createNew(c,n,p,e.selector)}).catch(function(e){o.error("the change could not be created.",e.message);throw e})}if(e.selector.name&&e.selector.view){n=t.getFlexControllerInstance(e.selector.view)}else{n=t.getFlexControllerInstance(e.selector)}if(e.selector instanceof l){return n.createBaseChange(e.changeSpecificData,e.selector)}if(e.selector.name&&e.selector.view){return n.createChangeWithExtensionPointSelector(e.changeSpecificData,e.selector)}return n.createChangeWithControlSelector(e.changeSpecificData,e.selector)},apply:function(n){if(!(n.element instanceof p)){return Promise.reject("Please provide an Element")}var a=t.getFlexControllerInstance(n.element);n.appComponent=t.getAppComponentForSelector(n.element);if(!n.modifier){n.modifier=s}return e.applyChangeOnControl(n.change,n.element,h(n,["element","change"])).then(function(e){var t=a.checkForOpenDependenciesForControl(n.change.getSelector(),n.appComponent);if(t){return f.revert({change:n.change,element:n.element}).then(function(){throw Error("The following Change cannot be applied because of a dependency: "+n.change.getId())})}return e})},revert:function(e){var a;if(e.element instanceof p){a=t.getAppComponentForSelector(e.element)}var r={modifier:s,appComponent:a};return n.revertChangeOnControl(e.change,e.element,r)},getChangeHandler:function(e){var n=e.controlType||e.modifier.getControlType(e.element);return c.getChangeHandler(e.changeType,n,e.element,e.modifier,e.layer)}};return f});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine("sap/ui/fl/write/connectors/BaseConnector",[],function(){"use strict";var e={layers:[],write:function(){return Promise.reject("write is not implemented")},condense:function(){return Promise.reject("condense is not implemented")},update:function(){return Promise.reject("write is not implemented")},remove:function(){return Promise.reject("remove is not implemented")},reset:function(){return Promise.reject("reset is not implemented")},publish:function(){return Promise.reject("publish is not implemented")},getFlexInfo:function(){return Promise.resolve({})},getContexts:function(){return Promise.reject("getContexts is not implemented")},loadContextDescriptions:function(){return Promise.reject("loadContextDescriptions is not implemented")},isContextSharingEnabled:function(){return Promise.resolve(false)},loadFeatures:function(){return Promise.reject("loadFeatures is not implemented")},versions:{load:function(){return Promise.reject("versions.load is not implemented")},activate:function(){return Promise.reject("versions.activate is not implemented")},discardDraft:function(){return Promise.reject("versions.discardDraft is not implemented")}},translation:{getSourceLanguages:function(){return Promise.reject("translation.getSourceLanguages is not implemented")},getTexts:function(){return Promise.reject("translation.getTexts is not implemented")},postTranslationTexts:function(){return Promise.reject("translation.postTranslationTexts is not implemented")}}};return e});
