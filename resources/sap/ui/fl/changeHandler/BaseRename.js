/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/Base","sap/base/Log"],function(e,t){"use strict";var r={createRenameChangeHandler:function(r){r.changePropertyName=r.changePropertyName||"newText";return{applyChange:function(e,n,a){var i=a.modifier;var o=r.propertyName;var f=e.getDefinition();var u=f.texts[r.changePropertyName];var p=u.value;return Promise.resolve().then(function(){if(f.texts&&u&&typeof p==="string"){return i.getPropertyBindingOrProperty(n,o).then(function(t){e.setRevertData(t);return i.setPropertyBindingOrProperty(n,o,p)})}t.error("Change does not contain sufficient information to be applied: ["+f.layer+"]"+f.namespace+"/"+f.fileName+"."+f.fileType);return undefined})},revertChange:function(e,n,a){var i=a.modifier;var o=r.propertyName;var f=e.getRevertData();if(f||f===""){i.setPropertyBindingOrProperty(n,o,f);e.resetRevertData();return}t.error("Change doesn't contain sufficient information to be reverted. Most Likely the Change didn't go through applyChange.")},completeChangeContent:function(t,n,a){var i=t.getDefinition();var o=r.changePropertyName;var f=r.translationTextType;return Promise.resolve().then(function(){return a.modifier.bySelector(t.getSelector(),a.appComponent)}).then(function(t){i.content.originalControlType=a.modifier.getControlType(t);if(typeof n.value==="string"){e.setTextInChange(i,o,n.value,f)}else{return Promise.reject(new Error("oSpecificChangeInfo.value attribute required"))}})},getCondenserInfo:function(e){return{affectedControl:e.getSelector(),classification:sap.ui.fl.condenser.Classification.LastOneWins,uniqueKey:r.propertyName||r.changePropertyName}},getChangeVisualizationInfo:function(e){var t=e.getDefinition().texts&&e.getDefinition().texts[r.changePropertyName];return{payload:{originalLabel:e.getRevertData(),newLabel:t&&t.value}}}}}};return r},true);