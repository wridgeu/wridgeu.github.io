/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/common/revertAddedControls","sap/ui/fl/changeHandler/common/getTargetAggregationIndex","sap/ui/fl/changeHandler/common/createIFrame"],function(e,t,n){"use strict";var r={};r.applyChange=function(e,r,o){var a=o.modifier;var i=e.getDefinition();var g=o.view;var c=i.content.targetAggregation;var f;var s;return Promise.resolve().then(a.findAggregation.bind(a,r,c)).then(function(n){if(!n){throw new Error("The given Aggregation is not available in the given control: "+a.getId(r))}return t(e,r,o)}).then(function(t){f=t;return n(e,o,i.content.selector)}).then(function(e){s=e;return a.insertAggregation(r,c,s,f,g)}).then(function(){e.setRevertData([a.getId(s)])})};r.revertChange=e;r.completeChangeContent=function(e,t,n){var r=e.getDefinition();var o=n.modifier;var a=n.appComponent;["targetAggregation","baseId","url"].forEach(function(e){if(!Object.prototype.hasOwnProperty.call(t.content,e)){throw new Error("Attribute missing from the change specific content '"+e+"'")}});r.content=Object.assign(r.content||{},t.content);r.content.selector=o.getSelector(r.content.baseId,a)};r.getChangeVisualizationInfo=function(e){return{affectedControls:[e.getContent().selector]}};return r},true);