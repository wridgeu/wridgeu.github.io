/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/ChangePersistenceFactory","sap/ui/fl/Change","sap/ui/fl/Utils","sap/base/util/merge"],function(e,t,n,r){"use strict";var i=function(e,t){this._mChangeFile=e;this._mChangeFile.packageName="";this._oInlineChange=t};i.prototype.submit=function(){this.store();var e=this._getChangePersistence(this._mChangeFile.reference);return e.saveDirtyChanges()};i.prototype.store=function(){var e=this._mChangeFile.reference;var t=this._getChangePersistence(e);var n=this._getChangeToSubmit();t.addChange(n);return n};i.prototype._getChangePersistence=function(t){return e.getChangePersistenceForComponent(t)};i.prototype._getChangeToSubmit=function(){var e=new t(this._getMap());return e};i.prototype._getMap=function(){var e=this._oInlineChange.getMap();this._mChangeFile.content=e.content;this._mChangeFile.texts=e.texts;return this._mChangeFile};i.prototype.getJson=function(){return r({},this._getMap())};var a=function(){};a.prototype.createNew=function(e,n,r,a,o){var s=function(e,t){if(e["setHostingIdForTextKey"]){e.setHostingIdForTextKey(t)}};s(n,e);var g={};g.changeType=n._getChangeType();g.componentName=e;g.reference=e;g.generator=o;g.support=n.getMap().support;g.layer=r||"CUSTOMER";var h=t.createInitialFileContent(g);return Promise.resolve(new i(h,n))};return a});