/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/model/Context","sap/ui/model/PropertyBinding","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/Device","sap/ui/core/InvisibleText","sap/ui/core/Control","sap/ui/core/Icon","sap/ui/layout/HorizontalLayout","sap/ui/layout/Grid","sap/base/Log","sap/m/SearchField","sap/m/RadioButton","sap/m/ColumnListItem","sap/m/Column","sap/m/Text","sap/m/Bar","sap/m/Table","sap/m/Page","sap/m/Toolbar","sap/m/ToolbarSpacer","sap/m/Button","sap/m/ToggleButton","sap/m/CheckBox","sap/m/Dialog","sap/m/Input","sap/m/Label","sap/m/Title","sap/m/ResponsivePopover","sap/m/SelectList","sap/m/ObjectIdentifier","sap/m/OverflowToolbar","sap/m/OverflowToolbarLayoutData","sap/m/VBox","sap/m/HBox","sap/ui/events/KeyCodes","sap/ui/core/library","sap/m/library","sap/ui/fl/Utils","sap/ui/fl/registry/Settings"],function(e,t,i,a,o,n,s,r,l,h,u,d,p,g,c,f,_,m,M,y,v,A,N,S,V,C,T,b,E,I,x,D,R,w,O,P,L,F,B,K,k){"use strict";var G=B.OverflowToolbarPriority;var U=B.ButtonType;var H=B.PlacementType;var z=B.PopinDisplay;var W=B.ScreenSize;var j=F.ValueState;var X=F.TextAlign;var Y=r.extend("sap.ui.fl.variants.VariantManagement",{metadata:{interfaces:["sap.m.IOverflowToolbarContent"],library:"sap.ui.fl",designtime:"sap/ui/fl/designtime/variants/VariantManagement.designtime",properties:{showSetAsDefault:{type:"boolean",group:"Misc",defaultValue:true},manualVariantKey:{type:"boolean",group:"Misc",defaultValue:false},inErrorState:{type:"boolean",group:"Misc",defaultValue:false},editable:{type:"boolean",group:"Misc",defaultValue:true},modelName:{type:"string",group:"Misc",defaultValue:null},updateVariantInURL:{type:"boolean",group:"Misc",defaultValue:false},resetOnContextChange:{type:"boolean",group:"Misc",defaultValue:true},executeOnSelectionForStandardDefault:{type:"boolean",group:"Misc",defaultValue:false},displayTextForExecuteOnSelectionForStandardVariant:{type:"string",group:"Misc",defaultValue:""}},associations:{for:{type:"sap.ui.core.Control",multiple:true}},events:{save:{parameters:{name:{type:"string"},overwrite:{type:"boolean"},key:{type:"string"},execute:{type:"boolean"},def:{type:"boolean"}}},cancel:{},manage:{},initialized:{},select:{parameters:{key:{type:"string"}}}}},renderer:{apiVersion:2,render:function(e,t){e.openStart("div",t).class("sapUiFlVarMngmt").openEnd();e.renderControl(t.oVariantLayout);e.close("div")}}});Y.INNER_MODEL_NAME="$sapUiFlVariants";Y.MAX_NAME_LEN=100;Y.COLUMN_FAV_IDX=0;Y.COLUMN_NAME_IDX=1;Y.prototype.init=function(){this._sModelName=K.VARIANT_MODEL_NAME;this.attachModelContextChange(this._setModel,this);this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.fl");this._createInnerModel();this.oVariantInvisibleText=new s;this.oVariantText=new E(this.getId()+"-text",{text:{path:"currentVariant",model:this._sModelName,formatter:function(e){var t="";if(e){t=this.getSelectedVariantText(e);this._setInvisibleText(t,this.getModified())}return t}.bind(this)}});this.oVariantText.addStyleClass("sapUiFlVarMngmtClickable");this.oVariantText.addStyleClass("sapUiFlVarMngmtTitle");this.oVariantText.addStyleClass("sapMTitleStyleH4");if(n.system.phone){this.oVariantText.addStyleClass("sapUiFlVarMngmtTextPhoneMaxWidth")}else{this.oVariantText.addStyleClass("sapUiFlVarMngmtTextMaxWidth")}var e=new _(this.getId()+"-modified",{text:"*",visible:{path:"modified",model:this._sModelName,formatter:function(e){var t=this.getCurrentVariantKey();if(t){this._setInvisibleText(this.getSelectedVariantText(t),e)}return e===null||e===undefined?false:e}.bind(this)}});e.setVisible(false);e.addStyleClass("sapUiFlVarMngmtModified");e.addStyleClass("sapUiFlVarMngmtClickable");this.oVariantPopoverTrigger=new S(this.getId()+"-trigger",{icon:"sap-icon://slim-arrow-down",type:U.Transparent,tooltip:this._oRb.getText("VARIANT_MANAGEMENT_TRIGGER_TT")});this.oVariantPopoverTrigger.addAriaLabelledBy(this.oVariantInvisibleText);this.oVariantPopoverTrigger.addStyleClass("sapUiFlVarMngmtTriggerBtn");this.oVariantLayout=new h({content:[this.oVariantText,e,this.oVariantPopoverTrigger]});this.oVariantLayout.addStyleClass("sapUiFlVarMngmtLayout");e.setVisible(false);this.oVariantModifiedText=e;this.oVariantInvisibleText.toStatic();this.addDependent(this.oVariantLayout);this._fRegisteredApplyAutomaticallyOnStandardVariant=null};Y.prototype.registerApplyAutomaticallyOnStandardVariant=function(e){this._fRegisteredApplyAutomaticallyOnStandardVariant=e;return this};Y.prototype.getApplyAutomaticallyOnVariant=function(e){var t=e.executeOnSelect;if(this._fRegisteredApplyAutomaticallyOnStandardVariant&&this.getDisplayTextForExecuteOnSelectionForStandardVariant()&&e.key===this.getStandardVariantKey()){try{t=this._fRegisteredApplyAutomaticallyOnStandardVariant()}catch(e){d.error("callback for determination of apply automatically on standard variant failed")}}return t};Y.prototype.getOverflowToolbarConfig=function(){return{canOverflow:false,invalidationEvents:["save","manage","select"]}};Y.prototype.getTitle=function(){return this.oVariantText};Y.prototype._setInvisibleText=function(e,t){var i;if(e){if(t){i="VARIANT_MANAGEMENT_SEL_VARIANT_MOD"}else{i="VARIANT_MANAGEMENT_SEL_VARIANT"}this.oVariantInvisibleText.setText(this._oRb.getText(i,[e]))}};Y.prototype._createInnerModel=function(){var e=new i({showExecuteOnSelection:false,showSetAsDefault:true,showPublic:false,showContexts:false,editable:true,popoverTitle:this._oRb.getText("VARIANT_MANAGEMENT_VARIANTS")});this.setModel(e,Y.INNER_MODEL_NAME);this._bindProperties();this._updateInnerModelWithSettingsInfo()};Y.prototype._bindProperties=function(){this.bindProperty("showSetAsDefault",{path:"/showSetAsDefault",model:Y.INNER_MODEL_NAME});this.bindProperty("editable",{path:"/editable",model:Y.INNER_MODEL_NAME})};Y.prototype._updateInnerModelWithSettingsInfo=function(){k.getInstance().then(function(e){this.getModel(Y.INNER_MODEL_NAME).setProperty("/showSaveAs",e.isVariantPersonalizationEnabled());this.getModel(Y.INNER_MODEL_NAME).setProperty("/showPublic",e.isPublicFlVariantEnabled())}.bind(this))};Y.prototype._getShowPublic=function(){var e=this.getModel(Y.INNER_MODEL_NAME);if(e){return e.getProperty("/showPublic")}return false};Y.prototype._setShowPublic=function(e){var t=this.getModel(Y.INNER_MODEL_NAME);if(t){t.setProperty("/showPublic",e)}};Y.prototype._getShowContexts=function(){var e=this.getModel(Y.INNER_MODEL_NAME);if(e){return e.getProperty("/showContexts")}return false};Y.prototype._setShowContexts=function(e){var t=this.getModel(Y.INNER_MODEL_NAME);if(t){t.setProperty("/showContexts",e)}};Y.prototype._getShowExecuteOnSelection=function(){var e=this.getModel(Y.INNER_MODEL_NAME);if(e){return e.getProperty("/showExecuteOnSelection")}return false};Y.prototype._setShowExecuteOnSelection=function(e){var t=this.getModel(Y.INNER_MODEL_NAME);if(t){t.setProperty("/showExecuteOnSelection",e)}};Y.prototype.setExecuteOnSelection=function(e){var t=this.getModel(this._sModelName);if(t&&this.oContext){t.setProperty(this.oContext+"/executeOnSelection",e)}};Y.prototype.getOriginalDefaultVariantKey=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/originalDefaultVariant")}return null};Y.prototype.setDefaultVariantKey=function(e){var t=this.getModel(this._sModelName);if(t&&this.oContext){t.setProperty(this.oContext+"/defaultVariant",e)}};Y.prototype.getDefaultVariantKey=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/defaultVariant")}return null};Y.prototype.setCurrentVariantKey=function(e){var t=this.getModel(this._sModelName);if(t&&this.oContext){t.setProperty(this.oContext+"/currentVariant",e)}return this};Y.prototype.getCurrentVariantKey=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/currentVariant")}return null};Y.prototype._assignPopoverTitle=function(){var e;var t;var i=this.getModel(this._sModelName);if(i&&this.oContext){e=i.getProperty(this.oContext+"/popoverTitle")}if(e!==undefined){t=this.getModel(Y.INNER_MODEL_NAME);if(t){t.setProperty("/popoverTitle",e)}}};Y.prototype.getVariants=function(){return this._getItems()};Y.prototype.setModified=function(e){var t=this.getModel(this._sModelName);if(t&&this.oContext){t.setProperty(this.oContext+"/modified",e)}};Y.prototype.getModified=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/modified")}return false};Y.prototype.getSelectedVariantText=function(e){var t=this._getItemByKey(e);if(t){return t.title}return""};Y.prototype.getStandardVariantKey=function(){var e=this._getItems();if(e&&e[0]){return e[0].key}return null};Y.prototype.getShowFavorites=function(){var e=this.getModel(this._sModelName);if(e&&this.oContext){return e.getProperty(this.oContext+"/showFavorites")}return false};Y.prototype._clearDeletedItems=function(){this._aDeletedItems=[]};Y.prototype._addDeletedItem=function(e){this._aDeletedItems.push(e)};Y.prototype._getDeletedItems=function(){return this._aDeletedItems};Y.prototype._getItems=function(){var e=[];if(this.oContext&&this.oContext.getObject()){e=this.oContext.getObject().variants.filter(function(e){if(!e.hasOwnProperty("visible")){return true}return e.visible})}return e};Y.prototype._getItemByKey=function(e){var t=null;var i=this._getItems();i.some(function(i){if(i.key===e){t=i}return t!==null});return t};Y.prototype._rebindControl=function(){this.oVariantText.unbindProperty("text");this.oVariantText.bindProperty("text",{path:"currentVariant",model:this._sModelName,formatter:function(e){var t="";if(e){t=this.getSelectedVariantText(e);this._setInvisibleText(t,this.getModified())}return t}.bind(this)});this.oVariantModifiedText.unbindProperty("visible");this.oVariantModifiedText.bindProperty("visible",{path:"modified",model:this._sModelName,formatter:function(e){var t=this.getCurrentVariantKey();if(t){this._setInvisibleText(this.getSelectedVariantText(t),e)}return e===null||e===undefined?false:e}.bind(this)})};Y.prototype.setModelName=function(e){if(this.getModelName()){this.oContext=null}this.setProperty("modelName",e);this._sModelName=e;this._rebindControl();return this};Y.prototype._setBindingContext=function(){var t;var i;if(!this.oContext){t=this.getModel(this._sModelName);if(t){i=this._getLocalId(t);if(i){this.oContext=new e(t,"/"+i);this.setBindingContext(this.oContext,this._sModelName);if(!this.getModelName()&&t.registerToModel){t.registerToModel(this)}this._assignPopoverTitle();this._registerPropertyChanges(t);this.fireInitialized()}}}};Y.prototype._getLocalId=function(e){if(this.getModelName()&&this._sModelName!==K.VARIANT_MODEL_NAME){return this.getId()}return e.getVariantManagementReferenceForControl(this)};Y.prototype._setModel=function(){this._setBindingContext()};Y.prototype._registerPropertyChanges=function(e){var i=new t(e,this.oContext+"/showExecuteOnSelection");i.attachChange(function(e){if(e&&e.oSource&&e.oSource.oModel&&e.oSource.sPath){var t=e.oSource.oModel.getProperty(e.oSource.sPath);if(t!==undefined){this._setShowExecuteOnSelection(t)}}}.bind(this));i=new t(e,this.oContext+"/variantsEditable");i.attachChange(function(e){if(e&&e.oSource&&e.oSource.oModel&&e.oSource.sPath){var t;var i=e.oSource.oModel.getProperty(e.oSource.sPath);t=this.getModel(Y.INNER_MODEL_NAME);if(t&&i!==undefined){t.setProperty("/editable",i)}}}.bind(this))};Y.prototype._obtainControl=function(e){if(e&&e.target&&e.target.id){var t=e.target.id;var i=t.indexOf("-inner");if(i>0){t=t.substring(0,i)}return sap.ui.getCore().byId(t)}return null};Y.prototype.handleOpenCloseVariantPopover=function(e){if(!this.bPopoverOpen){this._oCtrlRef=this._obtainControl(e);this._openVariantList()}else if(this.oVariantPopOver&&this.oVariantPopOver.isOpen()){this.oVariantPopOver.close()}else if(this.getInErrorState()&&this.oErrorVariantPopOver&&this.oErrorVariantPopOver.isOpen()){this.oErrorVariantPopOver.close()}};Y.prototype.getFocusDomRef=function(){return this.oVariantPopoverTrigger.getFocusDomRef()};Y.prototype.onclick=function(e){if(this.oVariantPopoverTrigger&&!this.bPopoverOpen){this.oVariantPopoverTrigger.focus()}this.handleOpenCloseVariantPopover(e)};Y.prototype.onkeyup=function(e){if(e.which===L.F4||e.which===L.SPACE||e.altKey===true&&e.which===L.ARROW_UP||e.altKey===true&&e.which===L.ARROW_DOWN){this._oCtrlRef=this._obtainControl(e);this._openVariantList()}};Y.prototype.onAfterRendering=function(){this.oVariantText.$().off("mouseover").on("mouseover",function(){this.oVariantPopoverTrigger.addStyleClass("sapUiFlVarMngmtTriggerBtnHover")}.bind(this));this.oVariantText.$().off("mouseout").on("mouseout",function(){this.oVariantPopoverTrigger.removeStyleClass("sapUiFlVarMngmtTriggerBtnHover")}.bind(this))};Y.prototype._openInErrorState=function(){var e;if(!this.oErrorVariantPopOver){e=new O({fitContainer:true,alignItems:sap.m.FlexAlignItems.Center,items:[new l({size:"4rem",color:"lightgray",src:"sap-icon://message-error"}),new E({titleStyle:sap.ui.core.TitleLevel.H2,text:this._oRb.getText("VARIANT_MANAGEMENT_ERROR_TEXT1")}),new _({textAlign:sap.ui.core.TextAlign.Center,text:this._oRb.getText("VARIANT_MANAGEMENT_ERROR_TEXT2")})]});e.addStyleClass("sapUiFlVarMngmtErrorPopover");this.oErrorVariantPopOver=new I(this.getId()+"-errorpopover",{title:{path:"/popoverTitle",model:Y.INNER_MODEL_NAME},contentWidth:"400px",placement:H.VerticalPreferredBottom,content:[new y(this.getId()+"-errorselpage",{showSubHeader:false,showNavButton:false,showHeader:false,content:[e]})],afterOpen:function(){this.bPopoverOpen=true}.bind(this),afterClose:function(){if(this.bPopoverOpen){setTimeout(function(){this.bPopoverOpen=false}.bind(this),200)}}.bind(this),contentHeight:"300px"});this.oErrorVariantPopOver.attachBrowserEvent("keyup",function(e){if(e.which===32){this.oErrorVariantPopOver.close()}}.bind(this))}if(this.bPopoverOpen){return}this.oErrorVariantPopOver.openBy(this.oVariantLayout)};Y.prototype._createVariantList=function(){if(this.oVariantPopOver){return}this.oVariantManageBtn=new N(this.getId()+"-manage",{text:this._oRb.getText("VARIANT_MANAGEMENT_MANAGE"),enabled:true,press:function(){this._openManagementDialog()}.bind(this),layoutData:new w({priority:G.Low})});this.oVariantSaveBtn=new N(this.getId()+"-mainsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),press:function(){this._handleVariantSave()}.bind(this),visible:{path:"modified",model:this._sModelName,formatter:function(e){return e}},type:U.Emphasized,layoutData:new w({priority:G.Low})});this.oVariantSaveAsBtn=new N(this.getId()+"-saveas",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVEAS"),press:function(){this._openSaveAsDialog()}.bind(this),layoutData:new w({priority:G.Low}),visible:{path:"/showSaveAs",model:Y.INNER_MODEL_NAME}});this._oVariantList=new x(this.getId()+"-list",{selectedKey:{path:"currentVariant",model:this._sModelName},itemPress:function(e){var t=null;if(e&&e.getParameters()){var i=e.getParameters().item;if(i){t=i.getKey()}}if(t){this.setCurrentVariantKey(t);this.fireEvent("select",{key:t});this.oVariantPopOver.close()}}.bind(this)});this._oVariantList.setNoDataText(this._oRb.getText("VARIANT_MANAGEMENT_NODATA"));var e=new sap.ui.core.Item({key:"{"+this._sModelName+">key}",text:"{"+this._sModelName+">title}"});this._oVariantList.bindAggregation("items",{path:"variants",model:this._sModelName,template:e});this._oSearchField=new p(this.getId()+"-search");this._oSearchField.attachLiveChange(function(e){this._triggerSearch(e,this._oVariantList)}.bind(this));this.oVariantSelectionPage=new y(this.getId()+"-selpage",{subHeader:new v({content:[this._oSearchField]}),content:[this._oVariantList],footer:new R({content:[new A(this.getId()+"-spacer"),this.oVariantSaveBtn,this.oVariantSaveAsBtn,this.oVariantManageBtn]}),showNavButton:false,showHeader:false,showFooter:{path:"/editable",model:Y.INNER_MODEL_NAME}});this.oVariantPopOver=new I(this.getId()+"-popover",{title:{path:"/popoverTitle",model:Y.INNER_MODEL_NAME},titleAlignment:"Auto",contentWidth:"400px",placement:H.VerticalPreferredBottom,content:[this.oVariantSelectionPage],afterOpen:function(){this.bPopoverOpen=true;this.oVariantPopoverTrigger.setPressed(true)}.bind(this),afterClose:function(){this.oVariantPopoverTrigger.setPressed(false);if(this.bPopoverOpen){setTimeout(function(){this.bPopoverOpen=false}.bind(this),200)}}.bind(this),contentHeight:"300px"});this.oVariantPopOver.addStyleClass("sapUiFlVarMngmtPopover");if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oVariantPopOver.addStyleClass("sapUiSizeCompact")}this.addDependent(this.oVariantPopOver)};Y.prototype.showSaveButton=function(e){if(e===false){this.oVariantSaveAsBtn.setType(U.Emphasized);this.oVariantSaveBtn.setVisible(false)}else{this.oVariantSaveAsBtn.setType(U.Default);this.oVariantSaveBtn.setVisible(true)}};Y.prototype._openVariantList=function(){var e;if(this.getInErrorState()){this._openInErrorState();return}if(this.bPopoverOpen){return}if(!this.oContext){return}this._createVariantList();this._oSearchField.setValue("");this._oVariantList.getBinding("items").filter(this._getFilters());this.oVariantSelectionPage.setShowSubHeader(this._oVariantList.getItems().length>9);this.showSaveButton(false);if(this.getModified()){e=this._getItemByKey(this.getCurrentVariantKey());if(e&&e.change){this.showSaveButton(true)}}var t=this._oCtrlRef?this._oCtrlRef:this.oVariantLayout;this._oCtrlRef=null;this.oVariantPopOver.openBy(t)};Y.prototype._triggerSearch=function(e,t){if(!e){return}var i=e.getParameters();if(!i){return}var n=i.newValue?i.newValue:"";var s=new a({path:"title",operator:o.Contains,value1:n});t.getBinding("items").filter(this._getFilters(s))};Y.prototype._createSaveAsDialog=function(){if(!this.oSaveAsDialog){this.oInputName=new T(this.getId()+"-name",{liveChange:function(){this._checkVariantNameConstraints(this.oInputName)}.bind(this)});var e=new b(this.getId()+"-namelabel",{text:this._oRb.getText("VARIANT_MANAGEMENT_NAME")});e.setLabelFor(this.oInputName);e.addStyleClass("sapUiFlVarMngmtSaveDialogLabel");this.oDefault=new V(this.getId()+"-default",{text:this._oRb.getText("VARIANT_MANAGEMENT_SETASDEFAULT"),visible:{path:"/showSetAsDefault",model:Y.INNER_MODEL_NAME},width:"100%"});this.oPublic=new V(this.getId()+"-public",{text:this._oRb.getText("VARIANT_MANAGEMENT_SETASPUBLIC"),visible:{path:"/showPublic",model:Y.INNER_MODEL_NAME},width:"100%"});this.oExecuteOnSelect=new V(this.getId()+"-execute",{text:this._oRb.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),visible:{path:"/showExecuteOnSelection",model:Y.INNER_MODEL_NAME},width:"100%"});this.oInputManualKey=new T(this.getId()+"-key",{liveChange:function(){this._checkVariantNameConstraints(this.oInputManualKey)}.bind(this)});this.oLabelKey=new b(this.getId()+"-keylabel",{text:this._oRb.getText("VARIANT_MANAGEMENT_KEY"),required:true});this.oLabelKey.setLabelFor(this.oInputManualKey);this.oSaveSave=new N(this.getId()+"-variantsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),type:U.Emphasized,press:function(){if(!this._bSaveOngoing){this._checkVariantNameConstraints(this.oInputName);if(this.oInputName.getValueState()==="Error"){this.oInputName.focus();return}this._bSaveOngoing=true;this._bSaveCanceled=false;this._handleVariantSaveAs(this.oInputName.getValue())}}.bind(this),enabled:true});var t=new u({defaultSpan:"L12 M12 S12"});if(this.getShowSetAsDefault()){t.addContent(this.oDefault)}t.addContent(this.oPublic);if(this._getShowExecuteOnSelection()){t.addContent(this.oExecuteOnSelect)}this.oSaveAsDialog=new C(this.getId()+"-savedialog",{title:this._oRb.getText("VARIANT_MANAGEMENT_SAVEDIALOG"),afterClose:function(){this._bSaveOngoing=false;if(this._sStyleClass){this._setShowPublic(this._bShowPublic);this.oSaveAsDialog.removeStyleClass(this._sStyleClass);if(this._oRolesComponentContainer){this.oSaveAsDialog.removeContent(this._oRolesComponentContainer)}this._sStyleClass=undefined;this._oRolesComponentContainer=null}}.bind(this),beginButton:this.oSaveSave,endButton:new N(this.getId()+"-variantcancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:this._cancelPressed.bind(this)}),content:[e,this.oInputName,this.oLabelKey,this.oInputManualKey,t],stretch:n.system.phone});this.oSaveAsDialog.isPopupAdaptationAllowed=function(){return false};this.oSaveAsDialog.addStyleClass("sapUiContentPadding");this.oSaveAsDialog.addStyleClass("sapUiFlVarMngmtSaveDialog");if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oSaveAsDialog.addStyleClass("sapUiSizeCompact")}this.addDependent(this.oSaveAsDialog)}};Y.prototype._cancelPressed=function(){this._bSaveCanceled=true;this.fireCancel();this.oSaveAsDialog.close()};Y.prototype._getSelectedContexts=function(){return this._oRolesComponentContainer.getComponentInstance().getSelectedContexts()};Y.prototype._setSelectedContexts=function(e){if(!e){e={role:[]}}this._oRolesComponentContainer.getComponentInstance().setSelectedContexts(e)};Y.prototype._isInErrorContexts=function(){return this._oRolesComponentContainer.getComponentInstance().hasErrorsAndShowErrorMessage()};Y.prototype._determineRolesSpecificText=function(e,t){if(!e){e={role:[]}}if(e&&t){t.setText(this._oRb.getText(e.role&&e.role.length>0?"VARIANT_MANAGEMENT_VISIBILITY_RESTRICTED":"VARIANT_MANAGEMENT_VISIBILITY_NON_RESTRICTED"))}};Y.prototype._checkAndAddRolesContainerToManageDialog=function(){if(this._oRolesComponentContainer&&this._oRolesDialog){var e=null;this._oRolesDialog.getContent().some(function(t){if(t===this._oRolesComponentContainer){e=t;return true}return false}.bind(this));if(!e){this._oRolesDialog.addContent(this._oRolesComponentContainer)}}};Y.prototype._createRolesDialog=function(){if(!this._oRolesDialog){this._oRolesDialog=new C(this.getId()+"-roledialog",{draggable:true,resizable:true,contentWidth:"40%",title:this._oRb.getText("VARIANT_MANAGEMENT_SELECTROLES_DIALOG"),beginButton:new N(this.getId()+"-rolesave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),type:U.Emphasized,press:function(){if(!this._checkAndCreateContextInfoChanges(this._oCurrentContextsKey,this._oTextControl)){return}this._oRolesDialog.close()}.bind(this)}),endButton:new N(this.getId()+"-rolecancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){this._oRolesDialog.close()}.bind(this)}),content:[this._oRolesComponentContainer],stretch:n.system.phone});this._oRolesDialog.setParent(this);this._oRolesDialog.addStyleClass("sapUiContentPadding");this._oRolesDialog.addStyleClass(this._sStyleClass);this._oRolesDialog.isPopupAdaptationAllowed=function(){return false}}this._checkAndAddRolesContainerToManageDialog()};Y.prototype._openRolesDialog=function(e,t){this._createRolesDialog();this._oCurrentContextsKey=e.key;this._oTextControl=t;this._setSelectedContexts(e.contexts);this._oRolesDialog.open()};Y.prototype._checkAndCreateContextInfoChanges=function(e,t){if(e){if(this._oRolesComponentContainer){try{if(!this._isInErrorContexts()){var i=this._getSelectedContexts();var a=this._getItemByKey(e);if(a){a.contexts=i;this._determineRolesSpecificText(i,t)}}else{return false}}catch(e){return false}}return true}return false};Y.prototype._checkAndAddRolesContainerToSaveAsDialog=function(){if(this._oRolesComponentContainer&&this.oSaveAsDialog){var e=null;this.oSaveAsDialog.getContent().some(function(t){if(t===this._oRolesComponentContainer){e=t;return true}return false}.bind(this));this._setSelectedContexts({role:[]});if(!e){this.oSaveAsDialog.addContent(this._oRolesComponentContainer)}}};Y.prototype.openSaveAsDialogForKeyUser=function(e,t){this._openSaveAsDialog(true);this.oSaveAsDialog.addStyleClass(e);this._sStyleClass=e;this._bShowPublic=this._getShowPublic();this._setShowPublic(false);if(t){Promise.all([t]).then(function(e){this._oRolesComponentContainer=e[0];this._checkAndAddRolesContainerToSaveAsDialog();this.oSaveAsDialog.open()}.bind(this))}else{this.oSaveAsDialog.open()}};Y.prototype._openSaveAsDialog=function(e){this._createSaveAsDialog();this.oInputName.setValue(this.getSelectedVariantText(this.getCurrentVariantKey()));this.oInputName.setEnabled(true);this.oInputName.setValueState(j.None);this.oInputName.setValueStateText(null);this.oDefault.setSelected(false);this.oPublic.setSelected(false);this.oExecuteOnSelect.setSelected(false);if(this.oVariantPopOver){this.oVariantPopOver.close()}if(this.getManualVariantKey()){this.oInputManualKey.setVisible(true);this.oInputManualKey.setEnabled(true);this.oInputManualKey.setValueState(j.None);this.oInputManualKey.setValueStateText(null);this.oLabelKey.setVisible(true)}else{this.oInputManualKey.setVisible(false);this.oLabelKey.setVisible(false)}if(!e){this.oSaveAsDialog.open()}};Y.prototype._handleVariantSaveAs=function(e){var t=null;var i=e.trim();var a=this.oInputManualKey.getValue().trim();if(i===""){this.oInputName.setValueState(j.Error);this.oInputName.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));return}if(this.getManualVariantKey()){if(a===""){this.oInputManualKey.setValueState(j.Error);this.oInputManualKey.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"));return}t=a}if(this.oSaveAsDialog){this.oSaveAsDialog.close()}if(this.oDefault.getSelected()){this.setDefaultVariantKey(t)}this.setModified(false);this.fireSave({key:t,name:i,overwrite:false,def:this.oDefault.getSelected(),execute:this.oExecuteOnSelect.getSelected(),public:this._sStyleClass?undefined:this.oPublic.getSelected(),contexts:this._sStyleClass?this._getContextInfoChanges():undefined})};Y.prototype._getContextInfoChanges=function(){if(this._oRolesComponentContainer){try{if(!this._isInErrorContexts()){return this._getSelectedContexts()}}catch(e){return null}}return null};Y.prototype._handleVariantSave=function(){var e=this._getItemByKey(this.getCurrentVariantKey());var t=false;if(this.getDefaultVariantKey()===e.key){t=true}if(this.oVariantPopOver){this.oVariantPopOver.close()}this.fireSave({name:e.title,overwrite:true,key:e.key,def:t});this.setModified(false)};Y.prototype.openManagementDialog=function(e,t,i){if(e&&this.oManagementDialog){this.oManagementDialog.destroy();this.oManagementDialog=undefined}if(t){this._sStyleClass=t;this._bShowPublic=this._getShowPublic();this._setShowPublic(false)}if(i){Promise.all([i]).then(function(e){this._oRolesComponentContainer=e[0];this._setShowContexts(!!this._oRolesComponentContainer);this._openManagementDialog();if(this._sStyleClass){this.oManagementDialog.addStyleClass(this._sStyleClass)}}.bind(this))}else{this._setShowContexts(false);this._openManagementDialog();if(this._sStyleClass){this.oManagementDialog.addStyleClass(this._sStyleClass)}}};Y.prototype._triggerSearchInManageDialog=function(e,t){if(!e){return}var i=e.getParameters();if(!i){return}var n=i.newValue?i.newValue:"";var s=[this._getVisibleFilter(),new a({filters:[new a({path:"title",operator:o.Contains,value1:n}),new a({path:"author",operator:o.Contains,value1:n})],and:false})];t.getBinding("items").filter(s);this._bDeleteOccured=true};Y.prototype.getManageDialog=function(){return this.oManagementDialog};Y.prototype._createManagementDialog=function(){if(!this.oManagementDialog||this.oManagementDialog.bIsDestroyed){this.oManagementTable=new M(this.getId()+"-managementTable",{contextualWidth:"Auto",fixedLayout:false,growing:true,columns:[new f({width:"3rem",visible:{path:"showFavorites",model:this._sModelName}}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_NAME")}),width:"16rem"}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_VARIANTTYPE"),wrappingType:"Hyphenated"}),visible:{path:"/showPublic",model:Y.INNER_MODEL_NAME},demandPopin:true,popinDisplay:z.Inline,minScreenWidth:W.Tablet}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_DEFAULT"),wrappingType:"Hyphenated"}),hAlign:X.Center,demandPopin:true,popinDisplay:z.Block,minScreenWidth:W.Tablet,visible:{path:"/showSetAsDefault",model:Y.INNER_MODEL_NAME}}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_EXECUTEONSELECT"),wrappingType:"Hyphenated"}),hAlign:this.getDisplayTextForExecuteOnSelectionForStandardVariant()?X.Begin:X.Center,demandPopin:true,popinDisplay:z.Block,minScreenWidth:W.Tablet,visible:{path:"/showExecuteOnSelection",model:Y.INNER_MODEL_NAME}}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_VISIBILITY"),wrappingType:"Hyphenated"}),width:"8rem",demandPopin:true,popinDisplay:z.Inline,minScreenWidth:W.Tablet,visible:{path:"/showContexts",model:Y.INNER_MODEL_NAME}}),new f({header:new _({text:this._oRb.getText("VARIANT_MANAGEMENT_AUTHOR")}),demandPopin:true,popinDisplay:z.Block,minScreenWidth:W.Tablet}),new f({hAlign:X.Center}),new f({visible:false})]});this.oManagementSave=new N(this.getId()+"-managementsave",{text:this._oRb.getText("VARIANT_MANAGEMENT_SAVE"),enabled:true,type:U.Emphasized,press:function(){this._handleManageSavePressed()}.bind(this)});this.oManagementCancel=new N(this.getId()+"-managementcancel",{text:this._oRb.getText("VARIANT_MANAGEMENT_CANCEL"),press:function(){this._resumeManagementTableBinding();this.oManagementDialog.close();this._handleManageCancelPressed()}.bind(this)});this.oManagementDialog=new C(this.getId()+"-managementdialog",{contentWidth:"64%",resizable:true,draggable:true,title:this._oRb.getText("VARIANT_MANAGEMENT_MANAGEDIALOG"),beginButton:this.oManagementSave,endButton:this.oManagementCancel,afterClose:function(){if(this._sStyleClass){this._setShowPublic(this._bShowPublic);this.oManagementDialog.removeStyleClass(this._sStyleClass);this._sStyleClass=undefined;this._oRolesComponentContainer=null}}.bind(this),content:[this.oManagementTable],stretch:n.system.phone});this.oManagementDialog.isPopupAdaptationAllowed=function(){return false};this._oSearchFieldOnMgmtDialog=new p;this._oSearchFieldOnMgmtDialog.attachLiveChange(function(e){this._triggerSearchInManageDialog(e,this.oManagementTable)}.bind(this));var e=new m(this.getId()+"-mgmHeaderSearch",{contentMiddle:[this._oSearchFieldOnMgmtDialog]});this.oManagementDialog.setSubHeader(e);if(this.oVariantLayout.$().closest(".sapUiSizeCompact").length>0){this.oManagementDialog.addStyleClass("sapUiSizeCompact")}this.addDependent(this.oManagementDialog);this.oManagementTable.bindAggregation("items",{path:"variants",model:this._sModelName,factory:this._templateFactoryManagementDialog.bind(this),filters:this._getVisibleFilter()});this._bDeleteOccured=false}};Y.prototype._setFavoriteIcon=function(e,t){if(e){e.setSrc(t?"sap-icon://favorite":"sap-icon://unfavorite");e.setTooltip(this._oRb.getText(t?"VARIANT_MANAGEMENT_FAV_DEL_TOOLTIP":"VARIANT_MANAGEMENT_FAV_ADD_TOOLTIP"));e.setAlt(this._oRb.getText(t?"VARIANT_MANAGEMENT_FAV_DEL_ACC":"VARIANT_MANAGEMENT_FAV_ADD_ACC"))}};Y.prototype._templateFactoryManagementDialog=function(e,t){var i=null;var a;var o;var n;var s;var r;var h=t.getObject();if(!h){return undefined}var u=function(e){this._checkVariantNameConstraints(e.oSource,e.oSource.getBindingContext(this._sModelName).getObject().key)}.bind(this);var d=function(e){this._handleManageTitleChanged(e.oSource.getBindingContext(this._sModelName).getObject())}.bind(this);var p=function(e){this._handleManageDefaultVariantChange(e.oSource,e.oSource.getBindingContext(this._sModelName).getObject(),e.getParameters().selected)}.bind(this);var f=function(e){this._handleManageExecuteOnSelectionChanged(e.oSource.getBindingContext(this._sModelName).getObject())}.bind(this);var m=function(e){this._handleManageDeletePressed(e.oSource.getBindingContext(this._sModelName).getObject());var t=e.oSource.getParent();if(t){t.setVisible(false)}this._reCheckVariantNameConstraints()}.bind(this);var M=function(e){this._handleManageFavoriteChanged(e.oSource,e.oSource.getBindingContext(this._sModelName).getObject())}.bind(this);var y=function(e){var t=e.oSource.getBindingContext(this._sModelName).getObject();this._openRolesDialog(t,e.oSource.getParent().getItems()[0])}.bind(this);if(h.rename){n=new T({liveChange:u,change:d,value:"{"+this._sModelName+">title}"})}else{n=new D({title:"{"+this._sModelName+">title}"});if(i){n.setTooltip(i)}}a=new N({icon:"sap-icon://decline",enabled:true,type:U.Transparent,press:m,tooltip:this._oRb.getText("VARIANT_MANAGEMENT_DELETE"),visible:h.remove});this._assignColumnInfoForDeleteButton(a);o=this.oContext.getPath();var v=new l({src:{path:"favorite",model:this._sModelName,formatter:function(e){return e?"sap-icon://favorite":"sap-icon://unfavorite"}},tooltip:{path:"favorite",model:this._sModelName,formatter:function(e){return this._oRb.getText(e?"VARIANT_MANAGEMENT_FAV_DEL_TOOLTIP":"VARIANT_MANAGEMENT_FAV_ADD_TOOLTIP")}.bind(this)},press:M});if(this.getStandardVariantKey()===h.key||this.getDefaultVariantKey()===h.key){v.addStyleClass("sapUiFlVarMngmtFavNonInteractiveColor")}else{v.addStyleClass("sapUiFlVarMngmtFavColor")}if(this.getDisplayTextForExecuteOnSelectionForStandardVariant()&&this.getStandardVariantKey()===h.key){s=new V({wrapping:true,text:this.getDisplayTextForExecuteOnSelectionForStandardVariant(),select:f,selected:"{"+this._sModelName+">executeOnSelect}"})}else{s=new V({text:"",select:f,selected:"{"+this._sModelName+">executeOnSelect}"})}if(this._sStyleClass&&h.key!==this.getStandardVariantKey()){var A=new _({wrapping:false});this._determineRolesSpecificText(h.contexts,A);var S=new l({src:"sap-icon://edit",press:y});S.addStyleClass("sapUiFlVarMngmtRolesEdit");S.setTooltip(this._oRb.getText("VARIANT_MANAGEMENT_VISIBILITY_ICON_TT"));r=new P({items:[A,S]})}else{r=new _}return new c({cells:[v,n,new _({text:{path:"sharing",model:this._sModelName,formatter:function(e){return this._oRb.getText(e==="private"?"VARIANT_MANAGEMENT_PRIVATE":"VARIANT_MANAGEMENT_PUBLIC")}.bind(this)},textAlign:"Center"}),new g({groupName:this.getId(),select:p,selected:{path:o+"/defaultVariant",model:this._sModelName,formatter:function(e){return h.key===e}}}),s,r,new _({text:"{"+this._sModelName+">author}",textAlign:"Begin"}),a,new _({text:"{"+this._sModelName+">key}"})]})};Y.prototype._openManagementDialog=function(){this._createManagementDialog();if(this.oVariantPopOver){this.oVariantPopOver.close()}this._suspendManagementTableBinding();this._clearDeletedItems();this._oSearchFieldOnMgmtDialog.setValue("");if(this._bDeleteOccured){this._bDeleteOccured=false;this.oManagementTable.bindAggregation("items",{path:"variants",model:this._sModelName,factory:this._templateFactoryManagementDialog.bind(this),filters:this._getVisibleFilter()})}this.oManagementDialog.open()};Y.prototype._assignColumnInfoForDeleteButton=function(e){if(!this._oInvisibleDeleteColumnName){this._oInvisibleDeleteColumnName=new s({text:this._oRb.getText("VARIANT_MANAGEMENT_ACTION_COLUMN")});this.oManagementDialog.addContent(this._oInvisibleDeleteColumnName)}if(this._oInvisibleDeleteColumnName){e.addAriaLabelledBy(this._oInvisibleDeleteColumnName)}};Y.prototype._toggleIconActivityState=function(e,t,i){if(!e){return}if(t.key===this.getStandardVariantKey()){return}if(i&&e.hasStyleClass("sapUiFlVarMngmtFavColor")){e.removeStyleClass("sapUiFlVarMngmtFavColor");e.addStyleClass("sapUiFlVarMngmtFavNonInteractiveColor")}else if(e.hasStyleClass("sapUiFlVarMngmtFavNonInteractiveColor")){e.removeStyleClass("sapUiFlVarMngmtFavNonInteractiveColor");e.addStyleClass("sapUiFlVarMngmtFavColor")}};Y.prototype._handleManageDefaultVariantChange=function(e,t,i){var a=t.key;if(e){var o=e.getParent().getCells()[Y.COLUMN_FAV_IDX];if(i){if(this.getShowFavorites()&&!t.favorite){t.favorite=true;this._setFavoriteIcon(o,true)}this.setDefaultVariantKey(a)}this._toggleIconActivityState(o,t,i)}};Y.prototype._handleManageCancelPressed=function(){var e;var t;this._getDeletedItems().forEach(function(e){e.visible=true});this._getItems().forEach(function(e){e.title=e.originalTitle;e.favorite=e.originalFavorite;e.executeOnSelection=e.originalExecuteOnSelection;e.contexts=e.originalContexts});e=this.getOriginalDefaultVariantKey();if(e!==this.getDefaultVariantKey()){this.setDefaultVariantKey(e)}t=this.getModel(this._sModelName);if(t){t.checkUpdate()}};Y.prototype._handleManageFavoriteChanged=function(e,t){if(this.getStandardVariantKey()===t.key){return}if(this.getDefaultVariantKey()===t.key&&t.favorite){return}t.favorite=!t.favorite;this._setFavoriteIcon(e,t.favorite)};Y.prototype._getRowForKey=function(e){var t=null;if(this.oManagementTable){this.oManagementTable.getItems().some(function(i){if(e===i.getCells()[0].getBindingContext(this._sModelName).getObject().key){t=i}return t!==null}.bind(this))}return t};Y.prototype._handleManageDeletePressed=function(e){var t;var i=e.key;if(this.getStandardVariantKey()===i){return}e.visible=false;this._addDeletedItem(e);if(i===this.getDefaultVariantKey()){this.setDefaultVariantKey(this.getStandardVariantKey());if(this.getShowFavorites()){var a=this._getItemByKey(this.getStandardVariantKey());if(a&&!a.favorite){var o=this._getRowForKey(this.getStandardVariantKey());if(o){a.favorite=true;this._setFavoriteIcon(o.getCells()[Y.COLUMN_FAV_IDX],true)}}}}t=this.getModel(this._sModelName);if(t){t.checkUpdate()}this.oManagementCancel.focus()};Y.prototype._handleManageExecuteOnSelectionChanged=function(){};Y.prototype._handleManageTitleChanged=function(){};Y.prototype._handleManageSavePressed=function(){if(this._anyInErrorState(this.oManagementTable)){return}this._getDeletedItems().some(function(e){if(e.key===this.getCurrentVariantKey()){var t=this.getStandardVariantKey();this.setModified(false);this.setCurrentVariantKey(t);this.fireEvent("select",{key:t});return true}return false}.bind(this));this.fireManage();this._resumeManagementTableBinding();this.oManagementDialog.close()};Y.prototype._resumeManagementTableBinding=function(){if(this.oManagementTable){var e=this.oManagementTable.getBinding("items");if(e){e.resume()}}};Y.prototype._suspendManagementTableBinding=function(){if(this.oManagementTable){var e=this.oManagementTable.getBinding("items");if(e){e.suspend()}}};Y.prototype._anyInErrorState=function(e){var t;var i;var a=false;if(e){t=e.getItems();t.some(function(e){i=e.getCells()[Y.COLUMN_NAME_IDX];if(i&&i.getValueState&&i.getValueState()===j.Error){a=true}return a})}return a};Y.prototype._getFilters=function(e){var t=[];if(e){t.push(e)}t.push(this._getVisibleFilter());if(this.getShowFavorites()){t.push(this._getFilterFavorites())}return t};Y.prototype._getVisibleFilter=function(){return new a({path:"visible",operator:o.EQ,value1:true})};Y.prototype._getFilterFavorites=function(){return new a({path:"favorite",operator:o.EQ,value1:true})};Y.prototype._verifyVariantNameConstraints=function(e,t){if(!e){return}var i=e.getValue();i=i.trim();if(!this._checkIsDuplicate(i,t)){if(i===""){e.setValueState(j.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_EMPTY"))}else if(i.indexOf("{")>-1){e.setValueState(j.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_NOT_ALLOWED_CHAR",["{"]))}else if(i.length>Y.MAX_NAME_LEN){e.setValueState(j.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_MAX_LEN",[Y.MAX_NAME_LEN]))}else{e.setValueState(j.None);e.setValueStateText(null)}}else{e.setValueState(j.Error);e.setValueStateText(this._oRb.getText("VARIANT_MANAGEMENT_ERROR_DUPLICATE"))}};Y.prototype._checkVariantNameConstraints=function(e,t){this._verifyVariantNameConstraints(e,t);if(this.oManagementDialog&&this.oManagementDialog.isOpen()){this._reCheckVariantNameConstraints()}};Y.prototype._reCheckVariantNameConstraints=function(){var e;var t=false;if(this.oManagementTable){e=this.oManagementTable.getItems();e.some(function(e){var i=e.getBindingContext(this._sModelName).getObject();if(i&&i.visible){var a=e.getCells()[Y.COLUMN_NAME_IDX];if(a&&a.getValueState&&a.getValueState()===j.Error){this._verifyVariantNameConstraints(a,i.key);if(a.getValueState()===j.Error){t=true}}}return t}.bind(this))}return t};Y.prototype._checkIsDuplicate=function(e,t){if(this.oManagementDialog&&this.oManagementDialog.isOpen()){return this._checkIsDuplicateInManageTable(e,t)}return this._checkIsDuplicateInModel(e,t)};Y.prototype._checkIsDuplicateInModel=function(e,t){var i=false;var a=this._getItems();var o=e.toLowerCase();a.some(function(e){if(e.title.toLowerCase()===o){if(t&&t===e.key){return false}i=true}return i});return i};Y.prototype._checkIsDuplicateInManageTable=function(e,t){var i;var a=false;var o=e.toLowerCase();if(this.oManagementTable){i=this.oManagementTable.getItems();i.some(function(e){var i;var n=e.getBindingContext(this._sModelName).getObject();if(n&&n.visible){var s=e.getCells()[Y.COLUMN_NAME_IDX];if(s&&n.key!==t){if(s.isA("sap.m.Input")){i=s.getValue().toLowerCase()}else{i=s.getTitle().toLowerCase()}if(i===o){a=true}}}return a}.bind(this))}return a};Y.prototype.exit=function(){var e;if(this.oVariantInvisibleText){this.oVariantInvisibleText.destroy(true);this.oVariantInvisibleText=undefined}if(this.oDefault&&!this.oDefault._bIsBeingDestroyed){this.oDefault.destroy()}this.oDefault=undefined;if(this.oPublic&&!this.oPublic._bIsBeingDestroyed){this.oPublic.destroy()}this.oPublic=undefined;if(this.oExecuteOnSelect&&!this.oExecuteOnSelect._bIsBeingDestroyed){this.oExecuteOnSelect.destroy()}this.oExecuteOnSelect=undefined;this._oRb=undefined;this.oContext=undefined;this._oVariantList=undefined;this.oVariantSelectionPage=undefined;this.oVariantLayout=undefined;this.oVariantText=undefined;this.oVariantModifiedText=undefined;this.oVariantPopoverTrigger=undefined;this._oSearchField=undefined;this._oSearchFieldOnMgmtDialog=undefined;e=this.getModel(Y.INNER_MODEL_NAME);if(e){e.destroy()}this._oRolesComponentContainer=null;this._sStyleClass=null;this._fRegisteredApplyAutomaticallyOnStandardVariant=null};return Y});