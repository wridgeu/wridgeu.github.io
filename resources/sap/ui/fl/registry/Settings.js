/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/write/_internal/Storage","sap/base/Log"],function(e,t){"use strict";var n=function(e){if(!e){throw new Error("no flex settings provided")}this._oSettings=e};n.attachEvent=function(e,t){n._oEventProvider.attachEvent(e,t)};n.detachEvent=function(e,t){n._oEventProvider.detachEvent(e,t)};n.getInstance=function(){if(n._instance){return Promise.resolve(n._instance)}if(n._oLoadSettingsPromise){return n._oLoadSettingsPromise}return n._loadSettings()};n._loadSettings=function(){var i=e.loadFeatures().then(function(e){if(!e){t.error("The request for flexibility settings failed; A default response is generated and returned to consuming APIs");e={isKeyUser:false,isKeyUserTranslationEnabled:false,isVariantSharingEnabled:false,isVariantPersonalizationEnabled:true,isAtoAvailable:false,isAtoEnabled:false,isAppVariantSaveAsEnabled:false,isCondensingEnabled:false,isProductiveSystem:true,isPublicLayerAvailable:false,isVariantAdaptationEnabled:false,versioning:{},_bFlexChangeMode:false,_bFlexibilityAdaptationButtonAllowed:false}}return n._storeInstance(e)});n._oLoadSettingsPromise=i;return i};n._storeInstance=function(e){if(!n._instance){n._instance=new n(e)}return n._instance};n.getInstanceOrUndef=function(){return n._instance};n.getDefaultLayerPermissions=function(){return{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:true,PUBLIC:false,USER:false}};n.getDeveloperModeLayerPermissions=function(){return{VENDOR:true,CUSTOMER_BASE:true,CUSTOMER:false,PUBLIC:false,USER:false}};n.prototype._getBooleanProperty=function(e){return this._oSettings[e]||false};n.prototype.isKeyUser=function(){return this._getBooleanProperty("isKeyUser")};n.prototype.isKeyUserTranslationEnabled=function(){return this._getBooleanProperty("isKeyUserTranslationEnabled")};n.prototype.isPublicLayerAvailable=function(){return this._getBooleanProperty("isPublicLayerAvailable")};n.prototype.isVariantAdaptationEnabled=function(){return this._getBooleanProperty("isVariantAdaptationEnabled")};n.prototype.isAppVariantSaveAsEnabled=function(){return this._getBooleanProperty("isAppVariantSaveAsEnabled")};n.prototype.isVersioningEnabled=function(e){return!!(this._oSettings.versioning[e]||this._oSettings.versioning["ALL"])};n.prototype.isModelS=function(){return this._getBooleanProperty("isAtoAvailable")};n.prototype.isAtoEnabled=function(){return this._getBooleanProperty("isAtoEnabled")};n.prototype.isAtoAvailable=function(){return this._getBooleanProperty("isAtoAvailable")};n.prototype.isProductiveSystem=function(){return this._getBooleanProperty("isProductiveSystem")};n.prototype.isVariantSharingEnabled=function(){return this._getBooleanProperty("isVariantSharingEnabled")};n.prototype.isPublicFlVariantEnabled=function(){return this._getBooleanProperty("isPublicFlVariantEnabled")};n.prototype.isVariantPersonalizationEnabled=function(){return this._getBooleanProperty("isVariantPersonalizationEnabled")};n.prototype.isCondensingEnabled=function(){return this._getBooleanProperty("isCondensingEnabled")};n.prototype.getSystem=function(){return this._oSettings.system};n.prototype.getClient=function(){return this._oSettings.client};return n},true);