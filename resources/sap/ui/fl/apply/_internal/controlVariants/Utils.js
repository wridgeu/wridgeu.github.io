/*
 * ! OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/includes","sap/ui/core/util/reflection/JsControlTreeModifier","sap/ui/fl/Variant"],function(e,t,n){"use strict";function r(e,t){if(!t){return undefined}if(e.indexOf(t.getId())>-1){return t.getId()}return r(e,t.getParent())}var a={DEFAULT_AUTHOR:"SAP",VARIANT_TECHNICAL_PARAMETER:"sap-ui-fl-control-variant-id",compareVariants:function(e,t){if(e.content.content.title.toLowerCase()<t.content.content.title.toLowerCase()){return-1}else if(e.content.content.title.toLowerCase()>t.content.content.title.toLowerCase()){return 1}return 0},getIndexToSortVariant:function(e,t){var n=e.length;e.some(function(e,r){if(a.compareVariants(t,e)<0){n=r;return true}});return n},createVariant:function(e){var r;var a;var i=e.variantSpecificData.content.variantManagementReference;if(i){var o=t.checkControlId(i,e.model.oAppComponent);if(!o){throw new Error("Generated ID attribute found - to offer flexibility a stable VariantManagement ID is needed to assign the changes to, but for this VariantManagement control the ID was generated by SAPUI5 "+i)}}e.variantSpecificData.content.reference=e.model.sFlexReference;e.variantSpecificData.content.packageName="$TMP";a=n.createInitialFileContent(e.variantSpecificData);r=new n(a);return r},getRelevantVariantManagementControlId:function(e,t){var n={};var a=t.reduce(function(e,t){var r=sap.ui.getCore().byId(t);var a=r.getFor();a.forEach(function(e){n[e]=t});return e.concat(a)},[]);var i=r(a,e);return n[i]}};return a});