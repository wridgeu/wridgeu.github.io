/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","sap/ui/core/HTML","sap/ui/richtexteditor/RichTextEditor","sap/m/Button","sap/m/Image","sap/m/PDFViewer","sap/m/Dialog","sap/m/IllustratedMessage","sap/m/IllustratedMessageType","sap/m/Carousel"],function(e,t,a,i,r,n,o,s,g,l){"use strict";var c=sap.ui.getCore().getLibraryResourceBundle("sap.m");var u={Png:"image/png",Bmp:"image/bmp",Jpeg:"image/jpeg",Gif:"image/gif",Txt:"text/plain",Pdf:"application/pdf",ChromePdf:"application/x-google-chrome-pdf",Mpeg:"video/mpeg",Mp4:"video/mp4",Quicktime:"video/quicktime",MsVideo:"video/x-msvideo"};var p=e.extend("sap.m.upload.FilePreviewDialog",{constructor:function(e){if(!e){return}var t=e.getParent().getAggregation("items");if(!t||t.length===0){return}var a=this._createCarousel(e,t);this._oDialog=this._createDialog(a,t)},open:function(){if(!this._oDialog){return}this._oDialog.open()},_createCarousel:function(e,i){var o="";var c=i.map(function(i){var l=i.getMediaType();var c=null;switch(l.toLowerCase()){case u.Png:case u.Bmp:case u.Jpeg:case u.Gif:{c=new r({src:i.getUrl()});break}case u.Txt:{var p=new XMLHttpRequest;p.open("GET",i.getUrl(),false);p.send(null);var d=p.responseText;c=new a({height:"100%",width:"100%",value:d,editable:false});break}case u.Pdf:case u.ChromePdf:{c=new n({source:i.getUrl(),showDownloadButton:false});break}case u.Mpeg:case u.Mp4:case u.Quicktime:case u.MsVideo:{c=new t({content:"<video controls width='100%' height='100%' src='"+i.getUrl()+"'>"});break}default:{c=new s({illustrationType:g.NoData,title:i.getFileName(),description:"No preview available for this file.",enableVerticalResponsiveness:true});break}}o=i.getId()===e.getId()?c.getId():o;return c});var p=new l({showPageIndicator:true,pages:[c],activePage:o,height:"85vh",pageChanged:function(e){var t=c.findIndex(function(t){return t.sId===e.getParameter("newActivePageId")});var a=i[t].getFileName();e.getSource().getParent().setProperty("title",a)}});return p},_createDialog:function(e,t){var a=this;var r=this._getActiveUploadSetTableItem(e,t);var n=new o({title:r.getFileName(),content:e,horizontalScrolling:true,verticalScrolling:true,buttons:[new i({text:c.getText("UPLOAD_SET_TABLE_FILE_PREVIEW_DIALOG_DOWNLOAD"),press:function(){a._getActiveUploadSetTableItem(e,t).download(true)}}),new i({text:c.getText("UPLOAD_SET_TABLE_FILE_PREVIEW_DIALOG_CLOSE"),press:function(){a._oDialog.close()}})]});return n},_getActiveUploadSetTableItem:function(e,t){var a=e.getActivePage();var i=e.getPages();var r=i.findIndex(function(e){return e.sId===a});return t[r]}});return p});
//# sourceMappingURL=FilePreviewDialog.js.map