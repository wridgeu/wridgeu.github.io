/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/m/p13n/AbstractContainer","sap/m/Bar","sap/m/Button","sap/m/Text","sap/m/List","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/p13n/AbstractContainerItem","sap/ui/Device","sap/m/library","sap/m/StandardListItem"],function(t,e,i,a,s,o,n,r,h,p,g){"use strict";var d=p.ButtonType;var _=p.ListType;var u=t.extend("sap.m.p13n.Container",{metadata:{library:"sap.m",properties:{listLayout:{type:"boolean",defaultValue:false}}},renderer:{apiVersion:2}});u.prototype.DEFAULT_KEY="$default";u.prototype.init=function(){t.prototype.init.apply(this,arguments);this.addStyleClass("sapMP13nContainer");this.setListLayout(h.system.phone)};u.prototype.setListLayout=function(t){this.setProperty("listLayout",t);this._getTabBar().removeAllItems();this._getNavigationList().removeAllItems();var i;var a;var s;if(t){this._getTabBar().setVisible(false);this._getNavigationList();this.switchView(this.DEFAULT_KEY);i=this._getNavBackBtn();a=this._getHeaderText()}else{this._getTabBar().setVisible(true);var o=this.getViews();if(o.length>1){this.switchView(o[1].getKey())}s=this._getTabBar()}var n=this.getHeader();if(!n){var r=new e({contentLeft:s?s:[i,a]});this.setHeader(r)}else{n.removeAllContentLeft();if(s){n.addContentLeft(s)}else{n.addContentLeft(i);n.addContentLeft(a)}}this.getViews().forEach(function(t){this._addToNavigator(t)}.bind(this));return this};u.prototype.switchView=function(e){t.prototype.switchView.apply(this,arguments);if(this._bPrevented){return}var i=this.getParent();if(i&&i.isA("sap.ui.core.Control")){i.invalidate();var a=i.getDependents();if(a){a.forEach(function(t){if(t&&t.isA("sap.ui.core.Control")){t.invalidate()}})}}this.getLayout().setShowHeader(e!==this.DEFAULT_KEY);this.getLayout().setShowFooter(e!==this.DEFAULT_KEY);this._getTabBar().setSelectedKey(e);this._getNavBackBtn().setVisible(e!==this.DEFAULT_KEY);this._getHeaderText().setText(this.getView(e)&&this.getView(e).getText()||e);this._getHeaderText().setVisible(this._getNavBackBtn().getVisible())};u.prototype.addView=function(e){this._addToNavigator(typeof e=="string"?this.getView(e):e);t.prototype.addView.apply(this,arguments);return this};u.prototype.removeView=function(e){this._removeFromNavigator(typeof e=="string"?this.getView(e):e);t.prototype.removeView.apply(this,arguments);return this};u.prototype.addSeparator=function(){if(!this.getProperty("listLayout")){return}var t=this._getNavigationList().getItems();var e=t[t.length-1];e.addStyleClass("sapMMenuDivider");return this};u.prototype.getLayout=function(){return this.oLayout};u.prototype._getTabBar=function(){if(!this._oTabBar){this._oTabBar=new o({headerBackgroundDesign:"Transparent",applyContentPadding:false,select:function(t){this.switchView(t.getParameter("key"))}.bind(this)});this.addDependent(this._oTabBar)}return this._oTabBar};u.prototype._getNavigationList=function(){if(!this._oNavigationList){this._oNavigationList=new s({itemPress:function(t){var e=t.getParameter("listItem");this.switchView(e._key)}.bind(this)}).addStyleClass("p13nContainerDefaultList");this.addDependent(this._oNavigationList)}if(!this.getView(this.DEFAULT_KEY)){var t=new r({key:this.DEFAULT_KEY,content:this._oNavigationList});this.addView(t)}return this._oNavigationList};u.prototype._getNavBackBtn=function(){if(!this._oNavBackBtn){this._oNavBackBtn=new i({type:d.Back,press:function(t){this.switchView(this.DEFAULT_KEY)}.bind(this)});this.addDependent(this._oNavBackBtn)}return this._oNavBackBtn};u.prototype._getHeaderText=function(){if(!this._oHeaderText){this._oHeaderText=new a({});this.addDependent(this._oHeaderText)}return this._oHeaderText};u.prototype._addToNavigator=function(t){var e=t.getKey(),i=t.getBindingInfo("text"),a=t.getText(),s=t.getIcon();if(i&&i.parts){a={parts:i.parts}}if(e==this.DEFAULT_KEY){return}if(this.getListLayout()){this.getView(this.DEFAULT_KEY);var o=new g({type:_.Navigation,icon:s,title:a});o._key=e;this._getNavigationList().addItem(o)}else{this._getTabBar().addItem(new n({key:e,text:a||e}))}};u.prototype._removeFromNavigator=function(t){var e=t.getKey();if(e==this.DEFAULT_KEY){return}if(this.getListLayout()){var i=this._getNavigationList().getItems().find(function(t){return t._key===e});this._getNavigationList().removeItem(i)}else{var a=this._getTabBar().getItems().find(function(t){return t.getKey()===e});this._getTabBar().removeItem(a)}};u.prototype.exit=function(){t.prototype.exit.apply(this,arguments);if(this._oTabBar){this._oTabBar.destroy();this._oTabBar=null}if(this._oNavigationList){this._oNavigationList.destroy();this._oNavigationList=null}this._oNavBackBtn=null;this._oHeaderText=null};return u});
//# sourceMappingURL=Container.js.map