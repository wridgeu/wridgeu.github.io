/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./library","sap/ui/core/Control","sap/ui/core/delegate/ScrollEnablement","sap/m/Title","sap/m/Button","sap/m/Bar","sap/ui/core/ContextMenuSupport","sap/ui/core/util/ResponsivePaddingsEnablement","sap/ui/core/library","sap/ui/core/Element","sap/ui/core/InvisibleText","./TitlePropagationSupport","./PageRenderer","sap/ui/thirdparty/jquery","sap/ui/core/Configuration"],function(e,t,o,a,r,i,n,s,l,u,p,g,d,jQuery,h){"use strict";var f=l.AccessibleLandmarkRole;var c=e.ButtonType;var _=e.PageBackgroundDesign;var T=l.TitleLevel;var y=e.TitleAlignment;var v="div";var b="header";var m="footer";var B=t.extend("sap.m.Page",{metadata:{library:"sap.m",properties:{title:{type:"string",group:"Data",defaultValue:null},titleLevel:{type:"sap.ui.core.TitleLevel",group:"Appearance",defaultValue:T.Auto},showNavButton:{type:"boolean",group:"Appearance",defaultValue:false},showHeader:{type:"boolean",group:"Appearance",defaultValue:true},showSubHeader:{type:"boolean",group:"Appearance",defaultValue:true},navButtonText:{type:"string",group:"Misc",defaultValue:null,deprecated:true},navButtonTooltip:{type:"string",group:"Misc",defaultValue:null},enableScrolling:{type:"boolean",group:"Behavior",defaultValue:true},icon:{type:"sap.ui.core.URI",group:"Appearance",defaultValue:null,deprecated:true},backgroundDesign:{type:"sap.m.PageBackgroundDesign",group:"Appearance",defaultValue:_.Standard},navButtonType:{type:"sap.m.ButtonType",group:"Appearance",defaultValue:c.Back,deprecated:true},showFooter:{type:"boolean",group:"Appearance",defaultValue:true},contentOnlyBusy:{type:"boolean",group:"Appearance",defaultValue:false},floatingFooter:{type:"boolean",group:"Appearance",defaultValue:false},titleAlignment:{type:"sap.m.TitleAlignment",group:"Misc",defaultValue:y.Auto}},defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true,singularName:"content"},customHeader:{type:"sap.m.IBar",multiple:false},footer:{type:"sap.m.IBar",multiple:false},subHeader:{type:"sap.m.IBar",multiple:false},headerContent:{type:"sap.ui.core.Control",multiple:true,singularName:"headerContent",forwarding:{getter:"_getInternalHeader",aggregation:"contentRight"}},landmarkInfo:{type:"sap.m.PageAccessibleLandmarkInfo",multiple:false},_internalHeader:{type:"sap.m.IBar",multiple:false,visibility:"hidden"}},events:{navButtonTap:{deprecated:true},navButtonPress:{}},dnd:{draggable:false,droppable:true},designtime:"sap/m/designtime/Page.designtime"},renderer:d});n.apply(B.prototype);s.call(B.prototype,{header:{suffix:"intHeader"},subHeader:{selector:".sapMPageSubHeader .sapMIBar"},content:{suffix:"cont"},footer:{selector:".sapMPageFooter:not(.sapMPageFloatingFooter) .sapMIBar"},floatingFooter:{selector:".sapMPageFloatingFooter.sapMPageFooter"}});g.call(B.prototype,"content",function(){return this._headerTitle?this._headerTitle.getId():false});B.FOOTER_ANIMATION_DURATION=350;B.prototype.init=function(){this._initTitlePropagationSupport();this._initResponsivePaddingsEnablement()};B.prototype._hasScrolling=function(){return this.getEnableScrolling()};B.prototype.onBeforeRendering=function(){var e=this.getCustomHeader()||this.getAggregation("_internalHeader"),t=this.getFooter();if(t&&!t.getAriaLabelledBy().length){t.addAriaLabelledBy(this._getFooterToolbarAriaLabelledBy(t.getId()))}if(this._oScroller&&!this._hasScrolling()){this._oScroller.destroy();this._oScroller=null}else if(this._hasScrolling()&&!this._oScroller){this._oScroller=new o(this,null,{scrollContainerId:this.getId()+"-cont",horizontal:false,vertical:true})}if(this._headerTitle){this._headerTitle.setLevel(this.getTitleLevel())}this._ensureNavButton();if(e&&e.setTitleAlignment){e.setTitleAlignment(this.getTitleAlignment())}};B.prototype.onAfterRendering=function(){this.$().toggleClass("sapMPageBusyCoversAll",!this.getContentOnlyBusy());this._sBusySection=this.getContentOnlyBusy()?"cont":null};B.prototype.exit=function(){if(this._oScroller){this._oScroller.destroy();this._oScroller=null}if(this._headerTitle){this._headerTitle.destroy();this._headerTitle=null}if(this._navBtn){this._navBtn.destroy();this._navBtn=null}if(this._appIcon){this._appIcon.destroy();this._appIcon=null}if(this._oHeaderToolbarInvisibleText){this._oHeaderToolbarInvisibleText.destroy();this._oHeaderToolbarInvisibleText=null}if(this._oFooterToolbarInvisibleText){this._oFooterToolbarInvisibleText.destroy();this._oFooterToolbarInvisibleText=null}};B.prototype.setBackgroundDesign=function(e){var t=this.getBackgroundDesign();this.setProperty("backgroundDesign",e,true);this.$().removeClass("sapMPageBg"+t).addClass("sapMPageBg"+this.getBackgroundDesign());return this};B.prototype.setTitle=function(e){var t=!this._headerTitle;this._headerTitle=this._headerTitle||new a(this.getId()+"-title",{level:this.getTitleLevel()});this._headerTitle.setText(e);if(t){this._updateHeaderContent(this._headerTitle,"middle",0)}this.setProperty("title",e,true);return this};B.prototype._ensureNavButton=function(){if(!this.getShowNavButton()){return}var e=this.getNavButtonTooltip()||sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("PAGE_NAVBUTTON_TEXT");if(!this._navBtn){this._navBtn=new r(this.getId()+"-navButton",{press:function(){this.fireNavButtonPress();this.fireNavButtonTap()}.bind(this)})}this._navBtn.setType(this.getNavButtonType());this._navBtn.setTooltip(e)};B.prototype.setShowNavButton=function(e){var t=!!this.getShowNavButton();if(e===t){return this}this.setProperty("showNavButton",e,true);if(e){this._ensureNavButton();if(this._appIcon){this._updateHeaderContent(this._appIcon,"left",-1)}this._updateHeaderContent(this._navBtn,"left",0)}else if(this._navBtn){this._updateHeaderContent(this._navBtn,"left",-1)}return this};B.prototype.setShowFooter=function(e){if(this.getDomRef()){e?this.$().addClass("sapMPageWithFooter"):this.$().removeClass("sapMPageWithFooter")}var t=jQuery(this.getDomRef()).find(".sapMPageFooter").last(),o=h.getAnimationMode(),a=o!==h.AnimationMode.none&&o!==h.AnimationMode.minimal;if(!this.getFloatingFooter()){this.setProperty("showFooter",e);return this}this.setProperty("showFooter",e,true);t.removeClass("sapUiHidden");t.toggleClass("sapMPageFooterControlShow",e);t.toggleClass("sapMPageFooterControlHide",!e);if(e){return this}if(a){setTimeout(function(){t.toggleClass("sapUiHidden",!e)},B.FOOTER_ANIMATION_DURATION)}else{t.toggleClass("sapUiHidden",!e)}return this};B.prototype._updateHeaderContent=function(e,t,o){var a=this._getInternalHeader();if(a){switch(t){case"left":if(o==-1){if(a.getContentLeft()){a.removeContentLeft(e)}}else{if(a.indexOfContentLeft(e)!=o){a.insertContentLeft(e,o);a.invalidate()}}break;case"middle":if(o==-1){if(a.getContentMiddle()){a.removeContentMiddle(e)}}else{if(a.indexOfContentMiddle(e)!=o){a.insertContentMiddle(e,o);a.invalidate()}}break;case"right":if(o==-1){if(a.getContentRight()){a.removeContentRight(e)}}else{if(a.indexOfContentRight(e)!=o){a.insertContentRight(e,o);a.invalidate()}}break;default:break}}};B.prototype._getInternalHeader=function(){var e=this.getAggregation("_internalHeader");if(!e){var t=this.getId()+"-intHeader";this.setAggregation("_internalHeader",new i(t,{titleAlignment:this.getTitleAlignment(),ariaLabelledBy:this._getHeaderToolbarAriaLabelledBy(t)}),true);e=this.getAggregation("_internalHeader");if(this.getShowNavButton()&&this._navBtn){this._updateHeaderContent(this._navBtn,"left",0)}if(this.getTitle()&&this._headerTitle){this._updateHeaderContent(this._headerTitle,"middle",0)}}return e};B.prototype._getAnyHeader=function(){var e=this.getCustomHeader();if(e){return e.addStyleClass("sapMPageHeader")}return this._getInternalHeader().addStyleClass("sapMPageHeader")};B.prototype.getScrollDelegate=function(){return this._oScroller};B.prototype._formatLandmarkInfo=function(e,t){if(e){var o=e["get"+t+"Role"]()||"",a=e["get"+t+"Label"]()||"";if(o===f.None){o=""}return{role:o.toLowerCase(),label:a}}return{}};B.prototype._getHeaderTag=function(e){if(e&&e.getHeaderRole()){return v}return b};B.prototype._getSubHeaderTag=function(e){if(e&&e.getSubHeaderRole()){return v}return b};B.prototype._getFooterTag=function(e){if(e&&e.getFooterRole()){return v}return m};B.prototype.scrollTo=function(e,t){if(this._oScroller){this._oScroller.scrollTo(0,e,t)}return this};B.prototype.scrollToElement=function(e,t,o){if(e instanceof u){e=e.getDomRef()}if(this._oScroller){this._oScroller.scrollToElement(e,t,o)}return this};B.prototype.setCustomHeader=function(e){this.setAggregation("customHeader",e);this.toggleStyleClass("sapFShellBar-CTX",!!e&&e.isA("sap.f.ShellBar"));if(e&&this.mEventRegistry["_adaptableContentChange"]){this.fireEvent("_adaptableContentChange",{parent:this,adaptableContent:e})}return this};B.prototype._getAdaptableContent=function(){return this._getAnyHeader()};B.prototype._getHeaderToolbarAriaLabelledBy=function(e){if(!this._oHeaderToolbarInvisibleText){this._oHeaderToolbarInvisibleText=new p(e+"-InvisibleText",{text:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("ARIA_LABEL_TOOLBAR_HEADER_ACTIONS")}).toStatic()}return this._oHeaderToolbarInvisibleText};B.prototype._getFooterToolbarAriaLabelledBy=function(e){if(!this._oFooterToolbarInvisibleText){this._oFooterToolbarInvisibleText=new p(e+"-InvisibleText",{text:sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("ARIA_LABEL_TOOLBAR_FOOTER_ACTIONS")}).toStatic()}return this._oFooterToolbarInvisibleText};return B});
//# sourceMappingURL=Page.js.map