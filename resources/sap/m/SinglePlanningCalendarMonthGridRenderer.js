/*!
 * OpenUI5
 * (c) Copyright 2009-2023 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/unified/calendar/CalendarDate","sap/ui/unified/calendar/CalendarUtils","sap/ui/unified/calendar/Month","sap/ui/core/IconPool","./PlanningCalendarLegend","sap/ui/core/InvisibleText","sap/ui/core/Core","sap/ui/unified/library","sap/ui/core/date/CalendarUtils","sap/ui/core/Locale","sap/ui/core/Configuration","sap/ui/core/date/UI5Date"],function(e,a,t,n,l,i,s,r,o,d,p,c){"use strict";var g=r.CalendarDayType;var f={apiVersion:2};f.render=function(e,a){var t=a._getCoreLocaleData();var n=a._getDensitySizes();e.openStart("div",a);e.class("sapMSinglePCGrid");e.class("sapMSPCMonthGrid");e.openEnd();this.renderDayNames(e,a,t);e.openStart("div");e.class("sapMSinglePCGridContent");e.openEnd();this.renderCells(e,a,t,n);e.close("div");e.close("div")};f.renderCells=function(e,a,t,n){var l=a._getCells(),i=a._getVerticalLabels(),s=a._getColumns(),r=[],o=[],d,p,c,g,f=[],u,v,S,C;for(S=0;S<a._getRows();S++){v=0;e.openStart("div");e.attr("role","grid");e.class("sapMSPCMonthWeek");e.openEnd();e.openStart("div");e.class("sapMSPCMonthWeekNumber");e.openEnd();e.text(i[S]);e.close("div");for(C=0;C<s;C++){d=S*s+C;p=l[d];c=a._getAppointmetsForADay(p);g=a._getPreviousAppointmetsForADay(p);f.push(g);u=a._getMoreCountPerCell(d);r.push(u);o.push(c);v=Math.max(v,a._aAppsLevelsPerDay[d].length)}e.openStart("div");e.class("sapMSPCMonthDays");e.class("sapMSPCMonthDaysMax"+v);e.attr("role","row");e.openEnd();for(C=0;C<s;C++){d=S*s+C;p=l[d];this.renderDay(e,a,p,t,r[d],d)}e.openStart("div");e.class("sapMSinglePCBlockers");e.class("sapUiCalendarRowVisFilled");e.attr("role","list");e.openEnd();for(C=0;C<s;C++){d=S*s+C;p=l[d];if(C===0){this.renderAppointments(e,a,f[d],C,r[d],n,S,p)}this.renderAppointments(e,a,o[d],C,r[d],n,S,p)}e.close("div");e.close("div");e.close("div")}};f.renderDay=function(n,i,r,o,d,p){var g=i._getSpecialDates(),f=t.prototype._getDateTypes.call(i,r),u=i._getDateFormatter(),v=r.isSame(e.fromLocalJSDate(c.getInstance())),S,C;n.openStart("div");n.class("sapMSPCMonthDay");if(i._checkDateSelected(r)){n.class("sapMSPCMonthDaySelected")}if(v){n.class("sapMSPCMonthDayToday")}n.attr("role","gridcell");if(a._isWeekend(r,o)||!a._isSameMonthAndYear(r,e.fromLocalJSDate(i.getStartDate()))){n.class("nonWorkingTimeframe")}if(g){if(f&&f[0]){S=f[0];n.class("sapUiCalendarSpecialDay"+S.type);C=l.findLegendItemForItem(s.byId(i._sLegendId),S)}}n.attr("sap-ui-date",r.valueOf().toString());n.attr("tabindex",-1);n.attr("aria-labelledby",u.format(r.toLocalJSDate())+"-Descr");n.openEnd();this.renderDndPlaceholder(n,i.getAggregation("_appsPlaceholders")[p]);if(v){n.openStart("div");n.class("sapMSPCMonthNowMarker");n.openEnd()}n.openStart("div");n.class("specialDateIndicator");n.openEnd();n.close("div");n.openStart("div");n.class("sapMSPCMonthDayNumber");n.openEnd();n.text(r.getDate());n.close("div");if(d){n.openStart("div");n.class("sapMSPCMonthLnkMore");n.openEnd();n.renderControl(i._getMoreLink(d,r,p));n.close("div")}n.openStart("span",u.format(r.toLocalJSDate())+"-Descr");n.class("sapUiInvisibleText");n.openEnd();n.text(i._getCellStartInfo(r.toLocalJSDate()));if(i._sLegendId&&C){n.text(C)}n.close("span");if(v){n.close("div")}n.close("div")};f.renderAppointments=function(e,a,t,n,l,i,s,r){var o=a._getMaxAppointments(),d=l?o-2:o-1;for(var p=0;p<t.length;p++){if(t[p].level<=d){this.renderAppointment(e,a,t[p],n,i,s,r)}}};f.renderAppointment=function(a,t,n,l,r,o,d){var p=n.data,f=n.width,u=n.level,v=t._getColumns(),S=p.getTooltip_AsString(),C=p.getType(),D=p.getColor(),y=p.getTitle(),h=p.getText(),b=p.getIcon(),m=p.getId(),A=p.getParent().getEnableAppointmentsDragAndDrop(),M=d&&d.isSame(e.fromLocalJSDate(c.getInstance())),I={role:"listitem",labelledby:{value:i.getStaticId("sap.ui.unified","APPOINTMENT"),append:true},selected:null},_=v-l-f,P=s.getConfiguration().getRTL(),T,E=s.getConfiguration().getTheme(),x;if(E.includes("horizon")){if(M){x=E.indexOf("_hc")?5:1}else{x=E.indexOf("_hc")?3:1}}else{if(M){x=E.indexOf("_hc")?3:1}else{x=E.indexOf("_hc")?2:1}}_=_<0?0:_;if(y){I["labelledby"].value=I["labelledby"].value+" "+m+"-Title"}I["labelledby"].value=I["labelledby"].value+" "+m+"-Descr";if(h){I["labelledby"].value=I["labelledby"].value+" "+m+"-Text"}if(p.getTentative()){I["labelledby"].value=I["labelledby"].value+" "+i.getStaticId("sap.ui.unified","APPOINTMENT_TENTATIVE")}if(p.getSelected()){I["labelledby"].value=I["labelledby"].value+" "+i.getStaticId("sap.ui.unified","APPOINTMENT_SELECTED")}a.openStart("div",p.getId()+"-"+l+"_"+o);a.attr("draggable",A);a.attr("data-sap-ui-draggable",A);a.attr("data-sap-ui-related",p.getId());a.attr("data-sap-level",u);a.attr("data-sap-width",f);a.attr("tabindex",0);if(S){a.attr("title",S)}a.accessibilityState(p,I);a.class("sapMSinglePCAppointmentWrap");a.class("sapUiCalendarRowApps");if(!D&&C!==g.None){a.class("sapUiCalendarApp"+C)}if(D){if(s.getConfiguration().getRTL()){a.style("border-right-color",D)}else{a.style("border-left-color",D)}}a.style(P?"right":"left","calc("+l*100/v+"% + "+x+"px)");a.style(P?"left":"right","calc("+_*100/v+"% + "+x+"px)");a.style("top",u*r.appHeight+r.cellHeaderHeight+"rem");a.openEnd();a.openStart("div");a.class("sapUiCalendarApp");if(p.getSelected()){a.class("sapUiCalendarAppSel")}if(p.getTentative()){a.class("sapUiCalendarAppTent")}if(b){a.class("sapUiCalendarAppWithIcon")}a.openEnd();a.openStart("div");a.class("sapUiCalendarAppCont");if(D){a.style("background-color",p._getCSSColorForBackground(D))}a.openEnd();if(n.hasPrevious<0){T=["sapUiCalendarAppArrowIconLeft","sapUiCalendarAppArrowIcon"];a.icon("sap-icon://arrow-left",T,{title:null,role:"img"})}if(b){T=["sapUiCalendarAppIcon"];var L={};L["id"]=m+"-Icon";L["title"]=null;L["role"]="img";a.icon(b,T,L)}if(y){a.openStart("span",m+"-Title");a.class("sapUiCalendarAppTitle");a.openEnd();a.text(y,true);a.close("span")}if(n.hasNext<0){T=["sapUiCalendarAppArrowIconRight","sapUiCalendarAppArrowIcon"];a.icon("sap-icon://arrow-right",T,{title:null,role:"img"})}a.openStart("span",m+"-Descr");a.class("sapUiInvisibleText");a.openEnd();a.text(t._getAppointmentAnnouncementInfo(p));a.close("span");a.close("div");a.close("div");a.close("div")};f.renderDayNames=function(t,n,l){var i=n.getFirstDayOfWeek(),r,g=n.getId(),f,u=s.getConfiguration().getCalendarType(),v=l.getDaysStandAlone("abbreviated",u),S=l.getDaysStandAlone("wide",u),C=c.getInstance(n.getStartDate()),D,y;if(i<0||i>6){var h=o.getWeekConfigurationValues(n.getCalendarWeekNumbering(),new d(p.getFormatSettings().getFormatLocale().toString()));if(h){r=h.firstDayOfWeek}else{r=n._getCoreLocaleData().getFirstDayOfWeek()}}else{r=i}C.setDate(C.getDate()-C.getDay()+r);D=e.fromLocalJSDate(C);t.openStart("div",g+"-Names");t.class("sapMSPCMonthDayNames");t.openEnd();for(var b=0;b<7;b++){y=(b+r)%7;f=g+"-WH"+y;t.openStart("div",f);t.class("sapUiCalWH");if(b===0){t.class("sapUiCalFirstWDay")}if(a._isWeekend(D,l)){t.class("sapUiCalItemWeekEnd")}D.setDate(D.getDate()+1);t.accessibilityState(null,{role:"columnheader",label:S[y]});t.openEnd();t.text(v[y%7]);t.close("div")}t.close("div")};f.renderDndPlaceholder=function(e,a){e.openStart("div");e.class("sapMSinglePCOverlay");e.openEnd();e.renderControl(a);e.close("div")};return f},true);
//# sourceMappingURL=SinglePlanningCalendarMonthGridRenderer.js.map