/*!
 * OpenUI5
 * (c) Copyright 2009-2022 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/fl/changeHandler/condenser/Classification"],function(e){"use strict";var t={};var n="actions";t.applyChange=function(e,t,r){var o=r.modifier;var a=r.view;var i=r.appComponent;var g=e.getDefinition().content.movedElements[0];var s=g.targetIndex;var c;var d;return Promise.resolve().then(o.bySelector.bind(o,g.selector,i,a)).then(function(e){c=e;return o.getAggregation(t,n)}).then(function(r){var g;r.some(function(e,r){if(o.getId(e)===o.getId(c)){d=r;g=Promise.resolve().then(o.removeAggregation.bind(o,t,n,e)).then(o.insertAggregation.bind(o,t,"dependents",e,undefined,a));return true}return false});return g.then(function(){e.setRevertData({index:d,sourceParent:o.getSelector(t,i),aggregation:n});return o.insertAggregation(t,n,c,s,a)})})};t.revertChange=function(e,t,r){var o=r.modifier;var a=r.view;var i=r.appComponent;var g=e.getDefinition().content.movedElements[0];var s=e.getRevertData();var c;var d;var v;c=o.bySelector(g.selector,i,a);d=s?s.index:g.targetIndex;v=g.sourceIndex;return Promise.resolve().then(o.removeAggregation.bind(o,t,n,c,d,a)).then(o.insertAggregation.bind(o,t,n,c,v,a))};t.completeChangeContent=function(e,t,n){var r=n.modifier,o=n.appComponent,a=e.getDefinition();a.content={movedElements:[],targetAggregation:t.target.aggregation,targetContainer:t.selector};t.movedElements.forEach(function(e){var t=e.element||r.bySelector(e.id,o);a.content.movedElements.push({selector:r.getSelector(t,o),sourceIndex:e.sourceIndex,targetIndex:e.targetIndex})})};t.getCondenserInfo=function(t){var n=t.getContent();var r=t.getRevertData();return{affectedControl:n.movedElements[0].selector,classification:e.Move,sourceContainer:r.sourceParent,targetContainer:n.targetContainer,sourceIndex:r.index,sourceAggregation:r.aggregation,targetAggregation:n.targetAggregation,setTargetIndex:function(e,t){e.getContent().movedElements[0].targetIndex=t},getTargetIndex:function(e){return e.getContent().movedElements[0].targetIndex}}};return t},true);